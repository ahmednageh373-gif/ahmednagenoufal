var ae=Object.defineProperty,te=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var M=(s,i,a)=>i in s?ae(s,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[i]=a,P=(s,i)=>{for(var a in i||(i={}))U.call(i,a)&&M(s,a,i[a]);if(_)for(var a of _(i))O.call(i,a)&&M(s,a,i[a]);return s},z=(s,i)=>te(s,re(i));var B=(s,i)=>{var a={};for(var x in s)U.call(s,x)&&i.indexOf(x)<0&&(a[x]=s[x]);if(s!=null&&_)for(var x of _(s))i.indexOf(x)<0&&O.call(s,x)&&(a[x]=s[x]);return a};var w=(s,i,a)=>new Promise((x,o)=>{var h=m=>{try{b(a.next(m))}catch(g){o(g)}},t=m=>{try{b(a.throw(m))}catch(g){o(g)}},b=m=>m.done?x(m.value):Promise.resolve(m.value).then(h,t);b((a=a.apply(s,i)).next())});import{r as l,j as e,f as le}from"./react-vendor-ITqvX6Xp.js";import{t as ne,u as de,v as ie,w as oe,x as ce,y as xe,z as me,A as ge,B as be,C as he,D as ue,E as pe,F as je,G as ye,H as fe,I as Ne,J as ve}from"./index-ClqhgGpL.js";import{N as E,K as L,Q as Y,R as D,ay as ke,F as we,az as Se,a9 as Ce,aA as Ie,aB as Le,X as Re,D as Ae,V as Z,aC as Pe,aD as ze,af as Te,d as Ee,ad as _e,m as X,aE as Q,aF as Fe,aG as G,aH as H,ae as V,a5 as qe,aI as Be,ax as De,aJ as $e,ac as K,P as W,_ as q,ao as Me,c as Ue,aK as Oe,h as Xe,a6 as Qe,a7 as Ge,a8 as He,aL as Ve,j as Ke,t as We,aM as Je,ai as Ye,aN as Ze}from"./icons-lib-Dd_BpYQ6.js";import{k as R,v as T}from"./utils-lib-C_gzCXPI.js";import"./vendor-8CkhJSGZ.js";import"./vendor-large-gsDFeA65.js";import"./genai-lib-pAIF5Ws4.js";const es=({project:s,onUpdateBoqReconciliation:i})=>{const[a,x]=l.useState(null),[o,h]=l.useState(null),[t,b]=l.useState(!1),[m,g]=l.useState(""),c=l.useRef(null),d=l.useRef(null),j=(n,p)=>{var v;const y=(v=n.target.files)==null?void 0:v[0];y&&(p==="boq"?x(y):h(y))},f=()=>w(null,null,function*(){if(!a||!o){g("Please upload both a BOQ file and a takeoff file.");return}b(!0),g("");try{const n=yield ne(a,o);i(s.id,n)}catch(n){g(n.message||"An unexpected error occurred during reconciliation.")}finally{b(!1)}}),N=s.data.boqReconciliation||[],u=()=>{window.print()},r=()=>{const n=N.map(v=>({"بند المقايسة ID":v.boqItemId,"وصف بند المقايسة":v.boqItemDescription,"ملف الحصر":v.takeoffFile,"وصف بند الحصر":v.takeoffDescription,"درجة الثقة":v.matchConfidence})),p=XLSX.utils.json_to_sheet(n),y=XLSX.utils.book_new();XLSX.utils.book_append_sheet(y,p,"BOQ Reconciliation"),XLSX.writeFile(y,`boq_reconciliation_${s.name.replace(/\s/g,"_")}.xlsx`)};return e.jsxs("div",{className:"printable-area",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm mb-8 no-print",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"مطابقة المقايسة مع حصر الكميات"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"قم برفع ملف المقايسة التعاقدية وملف حصر الكميات (Takeoff Sheet) ليقوم الذكاء الاصطناعي بمطابقة البنود بينهما."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 transition-colors",onClick:()=>{var n;return(n=c.current)==null?void 0:n.click()},children:[e.jsx("input",{type:"file",accept:".xlsx, .xls, .csv",ref:c,onChange:n=>j(n,"boq"),className:"hidden"}),e.jsx(E,{size:32,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"font-semibold text-sm text-slate-700 dark:text-slate-300",children:a?a.name:"1. ارفع ملف المقايسة (BOQ)"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 transition-colors",onClick:()=>{var n;return(n=d.current)==null?void 0:n.click()},children:[e.jsx("input",{type:"file",accept:".xlsx, .xls, .csv",ref:d,onChange:n=>j(n,"takeoff"),className:"hidden"}),e.jsx(E,{size:32,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"font-semibold text-sm text-slate-700 dark:text-slate-300",children:o?o.name:"2. ارفع ملف حصر الكميات"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:f,disabled:t||!a||!o,className:"flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed mx-auto",children:[t?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:20}),e.jsx("span",{children:t?"...جاري المطابقة":"بدء المطابقة"})]})})]}),m&&e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 my-4 rounded",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"خطأ في المطابقة"}),e.jsx("p",{children:m})]}),N.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"نتائج المطابقة"}),e.jsxs("div",{className:"flex items-center gap-2 no-print",children:[e.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700",children:[e.jsx(Y,{size:18}),e.jsx("span",{children:"تصدير Excel"})]}),e.jsxs("button",{onClick:u,className:"flex items-center gap-2 bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600",children:[e.jsx(D,{size:18}),e.jsx("span",{children:"طباعة / PDF"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"بند المقايسة"}),e.jsx("th",{className:"p-3",children:"بند حصر الكميات"}),e.jsx("th",{className:"p-3",children:"ملف الحصر"}),e.jsx("th",{className:"p-3",children:"درجة الثقة"})]})}),e.jsx("tbody",{children:N.map((n,p)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("td",{className:"p-3",children:[e.jsx("span",{className:"font-mono text-xs text-slate-500",children:n.boqItemId}),e.jsx("p",{className:"font-medium",children:n.boqItemDescription})]}),e.jsx("td",{className:"p-3",children:n.takeoffDescription}),e.jsx("td",{className:"p-3 font-mono text-sm",children:n.takeoffFile}),e.jsx("td",{className:"p-3 font-semibold",children:n.matchConfidence})]},p))})]})})]})]})},ss=({project:s,onUpdateComparativeAnalysis:i})=>{const[a,x]=l.useState(null),[o,h]=l.useState(null),[t,b]=l.useState(!1),[m,g]=l.useState(""),c=l.useRef(null),d=l.useRef(null),j=(r,n)=>{var y;const p=(y=r.target.files)==null?void 0:y[0];p&&(n==="boq"?x(p):h(p))},f=()=>w(null,null,function*(){if(!a||!o){g("يرجى رفع ملف المقايسة وملف المقارنة.");return}b(!0),g("");try{const r=yield de(a,o);i(s.id,r)}catch(r){g(r.message||"حدث خطأ غير متوقع أثناء التحليل.")}finally{b(!1)}}),N=s.data.comparativeAnalysisReport||"",u=N?R.parse(N):"";return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"تحليل المقارنة المالية"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"بناءً على المنطق المقدم، قم برفع ملف مقايسة أساسي وملف مقارنة مالية. سيقوم الذكاء الاصطناعي بتحليلهما معًا لإنشاء تقرير مفصل."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 transition-colors",onClick:()=>{var r;return(r=c.current)==null?void 0:r.click()},children:[e.jsx("input",{type:"file",accept:".xlsx, .xls, .csv",ref:c,onChange:r=>j(r,"boq"),className:"hidden"}),e.jsx(E,{size:32,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"font-semibold text-sm text-slate-700 dark:text-slate-300",children:a?a.name:"1. ارفع ملف المقايسة الأساسي"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 transition-colors",onClick:()=>{var r;return(r=d.current)==null?void 0:r.click()},children:[e.jsx("input",{type:"file",accept:".xlsx, .xls, .csv",ref:d,onChange:r=>j(r,"comparison"),className:"hidden"}),e.jsx(E,{size:32,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"font-semibold text-sm text-slate-700 dark:text-slate-300",children:o?o.name:"2. ارفع ملف المقارنة المالية"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:f,disabled:t||!a||!o,className:"flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed mx-auto",children:[t?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:20}),e.jsx("span",{children:t?"...جاري التحليل":"بدء التحليل المقارن"})]})})]}),m&&e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 my-4 rounded",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"خطأ في التحليل"}),e.jsx("p",{children:m})]}),(t||N)&&e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"التقرير التحليلي"}),t&&!N&&e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{children:"يقوم الذكاء الاصطناعي بتحليل الملفات، يرجى الانتظار..."})}),N&&e.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:u}})]})]})},as=({isOpen:s,onClose:i,onLink:a,boqItems:x,aiItem:o})=>{const[h,t]=l.useState("");if(!s||!o)return null;const b=()=>{h&&a(h)};return e.jsx("div",{className:"modal",style:{display:"block"},onClick:i,children:e.jsxs("div",{className:"modal-content p-6 max-w-lg",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"ربط بند من المخطط"}),e.jsx("button",{onClick:i,children:e.jsx(Re,{size:20})})]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"سيتم تحديث كمية البند المختار في المقايسة الرئيسية بالكمية المستخرجة من المخطط."}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded-lg mb-4",children:[e.jsx("p",{className:"font-semibold",children:o.item}),e.jsxs("p",{className:"text-sm",children:["الكمية المستخرجة: ",e.jsxs("span",{className:"font-bold",children:[o.quantity," ",o.unit]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"boq-item-select",className:"block text-sm font-medium mb-2",children:"اختر البند من المقايسة الرئيسية"}),e.jsxs("select",{id:"boq-item-select",value:h,onChange:m=>t(m.target.value),className:"w-full bg-gray-50 dark:bg-gray-900 p-2 rounded-lg border dark:border-gray-600",children:[e.jsx("option",{value:"",disabled:!0,children:"-- اختر بندًا لربطه --"}),x.map(m=>e.jsxs("option",{value:m.id,children:[m.item," (الكمية الحالية: ",m.quantity,")"]},m.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-6 mt-4 border-t dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:i,className:"py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600",children:"إلغاء"}),e.jsx("button",{onClick:b,disabled:!h,className:"py-2 px-4 rounded-lg bg-indigo-600 text-white disabled:bg-gray-400",children:"ربط وتحديث الكمية"})]})]})})},ts=({project:s,onUpdateFinancials:i})=>{const[a,x]=l.useState(null),[o,h]=l.useState(null),[t,b]=l.useState(!1),[m,g]=l.useState(""),[c,d]=l.useState(null),j=l.useRef(null),[f,N]=l.useState(!1),[u,r]=l.useState(null),n=k=>{var A;const I=(A=k.target.files)==null?void 0:A[0];if(I){x(I),d(null),g("");const S=new FileReader;S.onloadend=()=>{h(S.result)},S.readAsDataURL(I)}},p=()=>w(null,null,function*(){if(!a){g("يرجى رفع صورة المخطط أولاً.");return}b(!0),g(""),d(null);try{const k=yield ie(a);d(k)}catch(k){g(k.message||"حدث خطأ غير متوقع أثناء تحليل المخطط.")}finally{b(!1)}}),y=k=>{const I={id:`boq-ai-${T()}`,item:`${k.item} - ${k.description}`,quantity:k.quantity,unit:k.unit,unitPrice:0,total:0},S=[...s.data.financials||[],I];i(s.id,S),alert(`"${I.item}" تم إضافته إلى المقايسة الرئيسية.`)},v=k=>{r(k),N(!0)},C=k=>{if(!u)return;const I=s.data.financials.find(S=>S.id===k);if(!I)return;const A=s.data.financials.map(S=>{if(S.id===k){const $=u.quantity;return z(P({},S),{quantity:$,total:$*S.unitPrice})}return S});i(s.id,A),alert(`تم تحديث كمية البند "${I.item}" إلى ${u.quantity}.`),N(!1),r(null)},ee=()=>{if(!c||c.preliminaryBOQ.length===0)return;const k=c.preliminaryBOQ.map(S=>({البند:S.item,الوصف:S.description,الكمية:S.quantity,الوحدة:S.unit})),I=XLSX.utils.json_to_sheet(k),A=XLSX.utils.book_new();XLSX.utils.book_append_sheet(A,I,"Preliminary BOQ"),XLSX.writeFile(A,`Preliminary_BOQ_${a==null?void 0:a.name.replace(/\.[^/.]+$/,"")}.xlsx`)},se=()=>{window.print()};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 printable-area",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 rounded-xl p-6 space-y-6 no-print",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"محلل المخططات وحصر الكميات"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ارفع صورة عالية الجودة للمخطط ليقوم الذكاء الاصطناعي بتحليلها واستخراج مقايسة كميات أولية."})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl min-h-[250px] flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 transition-colors bg-gray-50 dark:bg-gray-800/50",onClick:()=>{var k;return(k=j.current)==null?void 0:k.click()},children:[e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/bmp",ref:j,onChange:n,className:"hidden"}),o?e.jsx("img",{src:o,alt:"معاينة المخطط",className:"object-contain max-h-80 rounded-lg p-2"}):e.jsxs("div",{className:"text-center text-gray-500 p-4",children:[e.jsx(E,{size:48,className:"mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"انقر لرفع صورة المخطط"}),e.jsx("p",{className:"text-xs mt-1",children:"يدعم PNG, JPG, BMP"})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:p,disabled:t||!a,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400",children:[t?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:20}),e.jsx("span",{children:t?"...جاري تحليل المخطط":"تحليل وحصر الكميات"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"نتائج التحليل"}),e.jsxs("button",{onClick:se,className:"flex items-center gap-2 bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600 no-print",children:[e.jsx(D,{size:18}),e.jsx("span",{children:"طباعة / PDF"})]})]}),m&&e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"خطأ في التحليل"}),e.jsx("p",{children:m})]}),t&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"يقوم الذكاء الاصطناعي بتحليل المخطط، قد يستغرق الأمر بضع لحظات..."})}),!t&&!c&&!m&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"ستظهر نتائج التحليل التفصيلية هنا."})}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{size:18,className:"text-indigo-500"}),e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"ملخص المخطط"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-md",children:c.summary})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{size:18,className:"text-indigo-500"}),e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"النصوص والأبعاد المستخرجة"})]}),e.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-md max-h-40 overflow-auto whitespace-pre-wrap font-sans",children:c.extractedText})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{size:18,className:"text-indigo-500"}),e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"مقايسة الكميات الأولية"})]}),e.jsxs("button",{onClick:ee,disabled:c.preliminaryBOQ.length===0,className:"flex items-center gap-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 text-xs font-semibold py-1 px-2 rounded-md hover:bg-green-200 no-print",children:[e.jsx(Ce,{size:14}),"تصدير Excel"]})]}),e.jsx("div",{className:"max-h-60 overflow-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"البند"}),e.jsx("th",{className:"p-2",children:"الكمية"}),e.jsx("th",{className:"p-2",children:"الوحدة"}),e.jsx("th",{className:"p-2 no-print",children:"إجراء"})]})}),e.jsx("tbody",{children:c.preliminaryBOQ.map((k,I)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[e.jsx("td",{className:"p-2 font-medium",children:k.item}),e.jsx("td",{className:"p-2",children:k.quantity}),e.jsx("td",{className:"p-2",children:k.unit}),e.jsx("td",{className:"p-2 no-print",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(k),title:"إضافة كبند جديد",className:"flex items-center gap-1 text-green-600 hover:text-green-800 text-xs font-semibold",children:e.jsx(Ie,{size:14})}),e.jsx("button",{onClick:()=>v(k),title:"ربط ببند قائم",className:"flex items-center gap-1 text-indigo-600 hover:text-indigo-800 text-xs font-semibold",children:e.jsx(Le,{size:14})})]})})]},I))})]})})]})]})]}),e.jsx(as,{isOpen:f,onClose:()=>N(!1),onLink:C,boqItems:s.data.financials||[],aiItem:u})]})},rs=({project:s})=>{const i=s.data.financials||[],[a,x]=l.useState(!1),[o,h]=l.useState(""),[t,b]=l.useState(""),m=()=>w(null,null,function*(){x(!0),h(""),b("");try{const c=yield oe(i);b(c)}catch(c){h(c.message||"An unexpected error occurred during analysis.")}finally{x(!1)}}),g=t?R.parse(t):"";return e.jsxs("div",{children:[e.jsx("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm mb-8",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(Ae,{size:48,className:"mx-auto mb-4 text-green-500"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"تحليل هندسة القيمة"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 max-w-2xl",children:"استخدم الذكاء الاصطناعي لتحليل مقايسة المشروع وتحديد فرص توفير التكاليف، والكشف عن المخاطر المحتملة في الميزانية، والحصول على توصيات لتحسين القيمة."}),e.jsxs("button",{onClick:m,disabled:a||i.length===0,className:"flex items-center justify-center gap-2 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed mx-auto",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:20}),e.jsx("span",{children:a?"...جاري التحليل":"بدء تحليل هندسة القيمة"})]}),i.length===0&&e.jsx("p",{className:"text-xs text-red-500 mt-2",children:"لا يمكن إجراء التحليل. يرجى رفع مقايسة المشروع أولاً."})]})}),o&&e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 my-4 rounded",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"خطأ في التحليل"}),e.jsx("p",{children:o})]}),(a||t)&&e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"تقرير هندسة القيمة"}),a&&!t&&e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{children:"يقوم الذكاء الاصطناعي بتحليل بياناتك، يرجى الانتظار..."})}),t&&e.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:g}})]}),!t&&!a&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:[e.jsx(Z,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"لم يتم إجراء تحليل بعد"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"انقر على زر التحليل أعلاه لبدء العملية."})]})]})},ls=({project:s})=>{const i=s.data.financials||[],[a,x]=l.useState([]),[o,h]=l.useState("مراجعة أسعار الوحدات لهذه البنود مقارنة بأسعار السوق الحالية في الرياض. هل هي معقولة؟ مع الإشارة إلى أي تعارضات محتملة مع كود البناء السعودي."),[t,b]=l.useState(!1),[m,g]=l.useState(""),[c,d]=l.useState(""),j=u=>{x(r=>r.includes(u)?r.filter(n=>n!==u):[...r,u])},f=()=>w(null,null,function*(){if(a.length===0||!o.trim()){g("الرجاء تحديد بند واحد على الأقل وإدخال استفسار.");return}b(!0),g(""),d("");try{const u=yield ce(s,a,o);d(u)}catch(u){g(u.message||"حدث خطأ غير متوقع أثناء التحليل.")}finally{b(!1)}}),N=c?R.parse(c):"";return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"1. حدد البنود"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"اختر البنود من المقايسة لتحليلها."})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-3 pr-2",children:i.length>0?i.map(u=>e.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:a.includes(u.id),onChange:()=>j(u.id),className:"mt-1"}),e.jsx("span",{className:"text-sm",children:u.item})]},u.id)):e.jsx("p",{className:"text-sm text-slate-500",children:"لا توجد بنود في المقايسة."})})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"2. اطرح سؤالك"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"اكتب سؤالك بوضوح حول البنود المحددة. يمكنك الاستفسار عن الأسعار، المواصفات، أو التوافق مع الكود السعودي."}),e.jsx("textarea",{value:o,onChange:u=>h(u.target.value),rows:5,className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:f,disabled:t||a.length===0||!o.trim(),className:"flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-indigo-700 disabled:bg-gray-400",children:[t?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:18}),e.jsx("span",{children:t?"...جاري التحليل":"تحليل"})]})})]}),m&&e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert",children:e.jsx("p",{children:m})}),(t||c)&&e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Pe,{size:24,className:"text-indigo-500"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"إجابة المستشار الهندسي"})]}),t&&!c?e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"يقوم المستشار بتحليل طلبك..."})}):e.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:N}})]})]})]})},ns=()=>{const[s,i]=l.useState(null),[a,x]=l.useState(null),[o,h]=l.useState("Analyze this image from the perspective of a civil engineer. Identify materials, construction stages, potential safety issues, and overall quality."),[t,b]=l.useState(!1),[m,g]=l.useState(""),[c,d]=l.useState(""),j=l.useRef(null),f=r=>{var p;const n=(p=r.target.files)==null?void 0:p[0];if(n){i(n),d(""),g("");const y=new FileReader;y.onloadend=()=>{x(y.result)},y.readAsDataURL(n)}},N=()=>w(null,null,function*(){if(!s||!o){g("Please upload an image and provide a prompt.");return}b(!0),g(""),d("");try{const r=yield xe(o,s);d(r)}catch(r){g(r.message||"An unexpected error occurred during analysis.")}finally{b(!1)}}),u=c?R.parse(c):"";return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"تحليل الصور بالذكاء الاصطناعي"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl min-h-[200px] flex flex-col items-center justify-center cursor-pointer hover:border-sky-500 transition-colors bg-slate-50 dark:bg-slate-900/50",onClick:()=>{var r;return(r=j.current)==null?void 0:r.click()},children:[e.jsx("input",{type:"file",accept:"image/*",ref:j,onChange:f,className:"hidden"}),a?e.jsx("img",{src:a,alt:"Preview",className:"object-contain max-h-64 rounded-lg"}):e.jsxs("div",{className:"text-center text-slate-500 p-4",children:[e.jsx(E,{size:48,className:"mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"انقر لرفع صورة"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"image-prompt",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"ما الذي تريد تحليله في الصورة؟"}),e.jsx("textarea",{id:"image-prompt",value:o,onChange:r=>h(r.target.value),rows:4,className:"w-full bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-sky-500 text-sm"})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:N,disabled:t||!s||!o,className:"w-full flex items-center justify-center gap-2 bg-sky-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-sky-700 transition-colors disabled:bg-slate-400",children:[t?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:20}),e.jsx("span",{children:t?"...جاري التحليل":"تحليل الصورة"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"النتائج"}),m&&e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"خطأ في التحليل"}),e.jsx("p",{children:m})]}),t&&!c&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"جاري تحليل الصورة، يرجى الانتظار..."})}),c&&e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:u}}),!c&&!t&&!m&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"ستظهر نتائج التحليل هنا بعد رفع الصورة وتشغيل المحلل."})})]})]})},ds=()=>{const s='<iframe class="scribd_iframe_embed" title="دراسة+اسعارب+بنود+المباني(2)" src="https://www.scribd.com/embeds/651362130/content?start_page=1&view_mode=scroll&access_key=key-Oxe0W4ixZdhkGR3fGSNn" tabindex="0" data-auto-height="true" data-aspect-ratio="1.414442700156986" scrolling="no" width="100%" height="600" frameborder="0" ></iframe>',[i,a]=l.useState(s),[x,o]=l.useState(null),[h,t]=l.useState("لخص محتويات هذا المستند وما هي أهم النقاط التي يركز عليها؟"),[b,m]=l.useState(!1),[g,c]=l.useState(""),[d,j]=l.useState(""),f=()=>{try{const p=new DOMParser().parseFromString(i,"text/html").querySelector("iframe");p&&p.src&&p.title?(o({src:p.src,title:p.title}),c("")):(c("كود التضمين غير صالح. يرجى التأكد من أنه يحتوي على <iframe> مع سمتي src و title."),o(null))}catch(r){c("فشل في تحليل كود التضمين."),o(null)}},N=()=>w(null,null,function*(){if(!x||!h.trim()){c("يرجى تحميل مستند وطرح سؤال أولاً.");return}m(!0),c(""),j("");try{const r=yield me(x.title,h);j(r)}catch(r){c(r.message||"حدث خطأ غير متوقع أثناء التحليل.")}finally{m(!1)}}),u=d?R.parse(d):"";return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"محلل مستندات Scribd"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ألصق كود التضمين لمستند Scribd، ثم اطرح سؤالاً حول محتواه ليقوم الذكاء الاصطناعي بتحليله."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"embed-code",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"كود التضمين من Scribd"}),e.jsx("textarea",{id:"embed-code",value:i,onChange:r=>a(r.target.value),rows:4,className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm font-mono",placeholder:"<iframe ...></iframe>"}),e.jsxs("button",{onClick:f,className:"mt-2 flex items-center gap-2 bg-gray-600 text-white text-sm font-semibold py-2 px-4 rounded-lg hover:bg-gray-700",children:[e.jsx(ze,{size:16}),"تحميل المستند"]})]}),x&&e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:e.jsx("iframe",{title:x.title,src:x.src,width:"100%",height:"300",frameBorder:"0",scrolling:"no",className:"rounded-lg border border-gray-200 dark:border-gray-700"},x.src)})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm flex flex-col",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"التحليل"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user-query",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"سؤالك عن المستند"}),e.jsx("textarea",{id:"user-query",value:h,onChange:r=>t(r.target.value),rows:3,className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm",placeholder:"ما هي النقاط الرئيسية في هذا المستند؟"}),e.jsxs("button",{onClick:N,disabled:b||!x||!h.trim(),className:"mt-2 w-full flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400",children:[b?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:18}),e.jsx("span",{children:b?"...جاري التحليل":"تحليل"})]})]}),e.jsxs("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-700 pt-4 flex-grow overflow-y-auto",children:[g&&e.jsx("div",{className:"text-red-500 text-sm",children:g}),b&&!d&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"يقوم الذكاء الاصطناعي بقراءة وتحليل المستند..."})}),d?e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:u}}):!b&&e.jsxs("div",{className:"text-center p-8 text-slate-500",children:[e.jsx(Te,{size:48,className:"mx-auto mb-4"}),e.jsx("p",{children:"ستظهر نتائج التحليل هنا."})]})]})]})]})},is=()=>{const[s,i]=l.useState("Provide a comprehensive risk assessment matrix for a high-rise building project in a seismic zone. Include financial, technical, and environmental risks, their probability, impact, and detailed mitigation strategies. The output should be a detailed markdown table."),[a,x]=l.useState(!1),[o,h]=l.useState(""),[t,b]=l.useState(""),m=()=>w(null,null,function*(){if(s.trim()){x(!0),h(""),b("");try{const c=yield ge(s);b(c)}catch(c){h(c.message||"An unexpected error occurred.")}finally{x(!1)}}}),g=t?R.parse(t):"";return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-full",children:e.jsx(Ee,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-1",children:"استعلام معقد (وضع التفكير)"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"اطرح أسئلة معقدة تتطلب تفكيرًا عميقًا وتخطيطًا متعدد الخطوات. يستخدم هذا الوضع نموذجًا متقدمًا بقدرات تفكير محسنة لتقديم إجابات شاملة."})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("textarea",{value:s,onChange:c=>i(c.target.value),placeholder:"أدخل استفسارك المعقد هنا...",rows:8,className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:m,disabled:a||!s.trim(),className:"flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(_e,{size:16}),e.jsx("span",{children:a?"...يفكر الذكاء الاصطناعي بعمق":"إرسال الاستعلام"})]})})]}),o&&e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"خطأ في الاستعلام"}),e.jsx("p",{children:o})]}),(a||t)&&e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"النتيجة"}),a&&!t&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"يتم الآن معالجة طلبك المعقد. قد يستغرق هذا وقتًا أطول من المعتاد..."})}),t&&e.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:g}})]})]})},os=[{value:"16:9",label:"Landscape"},{value:"1:1",label:"Square"},{value:"9:16",label:"Portrait"},{value:"4:3",label:"Standard"},{value:"3:4",label:"Vertical"}],cs=()=>{const[s,i]=l.useState("A photorealistic image of a futuristic skyscraper made of sustainable materials, with flying vehicles around it, golden hour lighting."),[a,x]=l.useState("16:9"),[o,h]=l.useState(!1),[t,b]=l.useState(""),[m,g]=l.useState(null),c=()=>w(null,null,function*(){if(s.trim()){h(!0),b(""),g(null);try{const d=yield be(s,a);g(`data:image/jpeg;base64,${d}`)}catch(d){b(d.message||"An unexpected error occurred during image generation.")}finally{h(!1)}}});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/50 p-3 rounded-full",children:e.jsx(X,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-1",children:"إنشاء الصور بالذكاء الاصطناعي"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"حوّل أفكارك إلى صور مرئية. صف المشهد أو المفهوم الذي تريده بالتفصيل."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"generation-prompt",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"وصف الصورة المطلوبة"}),e.jsx("textarea",{id:"generation-prompt",value:s,onChange:d=>i(d.target.value),rows:6,className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"نسبة العرض إلى الارتفاع"}),e.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:os.map(({value:d,label:j})=>e.jsxs("button",{onClick:()=>x(d),className:`w-full py-2 text-xs md:text-sm rounded-md transition-colors ${a===d?"bg-white dark:bg-gray-900 shadow-sm font-semibold":"text-slate-600 dark:text-slate-300"}`,children:[j," (",d,")"]},d))})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:c,disabled:o||!s,className:"w-full flex items-center justify-center gap-2 bg-amber-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-amber-600 transition-colors disabled:bg-gray-400",children:[o?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(X,{size:20}),e.jsx("span",{children:o?"...جاري الإنشاء":"إنشاء الصورة"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm flex items-center justify-center min-h-[400px]",children:[t&&e.jsx("div",{className:"text-center text-red-500",children:e.jsxs("p",{children:[e.jsx("strong",{children:"فشل إنشاء الصورة:"})," ",t]})}),o&&e.jsx("div",{className:"text-center text-slate-500",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx(Q,{size:64,className:"mb-4"}),e.jsx("p",{children:"يقوم الذكاء الاصطناعي برسم فكرتك..."})]})}),m&&!o&&e.jsx("img",{src:m,alt:s,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg"}),!o&&!m&&!t&&e.jsxs("div",{className:"text-center text-slate-500",children:[e.jsx(Q,{size:64,className:"mx-auto mb-4"}),e.jsx("p",{children:"ستظهر الصورة التي تم إنشاؤها هنا."})]})]})]})},xs=({onKeySelected:s})=>{const[i,a]=l.useState(!1),[x,o]=l.useState(!0);l.useEffect(()=>{w(null,null,function*(){o(!0);const b=yield window.aistudio.hasSelectedApiKey();a(b),b&&s(),o(!1)})},[s]);const h=()=>w(null,null,function*(){yield window.aistudio.openSelectKey(),a(!0),s()});return x?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mb-4"}),e.jsx("p",{children:"جاري التحقق من مفتاح API..."})]}):i?null:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 dark:text-gray-400 p-8",children:[e.jsx(Fe,{size:64,className:"text-indigo-400 mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:"مطلوب مفتاح API للمتابعة"}),e.jsx("p",{className:"max-w-md mb-6",children:"لاستخدام ميزات إنشاء الفيديو المتقدمة (Veo)، يجب عليك تحديد مفتاح API الخاص بك. هذا يضمن أن استخدامك مرتبط بحسابك الخاص."}),e.jsx("button",{onClick:h,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-transform hover:scale-105",children:"اختر مفتاح API"}),e.jsxs("p",{className:"text-xs mt-4",children:["بالنقر على الزر، فإنك توافق على الشروط. قد يتم تطبيق رسوم. للمزيد من المعلومات حول التسعير، يرجى زيارة"," ",e.jsx("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-500 hover:underline",children:"وثائق الفوترة"}),"."]})]})},ms=[{value:"16:9",label:"Landscape"},{value:"9:16",label:"Portrait"}],gs=[{value:"1080p",label:"1080p (HD)"},{value:"720p",label:"720p (Fast)"}],F=["جاري تهيئة محركات الفيديو...","يتم الآن تحويل أفكارك إلى بيكسلات...","لحظات قليلة، يتم الآن بناء عالمك المرئي...","قد يستغرق إنشاء الفيديو بضع دقائق، شكراً لصبرك...","النماذج الذكية تعمل بجد لإنشاء الفيديو الخاص بك..."],bs=()=>{const[s,i]=l.useState("A drone shot flying over a futuristic construction site of a massive skyscraper in Riyadh, Saudi Arabia. Neon lights, flying vehicles, and robotic workers are visible."),[a,x]=l.useState("16:9"),[o,h]=l.useState("720p"),[t,b]=l.useState(!1),[m,g]=l.useState(F[0]),[c,d]=l.useState(""),[j,f]=l.useState(null),[N,u]=l.useState(!1);le.useEffect(()=>{let p;return t&&(p=window.setInterval(()=>{g(y=>{const C=(F.indexOf(y)+1)%F.length;return F[C]})},4e3)),()=>clearInterval(p)},[t]);const r=()=>{u(!1),d("فشل الطلب. قد يكون مفتاح API المحدد غير صالح. يرجى تحديد مفتاح آخر والمحاولة مرة أخرى.")},n=()=>w(null,null,function*(){if(s.trim()){b(!0),d(""),f(null);try{const p=yield he(s,a,o);f(p)}catch(p){const y=p.message||"An unexpected error occurred during video generation.";y.includes("Requested entity was not found.")?r():d(y)}finally{b(!1)}}});return N?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-full",children:e.jsx(G,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-1",children:"إنشاء الفيديو (Veo)"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"حوّل النصوص إلى مقاطع فيديو عالية الجودة. كن وصفيًا قدر الإمكان للحصول على أفضل النتائج."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"video-prompt",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"وصف الفيديو المطلوب"}),e.jsx("textarea",{id:"video-prompt",value:s,onChange:p=>i(p.target.value),rows:6,className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"الأبعاد"}),e.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:ms.map(({value:p,label:y})=>e.jsx("button",{onClick:()=>x(p),className:`w-full py-2 text-sm rounded-md ${a===p?"bg-white dark:bg-gray-900 shadow-sm":""}`,children:y},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"الدقة"}),e.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:gs.map(({value:p,label:y})=>e.jsx("button",{onClick:()=>h(p),className:`w-full py-2 text-sm rounded-md ${o===p?"bg-white dark:bg-gray-900 shadow-sm":""}`,children:y},p))})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:n,disabled:t||!s,className:"w-full flex items-center justify-center gap-2 bg-purple-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-purple-700 disabled:bg-gray-400",children:[t?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(G,{size:20}),e.jsx("span",{children:t?"...جاري الإنشاء":"إنشاء الفيديو"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm flex items-center justify-center min-h-[400px]",children:[c&&e.jsx("div",{className:"text-center text-red-500",children:e.jsxs("p",{children:[e.jsx("strong",{children:"فشل إنشاء الفيديو:"})," ",c]})}),t&&e.jsx("div",{className:"text-center text-slate-500",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx(H,{size:64,className:"mb-4"}),e.jsx("p",{className:"font-semibold",children:m})]})}),j&&!t&&e.jsx("video",{src:j,controls:!0,autoPlay:!0,loop:!0,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg"}),!t&&!j&&!c&&e.jsxs("div",{className:"text-center text-slate-500",children:[e.jsx(H,{size:64,className:"mx-auto mb-4"}),e.jsx("p",{children:"سيظهر الفيديو الذي تم إنشاؤه هنا."})]})]})]}):e.jsx(xs,{onKeySelected:()=>u(!0)})},hs=s=>{let i=`BEGIN:VCARD
`;return i+=`VERSION:3.0
`,i+=`FN:${s.name}
`,i+=`ORG:${s.type||"Contact"}
`,s.phone&&(i+=`TEL;TYPE=WORK,VOICE:${s.phone}
`),s.address&&(i+=`ADR;TYPE=WORK:;;${s.address.replace(/,/g,";")}
`),s.mapsUri&&(i+=`URL:${s.mapsUri}
`),i+=`END:VCARD
`,i},us=()=>{const[s,i]=l.useState("موردين مواد بناء"),[a,x]=l.useState(!1),[o,h]=l.useState(""),[t,b]=l.useState(null),[m,g]=l.useState(null),[c,d]=l.useState(!1),j=()=>{d(!0),h(""),navigator.geolocation.getCurrentPosition(n=>{g({latitude:n.coords.latitude,longitude:n.coords.longitude}),d(!1)},n=>{h(`خطأ في تحديد الموقع: ${n.message}. يرجى تفعيل خدمات الموقع في متصفحك.`),d(!1)})},f=()=>w(null,null,function*(){if(!s.trim()||!m){h("يرجى تقديم استعلام والسماح بالوصول إلى الموقع.");return}x(!0),h(""),b(null);try{const n=yield ue(s,m);b(n)}catch(n){h(n.message||"حدث خطأ غير متوقع.")}finally{x(!1)}}),N=n=>{const p=hs(n),y=new Blob([p],{type:"text/vcard;charset=utf-8"}),v=URL.createObjectURL(y),C=document.createElement("a");C.href=v,C.download=`${n.name.replace(/\s/g,"_")}.vcf`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(v)},u=()=>{if(!t)return;const n=t.map(v=>({الاسم:v.name,النوع:v.type,الهاتف:v.phone,العنوان:v.address,"رابط الخريطة":v.mapsUri})),p=XLSX.utils.json_to_sheet(n),y=XLSX.utils.book_new();XLSX.utils.book_append_sheet(y,p,"Location Results"),XLSX.writeFile(y,`location_query_${s.replace(/\s/g,"_")}.xlsx`)},r=()=>window.print();return e.jsxs("div",{className:"space-y-8 printable-area",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm no-print",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-cyan-100 dark:bg-cyan-900/50 p-3 rounded-full",children:e.jsx(V,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-1",children:"الاستعلام الجغرافي"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ابحث عن موردين، مقاولين، أو أي خدمات أخرى بالقرب من موقعك الحالي."})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"location-prompt",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"ما الذي تبحث عنه؟"}),e.jsx("input",{id:"location-prompt",value:s,onChange:n=>i(n.target.value),placeholder:"مثال: مقاولين تشطيبات، موردي خرسانة جاهزة",className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[m?e.jsxs("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium flex items-center gap-2",children:[e.jsx(V,{size:16}),e.jsx("span",{children:"تم تحديد الموقع. أنت جاهز للبحث."})]}):e.jsx("button",{onClick:j,disabled:c,className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-200 bg-gray-200 dark:bg-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:c?"...جاري التحديد":"الحصول على موقعي الحالي"}),e.jsxs("button",{onClick:f,disabled:a||!s.trim()||!m,className:"flex items-center justify-center gap-2 bg-cyan-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-cyan-700 disabled:bg-gray-400 w-full sm:w-auto",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(qe,{size:16}),e.jsx("span",{children:a?"...جاري البحث":"بحث"})]})]})]}),o&&e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded no-print",children:e.jsx("p",{children:o})}),t&&e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-wrap gap-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"النتائج"}),e.jsxs("div",{className:"flex items-center gap-2 no-print",children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 bg-green-600 text-white font-semibold py-2 px-3 rounded-lg text-sm",children:[e.jsx(Y,{size:16}),e.jsx("span",{children:"Excel"})]}),e.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-gray-500 text-white font-semibold py-2 px-3 rounded-lg text-sm",children:[e.jsx(D,{size:16}),e.jsx("span",{children:"Print"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-sm responsive-table",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"الاسم"}),e.jsx("th",{className:"p-2",children:"النوع"}),e.jsx("th",{className:"p-2",children:"الهاتف"}),e.jsx("th",{className:"p-2",children:"العنوان"}),e.jsx("th",{className:"p-2 no-print",children:"إجراءات"})]})}),e.jsx("tbody",{children:t.map((n,p)=>e.jsxs("tr",{className:"border-b dark:border-gray-700 last:border-0",children:[e.jsx("td",{className:"p-2 font-medium","data-label":"الاسم",children:n.name}),e.jsx("td",{className:"p-2","data-label":"النوع",children:n.type}),e.jsx("td",{className:"p-2 font-mono","data-label":"الهاتف",children:n.phone||"-"}),e.jsx("td",{className:"p-2","data-label":"العنوان",children:n.address||"-"}),e.jsx("td",{className:"p-2 no-print","data-label":"إجراءات",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.mapsUri&&e.jsx("a",{href:n.mapsUri,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-blue-500 hover:bg-blue-100 rounded-md",title:"Open in Maps",children:e.jsx(Be,{size:16})}),e.jsx("button",{onClick:()=>N(n),className:"p-1.5 text-green-600 hover:bg-green-100 rounded-md",title:"Save to Contacts",children:e.jsx(De,{size:16})})]})})]},p))})]})})]})]})},ps=()=>{const[s,i]=l.useState(10),[a,x]=l.useState([{id:T(),type:"Pin",position:0},{id:T(),type:"Roller",position:10}]),[o,h]=l.useState([{id:T(),type:"UDL",magnitude:20,position:0,endPosition:10}]),[t,b]=l.useState(!1),[m,g]=l.useState(""),[c,d]=l.useState(null),j=(r,n,p)=>{x(y=>y.map(v=>v.id===r?z(P({},v),{[n]:p}):v))},f=(r,n,p)=>{h(y=>y.map(v=>v.id===r?z(P({},v),{[n]:p}):v))},N=()=>w(null,null,function*(){b(!0),g(""),d(null);try{const r={length:s,supports:a.map(v=>{var C=v,{id:p}=C,y=B(C,["id"]);return y}),loads:o.map(v=>{var C=v,{id:p}=C,y=B(C,["id"]);return y})},n=yield pe(r);d(n)}catch(r){g(r.message||"An unexpected error occurred.")}finally{b(!1)}}),u=({title:r,value:n,unit:p,position:y})=>e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:r}),e.jsxs("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[n.toFixed(2)," ",e.jsx("span",{className:"text-base font-normal",children:p})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["at ",y.toFixed(2)," m"]})]});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-full",children:e.jsx($e,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"محلل العوارض (Beam Calculator)"}),e.jsx("p",{className:"text-sm text-slate-500",children:"قم بتعريف خصائص العارضة والدعامات والأحمال للحصول على تحليل إنشائي فوري."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"طول العارضة (متر)"}),e.jsx("input",{type:"number",value:s,onChange:r=>i(Number(r.target.value)),className:"w-full bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"الدعامات"}),a.map(r=>e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center mb-2",children:[e.jsxs("select",{value:r.type,onChange:n=>j(r.id,"type",n.target.value),className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700",children:[e.jsx("option",{children:"Pin"}),e.jsx("option",{children:"Roller"}),e.jsx("option",{children:"Fixed"})]}),e.jsx("input",{type:"number",value:r.position,onChange:n=>j(r.id,"position",Number(n.target.value)),placeholder:"الموقع (م)",className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"}),e.jsx("button",{onClick:()=>x(n=>n.filter(p=>p.id!==r.id)),className:"text-red-500 hover:bg-red-100 p-2 rounded-md",children:e.jsx(K,{size:16})})]},r.id)),e.jsxs("button",{onClick:()=>x(r=>[...r,{id:T(),type:"Roller",position:s}]),className:"text-sm text-indigo-600 flex items-center gap-1",children:[e.jsx(W,{size:14})," إضافة دعامة"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"الأحمال"}),o.map(r=>e.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center mb-2",children:[e.jsxs("select",{value:r.type,onChange:n=>f(r.id,"type",n.target.value),className:"col-span-1 bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700",children:[e.jsx("option",{value:"Point",children:"Point"}),e.jsx("option",{value:"UDL",children:"UDL"})]}),e.jsx("input",{type:"number",value:r.magnitude,onChange:n=>f(r.id,"magnitude",Number(n.target.value)),placeholder:`القوة (${r.type==="Point"?"kN":"kN/m"})`,className:"col-span-1 bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"}),e.jsx("input",{type:"number",value:r.position,onChange:n=>f(r.id,"position",Number(n.target.value)),placeholder:"الموقع (م)",className:"col-span-1 bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"}),e.jsx("input",{type:"number",value:r.endPosition||"",onChange:n=>f(r.id,"endPosition",Number(n.target.value)),placeholder:"النهاية (م)",className:`col-span-1 bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700 ${r.type==="Point"?"opacity-50":""}`,disabled:r.type==="Point"}),e.jsx("button",{onClick:()=>h(n=>n.filter(p=>p.id!==r.id)),className:"col-span-1 text-red-500 hover:bg-red-100 p-2 rounded-md",children:e.jsx(K,{size:16})})]},r.id)),e.jsxs("button",{onClick:()=>h(r=>[...r,{id:T(),type:"Point",magnitude:10,position:s/2}]),className:"text-sm text-indigo-600 flex items-center gap-1",children:[e.jsx(W,{size:14})," إضافة حمل"]})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs("button",{onClick:N,disabled:t,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 disabled:bg-slate-400",children:[t?e.jsx(q,{className:"animate-spin"}):e.jsx(L,{}),e.jsx("span",{children:t?"جاري التحليل...":"تحليل العارضة"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"نتائج التحليل"}),m&&e.jsx("div",{className:"text-red-500 bg-red-100 p-3 rounded-md",children:m}),t&&!c&&e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{children:"جاري إجراء الحسابات الهندسية..."})}),!t&&!c&&!m&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"ستظهر نتائج التحليل هنا."})}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(u,{title:"أقصى عزم انحناء",value:c.maxBendingMoment.value,unit:"kNm",position:c.maxBendingMoment.position}),e.jsx(u,{title:"أقصى قوة قص",value:c.maxShearForce.value,unit:"kN",position:c.maxShearForce.position}),e.jsx(u,{title:"أقصى انحراف",value:c.maxDeflection.value,unit:"mm",position:c.maxDeflection.position})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"ملخص التحليل"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none bg-gray-50 dark:bg-gray-800 p-4 rounded-md",dangerouslySetInnerHTML:{__html:R.parse(c.summary)}})]})]})]})]})},J=({icon:s,title:i,value:a,color:x})=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:`w-6 h-6 ${x}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:i}),e.jsx("p",{className:`text-xl font-bold ${x}`,children:a})]})]})}),js=({project:s})=>{const[i,a]=l.useState({buildingType:"فيلا سكنية",location:"الرياض، السعودية",floors:2,totalArea:400}),[x,o]=l.useState(!1),[h,t]=l.useState(""),[b,m]=l.useState(null),g=(d,j)=>{a(f=>z(P({},f),{[d]:j}))},c=()=>w(null,null,function*(){o(!0),t(""),m(null);try{const d=s.data.financials.reduce((f,N)=>f+N.total,0),j=yield je(i,d);m(j)}catch(d){t(d.message||"An unexpected error occurred.")}finally{o(!1)}});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 p-3 rounded-full",children:e.jsx(Me,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"المقدر المبدئي للتكاليف والمدة"}),e.jsx("p",{className:"text-sm text-slate-500",children:"أدخل معلومات المشروع الأساسية للحصول على تقدير مبدئي للتكلفة والمدة والموارد."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"نوع المبنى"}),e.jsx("input",{type:"text",value:i.buildingType,onChange:d=>g("buildingType",d.target.value),className:"w-full bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الموقع"}),e.jsx("input",{type:"text",value:i.location,onChange:d=>g("location",d.target.value),className:"w-full bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"عدد الطوابق"}),e.jsx("input",{type:"number",value:i.floors,onChange:d=>g("floors",Number(d.target.value)),className:"w-full bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"المساحة الإجمالية (م²)"}),e.jsx("input",{type:"number",value:i.totalArea,onChange:d=>g("totalArea",Number(d.target.value)),className:"w-full bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"})]})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs("button",{onClick:c,disabled:x,className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400",children:[x?e.jsx(q,{className:"animate-spin"}):e.jsx(L,{}),e.jsx("span",{children:x?"...جاري التقدير":"إنشاء تقدير"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"التقدير المبدئي"}),h&&e.jsx("div",{className:"text-red-500 bg-red-100 p-3 rounded-md",children:h}),x&&!b&&e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{children:"يقوم الذكاء الاصطناعي بإعداد تقديرك..."})}),!x&&!b&&!h&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"ستظهر نتائج التقدير هنا."})}),b&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(J,{icon:Ue,title:"التكلفة التقديرية",value:b.estimatedCost.toLocaleString("ar-SA",{style:"currency",currency:"SAR"}),color:"text-green-500"}),e.jsx(J,{icon:Oe,title:"المدة التقديرية",value:`${b.estimatedDuration} يوم`,color:"text-sky-500"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Xe,{size:18})," الموارد الرئيسية"]}),e.jsx("div",{className:"space-y-2",children:b.majorResources.map(d=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-800 p-2 rounded-md text-sm",children:[e.jsx("span",{children:d.material}),e.jsxs("span",{className:"font-mono font-semibold",children:[d.quantity.toLocaleString()," ",d.unit]})]},d.material))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"تقرير التحقق من المقايسة"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none bg-gray-50 dark:bg-gray-800 p-4 rounded-md",dangerouslySetInnerHTML:{__html:R.parse(b.varianceReport)}})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"الافتراضات"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none bg-gray-50 dark:bg-gray-800 p-4 rounded-md",dangerouslySetInnerHTML:{__html:R.parse(b.assumptions)}})]})]})]})]})},ys=({result:s})=>{const a={Positive:{icon:He,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/50",label:"إيجابي"},Negative:{icon:Ge,color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/50",label:"سلبي"},Neutral:{icon:Qe,color:"text-gray-500",bg:"bg-gray-100 dark:bg-gray-700/50",label:"محايد"}}[s.sentiment],x=a.icon;return e.jsxs("div",{className:`p-6 rounded-lg ${a.bg}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{size:48,className:a.color}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-2xl font-bold ${a.color}`,children:a.label}),e.jsxs("p",{className:"font-mono text-sm text-slate-600 dark:text-slate-300",children:["درجة الثقة: ",Math.round(s.confidence*100),"%"]})]})]}),e.jsxs("div",{className:"mt-4 border-t border-gray-300 dark:border-gray-600 pt-4",children:[e.jsx("h5",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"التبرير:"}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:s.justification})]})]})},fs=()=>{const[s,i]=l.useState("تم تسليم المواد في الوقت المحدد ولكن الجودة كانت أقل من المتوقع. العميل يبدو غير راضٍ عن تقدم العمل في الواجهات."),[a,x]=l.useState(!1),[o,h]=l.useState(""),[t,b]=l.useState(null),m=()=>w(null,null,function*(){if(s.trim()){x(!0),h(""),b(null);try{const g=yield ye(s);b(g)}catch(g){h(g.message||"An unexpected error occurred during sentiment analysis.")}finally{x(!1)}}});return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"تحليل المشاعر في النصوص"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"ألصق أي نص (مثل بريد إلكتروني، تقرير، أو ملاحظات) لفهم المشاعر الكامنة فيه."}),e.jsx("textarea",{value:s,onChange:g=>i(g.target.value),rows:8,className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm",placeholder:"أدخل النص هنا لتحليله..."}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:m,disabled:a||!s.trim(),className:"flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:18}),e.jsx("span",{children:a?"...جاري التحليل":"تحليل النص"})]})})]}),o&&e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"خطأ في التحليل"}),e.jsx("p",{children:o})]}),a&&!t&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"يقوم الذكاء الاصطناعي بتحليل المشاعر في النص..."})}),t&&e.jsx(ys,{result:t})]})},Ns=({project:s})=>{const[i,a]=l.useState(!1),[x,o]=l.useState(""),[h,t]=l.useState(null),b=()=>w(null,null,function*(){a(!0),o(""),t(null);try{const g=yield fe(s.data.financials);t(g)}catch(g){o(g.message||"An unexpected error occurred.")}finally{a(!1)}}),{potentialSavings:m}=l.useMemo(()=>{if(!h)return{potentialSavings:0};const g=s.data.financials.reduce((d,j)=>d+j.total,0),c=s.data.financials.reduce((d,j)=>{const f=h.find(N=>N.itemId===j.id);return f?d+j.quantity*f.dynamicUnitPrice:d+j.total},0);return{potentialSavings:g-c}},[h,s.data.financials]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 p-6 rounded-xl shadow-sm border dark:border-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"محرك التسعير الديناميكي المتقدم"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"يقوم الذكاء الاصطناعي بتحليل المقايسة لاقتراح أسعار تنافسية بناءً على أسعار السوق الحالية، خصومات الكميات، وتقلبات الأسعار."}),e.jsxs("button",{onClick:b,disabled:i||s.data.financials.length===0,className:"flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-indigo-700 disabled:bg-slate-400",children:[i?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(L,{size:18}),e.jsx("span",{children:i?"...جاري التحليل":"تشغيل محرك التسعير"})]}),s.data.financials.length===0&&e.jsx("p",{className:"text-xs text-red-500 mt-2",children:"لا يمكن إجراء التحليل. يرجى رفع مقايسة المشروع أولاً."})]}),x&&e.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:x}),h&&e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 p-6 rounded-xl shadow-sm border dark:border-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"نتائج التحليل"}),e.jsxs("div",{className:`p-4 rounded-lg mb-4 flex items-center gap-4 ${m>=0?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[m>=0?e.jsx(Ve,{className:"w-8 h-8 text-green-500"}):e.jsx(Ke,{className:"w-8 h-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"إجمالي الوفورات المحتملة"}),e.jsx("p",{className:`text-2xl font-bold ${m>=0?"text-green-600":"text-red-600"}`,children:m.toLocaleString("ar-SA",{style:"currency",currency:"SAR"})})]})]}),e.jsx("div",{className:"overflow-x-auto max-h-[60vh]",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"البند"}),e.jsx("th",{className:"p-3",children:"السعر الأصلي"}),e.jsx("th",{className:"p-3",children:"السعر المقترح"}),e.jsx("th",{className:"p-3",children:"التبرير"})]})}),e.jsx("tbody",{children:h.map(g=>{const c=g.dynamicUnitPrice-g.originalUnitPrice,d=c<0?"text-green-500":c>0?"text-red-500":"text-slate-500";return e.jsxs("tr",{className:"border-b dark:border-gray-700 last:border-0",children:[e.jsx("td",{className:"p-3 font-medium",children:g.itemName}),e.jsx("td",{className:"p-3 font-mono",children:g.originalUnitPrice.toLocaleString("ar-SA")}),e.jsx("td",{className:`p-3 font-mono font-bold ${d}`,children:g.dynamicUnitPrice.toLocaleString("ar-SA")}),e.jsx("td",{className:"p-3 text-slate-600 dark:text-slate-400",children:g.justification})]},g.itemId)})})]})})]})]})},vs=()=>{const[s,i]=l.useState({concreteGrade:"C35",ambientTemp:25,requiredStrength:75}),[a,x]=l.useState(!1),[o,h]=l.useState(""),[t,b]=l.useState(null),m=(d,j)=>{i(f=>z(P({},f),{[d]:j}))},g=()=>w(null,null,function*(){x(!0),h(""),b(null);try{const d=yield Ne(s);b(d)}catch(d){h(d.message||"An unexpected error occurred.")}finally{x(!1)}}),c=({icon:d,title:j,value:f,color:N})=>e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg flex items-center gap-4",children:[e.jsx(d,{className:`w-8 h-8 ${N}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:j}),e.jsx("p",{className:"text-2xl font-bold",children:f})]})]});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-cyan-100 dark:bg-cyan-900/50 p-3 rounded-full",children:e.jsx(We,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"تحليل المعالجة وفك الشدات"}),e.jsx("p",{className:"text-sm text-slate-500",children:"احسب المدة الزمنية اللازمة لمعالجة الخرسانة بناءً على الظروف لضمان السلامة الإنشائية."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"إجهاد الخرسانة (f'c)"}),e.jsx("input",{type:"text",value:s.concreteGrade,onChange:d=>m("concreteGrade",d.target.value),placeholder:"e.g., C35",className:"w-full bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"درجة الحرارة المحيطة (°C)"}),e.jsx("input",{type:"number",value:s.ambientTemp,onChange:d=>m("ambientTemp",Number(d.target.value)),className:"w-full bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"القوة المطلوبة للفك (%)"}),e.jsx("input",{type:"number",value:s.requiredStrength,onChange:d=>m("requiredStrength",Number(d.target.value)),min:"0",max:"100",className:"w-full bg-gray-50 dark:bg-gray-800 p-2 rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs("button",{onClick:g,disabled:a,className:"w-full flex items-center justify-center gap-2 bg-cyan-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-cyan-700 disabled:bg-slate-400",children:[a?e.jsx(q,{className:"animate-spin"}):e.jsx(L,{}),e.jsx("span",{children:a?"جاري التحليل...":"تحليل"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"النتائج الهندسية"}),o&&e.jsx("div",{className:"text-red-500 bg-red-100 p-3 rounded-md",children:o}),a&&!t&&e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{children:"جاري إجراء الحسابات الهندسية..."})}),!a&&!t&&!o&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"ستظهر نتائج التحليل هنا."})}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{icon:Je,title:"أقل مدة معالجة",value:`${t.curingDays} أيام`,color:"text-cyan-500"}),e.jsx(c,{icon:t.earlyStrippingPossible?Ye:Z,title:"إمكانية الفك المبكر",value:t.earlyStrippingPossible?"ممكن":"غير موصى به",color:t.earlyStrippingPossible?"text-green-500":"text-red-500"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"التوصيات الهندسية"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none bg-gray-50 dark:bg-gray-800 p-4 rounded-md",dangerouslySetInnerHTML:{__html:R.parse(t.recommendations)}})]})]})]})]})},ks=["Saudi Building Code (SBC)","ACI","ASTM","ISO 9001"],ws=({project:s})=>{const i=s.data.financials||[],[a,x]=l.useState([]),[o,h]=l.useState(["Saudi Building Code (SBC)","ACI"]),[t,b]=l.useState(!1),[m,g]=l.useState(""),[c,d]=l.useState(null),j=u=>{x(r=>r.includes(u)?r.filter(n=>n!==u):[...r,u])},f=u=>{h(r=>r.includes(u)?r.filter(n=>n!==u):[...r,u])},N=()=>w(null,null,function*(){if(a.length===0){g("الرجاء تحديد بند واحد على الأقل.");return}b(!0),g(""),d(null);try{const r=yield ve(s,{itemIds:a,standards:o});d(r)}catch(u){g(u.message||"An unexpected error occurred.")}finally{b(!1)}});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-900/50 p-6 rounded-xl shadow-sm border dark:border-gray-800 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"1. حدد بنود العمل"}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-md",children:i.map(u=>e.jsxs("label",{className:"flex items-center gap-2 p-1 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.includes(u.id),onChange:()=>j(u.id)}),e.jsx("span",{children:u.item})]},u.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"2. حدد المعايير المرجعية"}),e.jsx("div",{className:"space-y-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-md",children:ks.map(u=>e.jsxs("label",{className:"flex items-center gap-2 p-1 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.includes(u),onChange:()=>f(u)}),e.jsx("span",{children:u})]},u))})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("button",{onClick:N,disabled:t||a.length===0,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 disabled:bg-slate-400",children:[t?e.jsx(q,{className:"animate-spin"}):e.jsx(L,{}),e.jsx("span",{children:t?"جاري إنشاء الخطة...":"إنشاء خطة الجودة (ITP)"})]})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-900/50 p-6 rounded-xl shadow-sm border dark:border-gray-800",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ze,{})," خطة الفحص والاختبار (ITP)"]}),m&&e.jsx("div",{className:"text-red-500 bg-red-100 p-3 rounded-md",children:m}),t&&!c&&e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{children:"يقوم مهندس الجودة (AI) بإعداد الخطة..."})}),!t&&!c&&!m&&e.jsx("div",{className:"text-center p-8 text-slate-500",children:e.jsx("p",{children:"ستظهر خطة الفحص والاختبار هنا."})}),c&&e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:R.parse(c.itpReport)}})]})]})},Ss=[{id:"reconciliation",label:"مطابقة المقايسات"},{id:"valueEngineering",label:"هندسة القيمة"},{id:"drawingAnalysis",label:"تحليل المخططات"},{id:"saudiCode",label:"استشارات الكود السعودي"},{id:"comparative",label:"تحليل مقارن"},{id:"qualityPlan",label:"خطة الجودة (AI)"},{id:"image",label:"تحليل الصور"},{id:"scribd",label:"محلل Scribd"},{id:"complexQuery",label:"استعلام معقد"},{id:"imageGen",label:"إنشاء الصور"},{id:"videoGen",label:"إنشاء الفيديو"},{id:"location",label:"استعلام جغرافي"},{id:"engCalcs",label:"حسابات هندسية"},{id:"curingAnalysis",label:"تحليل المعالجة"},{id:"conceptualEst",label:"تقدير مبدئي"},{id:"sentiment",label:"تحليل المشاعر"},{id:"dynamicPricing",label:"التسعير الديناميكي"}],Es=({project:s,onUpdateBoqReconciliation:i,onUpdateComparativeAnalysis:a,onUpdateFinancials:x})=>{const[o,h]=l.useState("reconciliation"),t=()=>{switch(o){case"reconciliation":return e.jsx(es,{project:s,onUpdateBoqReconciliation:i});case"valueEngineering":return e.jsx(rs,{project:s});case"drawingAnalysis":return e.jsx(ts,{project:s,onUpdateFinancials:x});case"saudiCode":return e.jsx(ls,{project:s});case"comparative":return e.jsx(ss,{project:s,onUpdateComparativeAnalysis:a});case"image":return e.jsx(ns,{});case"scribd":return e.jsx(ds,{});case"complexQuery":return e.jsx(is,{});case"imageGen":return e.jsx(cs,{});case"videoGen":return e.jsx(bs,{});case"location":return e.jsx(us,{});case"engCalcs":return e.jsx(ps,{});case"curingAnalysis":return e.jsx(vs,{});case"conceptualEst":return e.jsx(js,{project:s});case"sentiment":return e.jsx(fs,{});case"dynamicPricing":return e.jsx(Ns,{project:s});case"qualityPlan":return e.jsx(ws,{project:s});default:return null}};return e.jsxs("div",{children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"مركز التحليل بالذكاء الاصطناعي"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"أدوات متقدمة لتحليل بيانات المشروع واتخاذ قرارات ذكية."})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-4 rtl:space-x-reverse overflow-x-auto","aria-label":"Tabs",children:Ss.map(b=>e.jsx("button",{onClick:()=>h(b.id),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${o===b.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300"}`,children:b.label},b.id))})}),e.jsx("div",{children:t()})]})};export{Es as AnalysisCenter};
