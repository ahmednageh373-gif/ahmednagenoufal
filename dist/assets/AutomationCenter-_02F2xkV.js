var L=Object.defineProperty,F=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var w=(r,n,a)=>n in r?L(r,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[n]=a,E=(r,n)=>{for(var a in n||(n={}))V.call(n,a)&&w(r,a,n[a]);if(v)for(var a of v(n))q.call(n,a)&&w(r,a,n[a]);return r},T=(r,n)=>F(r,G(n));var x=(r,n,a)=>new Promise((j,l)=>{var c=o=>{try{p(a.next(o))}catch(b){l(b)}},h=o=>{try{p(a.throw(o))}catch(b){l(b)}},p=o=>o.done?j(o.value):Promise.resolve(o.value).then(c,h);p((a=a.apply(r,n)).next())});import{r as d,j as e,e as _}from"./react-vendor-D4cZjflF.js";import{u as S,a2 as H,aB as J,Z as N,aC as Q,aD as C,ah as A,P as y,a9 as Z,aE as K,az as f,aF as I,aG as Y,l as W,aH as X,as as ee,aI as se}from"./icons-lib-mPL1tuN6.js";import"./vendor-DhnXlGBj.js";const ce=()=>{const[r,n]=d.useState([]),[a,j]=d.useState({}),[l,c]=d.useState("templates"),[h,p]=d.useState("all"),[o,b]=d.useState(""),[m,M]=d.useState(null),[te,ae]=d.useState(!1),g="https://5000-i8ngr18dc7uqtnynq0d23-b9b802c4.sandbox.novita.ai";d.useEffect(()=>{u(),$(),D()},[]);const u=()=>x(null,null,function*(){try{const t=yield(yield fetch(`${g}/api/automations`)).json();t.success&&n(t.automations)}catch(s){console.error("Error loading automations:",s)}}),$=()=>x(null,null,function*(){try{const t=yield(yield fetch(`${g}/api/automation-templates`)).json();t.success&&j(t.templates)}catch(s){console.error("Error loading templates:",s)}}),D=()=>x(null,null,function*(){try{const t=yield(yield fetch(`${g}/api/automations/stats`)).json();t.success&&M(t.stats)}catch(s){console.error("Error loading stats:",s)}}),k=(s,t)=>x(null,null,function*(){try{(yield(yield fetch(`${g}/api/automations/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!t})})).json()).success&&u()}catch(i){console.error("Error toggling automation:",i)}}),z=s=>x(null,null,function*(){if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø£ØªÙ…ØªØ©ØŸ"))try{(yield(yield fetch(`${g}/api/automations/${s}`,{method:"DELETE"})).json()).success&&u()}catch(t){console.error("Error deleting automation:",t)}}),O=s=>x(null,null,function*(){try{const t=T(E({name:s.name,description:s.description},s.template),{created_by:"current_user@example.com"});(yield(yield fetch(`${g}/api/automations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success&&(alert("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ØªÙ…ØªØ© Ø¨Ù†Ø¬Ø§Ø­!"),c("my-automations"),u())}catch(t){console.error("Error creating automation:",t),alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ØªÙ…ØªØ©")}}),R=s=>({DATE_ARRIVES:Y,STATUS_CHANGES:I,ITEM_CREATED:y,ITEM_DELETED:A,ATTRIBUTE_VALUE_CHANGES:f,FORM_SUBMITTED:K,BUTTON_CLICKED:C,EVERY_TIME_PERIOD:Z})[s]||N,P=s=>({SEND_NOTIFICATION:se,SEND_EMAIL:ee,CREATE_ITEM:y,UPDATE_ITEM:f,MOVE_ITEM:X,ASSIGN_MEMBERS:W,CHANGE_STATUS:I,LEAVE_COMMENT:f})[s]||N,U=[{id:"all",name:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨",icon:"ğŸ“‹"},{id:"reminders",name:"Ø§Ù„ØªØ°ÙƒÙŠØ±Ø§Øª",icon:"â°"},{id:"recurring",name:"Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©",icon:"ğŸ”„"},{id:"ifttt",name:"Ø¥Ø°Ø§-Ø«Ù…",icon:"âš¡"},{id:"forms",name:"Ø§Ù„Ù†Ù…Ø§Ø°Ø¬",icon:"ğŸ“"},{id:"notifications",name:"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",icon:"ğŸ””"},{id:"engineering",name:"Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ©",icon:"ğŸ—ï¸"}];return e.jsxs("div",{className:"h-full bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"âš¡ Ù…Ø±ÙƒØ² Ø§Ù„Ø£ØªÙ…ØªØ©"}),e.jsx("p",{className:"text-gray-600",children:"Ø£ØªÙ…Øª Ù…Ù‡Ø§Ù…Ùƒ ÙˆÙˆÙØ± Ø§Ù„ÙˆÙ‚Øª Ù…Ø¹ Ù‚ÙˆØ§Ù„Ø¨ Ø¬Ø§Ù‡Ø²Ø© ÙˆØ³Ù‡Ù„Ø©"})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°Ø§Øª"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.total_executions||0})]}),e.jsx(S,{className:"text-blue-500",size:32})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ù†Ø¬Ø­Øª"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.successful||0})]}),e.jsx(H,{className:"text-green-500",size:32})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÙØ´Ù„Øª"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.failed||0})]}),e.jsx(J,{className:"text-red-500",size:32})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„ÙˆÙ‚Øª"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:m.avg_execution_time?`${m.avg_execution_time.toFixed(0)}ms`:"0ms"})]}),e.jsx(S,{className:"text-purple-500",size:32})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsxs("div",{className:"flex border-b",children:[e.jsx("button",{onClick:()=>c("templates"),className:`flex-1 px-6 py-3 font-semibold transition ${l==="templates"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"}`,children:"ğŸ“š Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø£ØªÙ…ØªØ©"}),e.jsxs("button",{onClick:()=>c("my-automations"),className:`flex-1 px-6 py-3 font-semibold transition ${l==="my-automations"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"}`,children:["âš™ï¸ Ø£ØªÙ…ØªØ§ØªÙŠ (",r.length,")"]}),e.jsx("button",{onClick:()=>c("create"),className:`flex-1 px-6 py-3 font-semibold transition ${l==="create"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"}`,children:"â• Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙŠØ¯"})]})}),l==="templates"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(s=>e.jsxs("button",{onClick:()=>p(s.id),className:`px-4 py-2 rounded-lg font-semibold transition ${h===s.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.icon," ",s.name]},s.id))})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(a).map(([s,t])=>h!=="all"&&h!==s?null:t.map(i=>e.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"text-4xl",children:i.icon}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:i.category})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-2",children:i.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:i.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 rounded",children:[_.createElement(R(i.template.trigger.type),{size:14}),e.jsx("span",{children:"Trigger"})]}),e.jsx("span",{className:"text-gray-400",children:"â†’"}),i.template.conditions&&i.template.conditions.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded",children:"If"}),e.jsx("span",{className:"text-gray-400",children:"â†’"})]}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded",children:[_.createElement(P(i.template.actions[0].type),{size:14}),e.jsx("span",{children:"Action"})]})]}),e.jsx("button",{onClick:()=>O(i),className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition",children:"+ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø§Ù„Ø¨"})]},i.id)))})]}),l==="my-automations"&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(N,{className:"mx-auto text-gray-400 mb-4",size:64}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØªÙ…ØªØ© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø£ØªÙ…ØªØ© Ù…Ù† Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©"}),e.jsx("button",{onClick:()=>c("templates"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition",children:"Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨"})]}):r.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:s.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"âœ… Ù†Ø´Ø·":"â¸ï¸ Ù…ØªÙˆÙ‚Ù"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["ğŸ”„ Ù†ÙÙØ°Øª ",s.execution_count," Ù…Ø±Ø©"]}),s.last_executed&&e.jsxs("span",{children:["ğŸ• Ø¢Ø®Ø± ØªÙ†ÙÙŠØ°: ",new Date(s.last_executed).toLocaleString("ar")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(s.id,s.is_active),className:`p-2 rounded-lg transition ${s.is_active?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,title:s.is_active?"Ø¥ÙŠÙ‚Ø§Ù":"ØªØ´ØºÙŠÙ„",children:s.is_active?e.jsx(Q,{size:20}):e.jsx(C,{size:20})}),e.jsx("button",{onClick:()=>z(s.id),className:"p-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 transition",title:"Ø­Ø°Ù",children:e.jsx(A,{size:20})})]})]})},s.id))}),l==="create"&&e.jsx("div",{className:"bg-white rounded-lg shadow p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:"mx-auto text-gray-400 mb-4",size:64}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Ø¥Ù†Ø´Ø§Ø¡ Ø£ØªÙ…ØªØ© Ù…Ø®ØµØµØ©"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ù‚Ø±ÙŠØ¨Ø§Ù‹! Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ù‡Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ØªÙ…ØªØ© Ø§Ù„Ù…Ø®ØµØµØ© Ù…Ø¹ drag-and-drop builder"}),e.jsx("button",{onClick:()=>c("templates"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition",children:"ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©"})]})})]})};export{ce as AutomationCenter};
