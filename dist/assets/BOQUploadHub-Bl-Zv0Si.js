var oe=Object.defineProperty,le=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var J=(t,a,r)=>a in t?oe(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,L=(t,a)=>{for(var r in a||(a={}))de.call(a,r)&&J(t,r,a[r]);if(G)for(var r of G(a))me.call(a,r)&&J(t,r,a[r]);return t},K=(t,a)=>le(t,ce(a));var M=(t,a,r)=>new Promise((s,l)=>{var c=o=>{try{n(r.next(o))}catch(i){l(i)}},d=o=>{try{n(r.throw(o))}catch(i){l(i)}},n=o=>o.done?s(o.value):Promise.resolve(o.value).then(c,d);n((r=r.apply(t,a)).next())});import{r as z,j as e}from"./react-vendor-ITqvX6Xp.js";import{r as ge,u as ue}from"./vendor-large-gsDFeA65.js";import{a7 as X,U as Z,R as ee,a1 as te,b8 as pe,as as he,a6 as xe,aV as fe}from"./icons-lib-Bt_-gcnY.js";import"./vendor-8CkhJSGZ.js";const re={Ø­ÙØ±:{rate:50,unit:"Ù…3/ÙŠÙˆÙ…"},Ø±Ø¯Ù…:{rate:100,unit:"Ù…3/ÙŠÙˆÙ…"},"Ø®Ø±Ø³Ø§Ù†Ø© Ø¹Ø§Ø¯ÙŠØ©":{rate:30,unit:"Ù…3/ÙŠÙˆÙ…"},"Ø®Ø±Ø³Ø§Ù†Ø© Ù…Ø³Ù„Ø­Ø©":{rate:20,unit:"Ù…3/ÙŠÙˆÙ…"},"Ø­Ø¯ÙŠØ¯ ØªØ³Ù„ÙŠØ­":{rate:2,unit:"Ø·Ù†/ÙŠÙˆÙ…"},"Ù…Ø¨Ø§Ù†ÙŠ Ø·ÙˆØ¨":{rate:15,unit:"Ù…2/ÙŠÙˆÙ…"},"Ù…Ø¨Ø§Ù†ÙŠ Ø¨Ù„ÙˆÙƒ":{rate:20,unit:"Ù…2/ÙŠÙˆÙ…"},Ù„ÙŠØ§Ø³Ø©:{rate:40,unit:"Ù…2/ÙŠÙˆÙ…"},"Ø¨Ù„Ø§Ø· Ø£Ø±Ø¶ÙŠØ§Øª":{rate:30,unit:"Ù…2/ÙŠÙˆÙ…"},"Ø¨Ù„Ø§Ø· Ø¬Ø¯Ø±Ø§Ù†":{rate:25,unit:"Ù…2/ÙŠÙˆÙ…"},Ø¯Ù‡Ø§Ù†Ø§Øª:{rate:50,unit:"Ù…2/ÙŠÙˆÙ…"},Ø¬Ø¨Ø³:{rate:35,unit:"Ù…2/ÙŠÙˆÙ…"},"Ø£Ø³Ù‚Ù Ù…Ø¹Ù„Ù‚Ø©":{rate:25,unit:"Ù…2/ÙŠÙˆÙ…"},"Ø£Ø¨ÙˆØ§Ø¨ Ø®Ø´Ø¨ÙŠØ©":{rate:2,unit:"Ø¨Ø§Ø¨/ÙŠÙˆÙ…"},"Ù†ÙˆØ§ÙØ° Ø£Ù„Ù…Ù†ÙŠÙˆÙ…":{rate:3,unit:"Ù†Ø§ÙØ°Ø©/ÙŠÙˆÙ…"},"Ù†Ù‚Ø§Ø· ÙƒÙ‡Ø±Ø¨Ø§Ø¡":{rate:20,unit:"Ù†Ù‚Ø·Ø©/ÙŠÙˆÙ…"},"Ù†Ù‚Ø§Ø· ØµØ­ÙŠØ©":{rate:10,unit:"Ù†Ù‚Ø·Ø©/ÙŠÙˆÙ…"},ØªÙƒÙŠÙŠÙ:{rate:2,unit:"ÙˆØ­Ø¯Ø©/ÙŠÙˆÙ…"},default:{rate:10,unit:"ÙˆØ­Ø¯Ø©/ÙŠÙˆÙ…"}},ye={phase1_excavation:["Ø­ÙØ±","Ø±Ø¯Ù…","ØªØ³ÙˆÙŠØ©","Ø¯Ùƒ","Ù†Ù‚Ù„ ØªØ±Ø§Ø¨"],phase2_foundation:["Ø®Ø±Ø³Ø§Ù†Ø© Ø¹Ø§Ø¯ÙŠØ©","Ø®Ø±Ø³Ø§Ù†Ø© Ù†Ø¸Ø§ÙØ©","Ù‚ÙˆØ§Ø¹Ø¯","Ø£Ø³Ø§Ø³Ø§Øª","Ù…ÙŠØ¯Ø§Øª"],phase3_structure:["Ø®Ø±Ø³Ø§Ù†Ø© Ù…Ø³Ù„Ø­Ø©","Ø­Ø¯ÙŠØ¯ ØªØ³Ù„ÙŠØ­","Ø£Ø¹Ù…Ø¯Ø©","ÙƒÙ…Ø±Ø§Øª","Ø¨Ù„Ø§Ø·Ø§Øª","Ø³Ù‚Ù"],phase4_walls:["Ù…Ø¨Ø§Ù†ÙŠ","Ø·ÙˆØ¨","Ø¨Ù„ÙˆÙƒ","Ø¬Ø¯Ø±Ø§Ù†"],phase5_mep_rough:["ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø®Ø´Ù†","ØµØ­ÙŠ Ø®Ø´Ù†","ØªÙƒÙŠÙŠÙ Ø®Ø´Ù†","Ù…ÙˆØ§Ø³ÙŠØ±","ØªÙ…Ø¯ÙŠØ¯Ø§Øª"],phase6_plastering:["Ù„ÙŠØ§Ø³Ø©","Ù…Ø­Ø§Ø±Ø©","Ø¨ÙŠØ§Ø¶"],phase7_flooring:["Ø¨Ù„Ø§Ø·","Ø±Ø®Ø§Ù…","Ø³ÙŠØ±Ø§Ù…ÙŠÙƒ","Ø£Ø±Ø¶ÙŠØ§Øª","Ø¨ÙˆØ±Ø³Ù„ÙŠÙ†"],phase8_finishes:["Ø¯Ù‡Ø§Ù†Ø§Øª","Ø¬Ø¨Ø³","Ø£Ø³Ù‚Ù Ù…Ø¹Ù„Ù‚Ø©","Ø¯ÙŠÙƒÙˆØ±"],phase9_doors_windows:["Ø£Ø¨ÙˆØ§Ø¨","Ù†ÙˆØ§ÙØ°","Ø´Ø¨Ø§Ø¨ÙŠÙƒ","Ø²Ø¬Ø§Ø¬"],phase10_mep_final:["ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ù†Ù‡Ø§Ø¦ÙŠ","ØµØ­ÙŠ Ù†Ù‡Ø§Ø¦ÙŠ","ØªÙƒÙŠÙŠÙ Ù†Ù‡Ø§Ø¦ÙŠ","Ø¥Ø¶Ø§Ø¡Ø©","Ù…ÙØ§ØªÙŠØ­"],phase11_exterior:["ÙˆØ§Ø¬Ù‡Ø§Øª","Ø¯Ù‡Ø§Ù† Ø®Ø§Ø±Ø¬ÙŠ","Ø­Ø¬Ø±","ÙƒÙ„Ø§Ø¯ÙŠÙ†Ø¬"],phase12_site_works:["Ø£Ø¹Ù…Ø§Ù„ Ø®Ø§Ø±Ø¬ÙŠØ©","Ù…ÙˆØ§Ù‚Ù","Ø­Ø¯Ø§Ø¦Ù‚","Ø±ØµÙ","Ø³ÙˆØ±"]},be={phase2_foundation:["phase1_excavation"],phase3_structure:["phase2_foundation"],phase4_walls:["phase3_structure"],phase5_mep_rough:["phase4_walls"],phase6_plastering:["phase5_mep_rough"],phase7_flooring:["phase6_plastering"],phase8_finishes:["phase7_flooring"],phase9_doors_windows:["phase6_plastering"],phase10_mep_final:["phase8_finishes","phase9_doors_windows"],phase11_exterior:["phase3_structure"],phase12_site_works:["phase11_exterior"]};function je(t){const a=t.toLowerCase();for(const[r,s]of Object.entries(ye))if(s.some(l=>a.includes(l)))return r;return"phase8_finishes"}function we(t,a,r=8){const s=a.toLowerCase();let l=re.default.rate;for(const[d,n]of Object.entries(re))if(s.includes(d)){l=n.rate;break}const c=Math.ceil(t/l);return Math.min(Math.max(c,1),60)}function Ne(t,a,r=6){const s=new Date(t);let l=0,c=new Date(s);for(;l<a;){c.setDate(c.getDate()+1);const d=c.getDay();(r===6&&d!==5||r===5&&d!==5&&d!==6||r===7)&&l++}return{start:s,end:c}}function ke(t){const a=new Map;return t.forEach(r=>{const s=je(r.description);a.has(s)||a.set(s,[]),a.get(s).push(r)}),a}function ve(t,a,r,s){const l=we(t.quantity,t.description,s.workingHoursPerDay),c=Ne(r,l,s.workingDaysPerWeek);return{id:`task-${t.id}`,name:t.description,startDate:c.start.toISOString().split("T")[0],endDate:c.end.toISOString().split("T")[0],duration:l,progress:0,status:"planned",assignee:"",priority:"medium",dependencies:[],phase:a,quantity:t.quantity,unit:t.unit,cost:t.totalPrice}}function Se(t){new Map(t.map(n=>[n.id,n]));const a=[],r=new Map,s=new Map;t.forEach(n=>{const o=n.dependencies||[];if(o.length===0)r.set(n.id,0),s.set(n.id,n.duration);else{const i=Math.max(...o.map(u=>s.get(u)||0));r.set(n.id,i),s.set(n.id,i+n.duration)}});const l=Math.max(...Array.from(s.values())),c=new Map,d=new Map;return t.forEach(n=>{t.filter(i=>(i.dependencies||[]).includes(n.id)).length===0&&(c.set(n.id,l),d.set(n.id,l-n.duration))}),t.reverse().forEach(n=>{if(!c.has(n.id)){const o=t.filter(u=>(u.dependencies||[]).includes(n.id)),i=Math.min(...o.map(u=>d.get(u.id)||l));c.set(n.id,i),d.set(n.id,i-n.duration)}}),t.forEach(n=>{(d.get(n.id)||0)-(r.get(n.id)||0)===0&&a.push(n.id)}),a}function De(t,a){return M(this,null,function*(){try{console.log("ðŸš€ Ø¨Ø¯Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù…Ù† Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø©..."),console.log(`ðŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ù†ÙˆØ¯: ${t.length}`);const r=t.map(i=>({id:i.id,description:i.description,quantity:i.quantity||0,unit:i.unit||"ÙˆØ­Ø¯Ø©",unitPrice:i.unitPrice||0,totalPrice:i.total||0,category:i.category})),s=ke(r);console.log(`ðŸ“¦ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Ø­Ù„: ${s.size}`);const l=[],c=new Map;let d=new Date(a.projectStartDate);const n=Array.from(s.keys()).sort();for(const i of n){const u=s.get(i),p=[];for(const f of u){const k=ve(f,i,d,a);p.push(k)}if(p.length>0){const f=new Date(Math.max(...p.map(k=>new Date(k.endDate).getTime())));d=new Date(f),d.setDate(d.getDate()+1)}c.set(i,p.map(f=>f.id)),l.push(...p)}l.forEach(i=>{const u=i.phase;(be[u]||[]).forEach(f=>{const k=c.get(f)||[];if(k.length>0){const Q=k[k.length-1];i.dependencies||(i.dependencies=[]),i.dependencies.includes(Q)||i.dependencies.push(Q)}})});const o=Se(l);return l.forEach(i=>{o.includes(i.id)&&(i.isCritical=!0,i.priority="high")}),console.log(`âœ… ØªÙ… ØªÙˆÙ„ÙŠØ¯ ${l.length} Ù†Ø´Ø§Ø·`),console.log(`ðŸ”´ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø­Ø±Ø¬ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ${o.length} Ù†Ø´Ø§Ø·`),l}catch(r){throw console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ:",r),r}})}function Te(t){const a=t.filter(n=>n.isCritical),r=new Date(Math.min(...t.map(n=>new Date(n.startDate).getTime()))),s=new Date(Math.max(...t.map(n=>new Date(n.endDate).getTime()))),l=Math.ceil((s.getTime()-r.getTime())/(1e3*60*60*24)),c=new Map;t.forEach(n=>{const o=n.phase||"other";c.has(o)||c.set(o,[]),c.get(o).push(n)});const d=Array.from(c.entries()).map(([n,o])=>{const i=new Date(Math.min(...o.map(f=>new Date(f.startDate).getTime()))),u=new Date(Math.max(...o.map(f=>new Date(f.endDate).getTime()))),p=Math.ceil((u.getTime()-i.getTime())/(1e3*60*60*24));return{name:n.replace("phase","Ø§Ù„Ù…Ø±Ø­Ù„Ø© ").replace("_"," "),duration:p,tasks:o.length}});return{totalDuration:l,criticalPathDuration:l,numberOfActivities:t.length,numberOfCriticalActivities:a.length,estimatedCompletionDate:s.toISOString().split("T")[0],phases:d}}const _e=[{id:"concrete",nameAr:"Ø®Ø±Ø³Ø§Ù†Ø© Ø¬Ø§Ù‡Ø²Ø©",nameEn:"Ready Mix Concrete",keywords:["Ø®Ø±Ø³Ø§Ù†Ø©","concrete","Ø¨Ù„Ø§Ø·Ø§Øª","Ø£Ø¹Ù…Ø¯Ø©","ÙƒÙ…Ø±Ø§Øª"],leadTime:1,minOrderQuantity:5,preferredSuppliers:["Ø´Ø±ÙƒØ© Ø§Ù„Ø®Ø±Ø³Ø§Ù†Ø© Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©","Ù…ØµØ§Ù†Ø¹ Ø§Ù„Ø¨Ø§Ø·ÙˆÙ†"]},{id:"steel",nameAr:"Ø­Ø¯ÙŠØ¯ Ø§Ù„ØªØ³Ù„ÙŠØ­",nameEn:"Reinforcement Steel",keywords:["Ø­Ø¯ÙŠØ¯","steel","ØªØ³Ù„ÙŠØ­","Ø±ebar"],leadTime:3,minOrderQuantity:1,preferredSuppliers:["Ø­Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ","Ù…ØµÙ†Ø¹ Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨"]},{id:"cement",nameAr:"Ø£Ø³Ù…Ù†Øª",nameEn:"Cement",keywords:["Ø£Ø³Ù…Ù†Øª","cement","Ø¥Ø³Ù…Ù†Øª"],leadTime:2,preferredSuppliers:["Ø£Ø³Ù…Ù†Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©","Ø£Ø³Ù…Ù†Øª Ø§Ù„ÙŠÙ…Ø§Ù…Ø©"]},{id:"blocks",nameAr:"Ø·ÙˆØ¨ ÙˆØ¨Ù„ÙˆÙƒ",nameEn:"Blocks & Bricks",keywords:["Ø·ÙˆØ¨","Ø¨Ù„ÙˆÙƒ","blocks","bricks","Ù…Ø¨Ø§Ù†ÙŠ"],leadTime:3,preferredSuppliers:["Ù…ØµÙ†Ø¹ Ø§Ù„Ø¨Ù„ÙˆÙƒ Ø§Ù„Ø£Ø­Ù…Ø±","Ù…ØµØ§Ù†Ø¹ Ø§Ù„Ø·ÙˆØ¨"]},{id:"tiles",nameAr:"Ø¨Ù„Ø§Ø· ÙˆØ³ÙŠØ±Ø§Ù…ÙŠÙƒ",nameEn:"Tiles & Ceramics",keywords:["Ø¨Ù„Ø§Ø·","Ø³ÙŠØ±Ø§Ù…ÙŠÙƒ","Ø±Ø®Ø§Ù…","tiles","ceramic","marble","Ø¨ÙˆØ±Ø³Ù„ÙŠÙ†"],leadTime:5,preferredSuppliers:["Ø³ÙŠØ±Ø§Ù…ÙŠÙƒØ§ Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©","Ø³ÙŠØ±Ø§Ù…ÙŠÙƒØ§ ÙƒÙ„ÙŠÙˆØ¨Ø§ØªØ±Ø§"]},{id:"paint",nameAr:"Ø¯Ù‡Ø§Ù†Ø§Øª",nameEn:"Paints",keywords:["Ø¯Ù‡Ø§Ù†","Ø¯Ù‡Ø§Ù†Ø§Øª","paint","coating"],leadTime:2,preferredSuppliers:["Ø¬ÙˆØªÙ†","Ø¯Ù‡Ø§Ù†Ø§Øª Ø§Ù„Ø¬Ø²ÙŠØ±Ø©"]},{id:"doors_windows",nameAr:"Ø£Ø¨ÙˆØ§Ø¨ ÙˆÙ†ÙˆØ§ÙØ°",nameEn:"Doors & Windows",keywords:["Ø£Ø¨ÙˆØ§Ø¨","Ù†ÙˆØ§ÙØ°","doors","windows","Ø£Ù„Ù…Ù†ÙŠÙˆÙ…","Ø²Ø¬Ø§Ø¬"],leadTime:7,preferredSuppliers:["Ù…ØµØ§Ù†Ø¹ Ø§Ù„Ø£Ù„Ù…Ù†ÙŠÙˆÙ…","Ø´Ø±ÙƒØ© Ø§Ù„Ø²Ø¬Ø§Ø¬"]},{id:"electrical",nameAr:"Ù…ÙˆØ§Ø¯ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©",nameEn:"Electrical Materials",keywords:["ÙƒÙ‡Ø±Ø¨Ø§Ø¡","electrical","ÙƒØ§Ø¨Ù„Ø§Øª","Ø£Ø³Ù„Ø§Ùƒ","Ù…ÙØ§ØªÙŠØ­"],leadTime:4,preferredSuppliers:["Ø´Ù†Ø§ÙŠØ¯Ø±","Ø³ÙŠÙ…Ù†Ø³"]},{id:"plumbing",nameAr:"Ù…ÙˆØ§Ø¯ ØµØ­ÙŠØ©",nameEn:"Plumbing Materials",keywords:["ØµØ­ÙŠ","plumbing","Ù…ÙˆØ§Ø³ÙŠØ±","Ø®Ù„Ø§Ø·Ø§Øª","Ø£Ø¯ÙˆØ§Øª ØµØ­ÙŠØ©"],leadTime:5,preferredSuppliers:["Ø£Ù…Ø±ÙŠÙƒØ§Ù† Ø³ØªØ§Ù†Ø¯Ø±Ø¯","Ù…ØµØ§Ù†Ø¹ Ø§Ù„Ù…ÙˆØ§Ø³ÙŠØ±"]},{id:"hvac",nameAr:"ØªÙƒÙŠÙŠÙ ÙˆØªÙ‡ÙˆÙŠØ©",nameEn:"HVAC",keywords:["ØªÙƒÙŠÙŠÙ","hvac","ØªÙ‡ÙˆÙŠØ©","Ù…ÙƒÙŠÙØ§Øª"],leadTime:10,preferredSuppliers:["ÙƒØ§Ø±ÙŠÙŠØ±","Ø¬Ù†Ø±Ø§Ù„ Ø¥Ù„ÙƒØªØ±ÙŠÙƒ"]}];function Ce(t){const a=t.toLowerCase();for(const r of _e)if(r.keywords.some(s=>a.includes(s)))return r;return{id:"other",nameAr:"Ù…ÙˆØ§Ø¯ Ø£Ø®Ø±Ù‰",nameEn:"Other Materials",keywords:[],leadTime:5}}function Ee(t,a,r=30){const s=new Date(t);return s.setDate(s.getDate()+r-a),s}function Ae(t,a){const r=new Date(t);return r.setDate(r.getDate()-a-2),r}function Me(t,a,r,s){var n;const l=Ee(r,a.leadTime),c=Ae(l,a.leadTime);let d="medium";return a.leadTime>7?d="high":a.leadTime<3&&(d="low"),{id:`po-${Date.now()}-${s}`,poNumber:`PO-${new Date().getFullYear()}-${String(s+1).padStart(4,"0")}`,date:c.toISOString().split("T")[0],supplier:((n=a.preferredSuppliers)==null?void 0:n[0])||"Ù…ÙˆØ±Ø¯ Ù…Ù‚ØªØ±Ø­",items:[{description:t.description,quantity:t.quantity||0,unit:t.unit||"ÙˆØ­Ø¯Ø©",unitPrice:t.unitPrice||0,total:t.total||0}],subtotal:t.total||0,tax:(t.total||0)*.15,total:(t.total||0)*1.15,status:"draft",notes:`ØªØµÙ†ÙŠÙ: ${a.nameAr}
Ù…Ø¯Ø© Ø§Ù„ØªÙˆØ±ÙŠØ¯: ${a.leadTime} Ø£ÙŠØ§Ù…
ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬: ${l.toISOString().split("T")[0]}`,requiredDate:l.toISOString().split("T")[0],category:a.nameAr,leadTime:a.leadTime,priority:d}}function Pe(t){const a=new Map;t.forEach(s=>{const l=`${s.supplier}-${s.category}-${s.requiredDate}`;if(a.has(l)){const c=a.get(l);c.items.push(...s.items),c.subtotal+=s.subtotal,c.tax+=s.tax,c.total+=s.total}else a.set(l,L({},s))});let r=1;return a.forEach(s=>{s.poNumber=`PO-${new Date().getFullYear()}-${String(r++).padStart(4,"0")}`}),Array.from(a.values())}function Oe(s,l){return M(this,arguments,function*(t,a,r={}){try{console.log("ðŸ›’ Ø¨Ø¯Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ù…Ù† Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø©..."),console.log(`ðŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ù†ÙˆØ¯: ${t.length}`);const c=[];t.forEach((n,o)=>{if(!n.quantity||!n.unitPrice)return;const i=Ce(n.description),u=Me(n,i,a,o);if(r.minOrderValue&&u.total<r.minOrderValue){console.log(`âš ï¸ ØªØ®Ø·ÙŠ Ø§Ù„Ø¨Ù†Ø¯ (Ù‚ÙŠÙ…Ø© Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰): ${n.description}`);return}c.push(u)});let d=c;return r.groupSimilar!==!1&&(console.log("ðŸ”„ ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡Ø©..."),d=Pe(c)),d.sort((n,o)=>{const i={high:0,medium:1,low:2},u=i[n.priority||"medium"]-i[o.priority||"medium"];return u!==0?u:new Date(n.requiredDate||"").getTime()-new Date(o.requiredDate||"").getTime()}),console.log(`âœ… ØªÙ… ØªÙˆÙ„ÙŠØ¯ ${d.length} Ø£Ù…Ø± Ø´Ø±Ø§Ø¡`),console.log(`ðŸ”´ Ø£ÙˆØ§Ù…Ø± Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ${d.filter(n=>n.priority==="high").length}`),console.log(`ðŸŸ¡ Ø£ÙˆØ§Ù…Ø± Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ${d.filter(n=>n.priority==="medium").length}`),console.log(`ðŸŸ¢ Ø£ÙˆØ§Ù…Ø± Ù…Ù†Ø®ÙØ¶Ø© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ${d.filter(n=>n.priority==="low").length}`),d}catch(c){throw console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡:",c),c}})}function $e(t){const a={high:t.filter(o=>o.priority==="high").length,medium:t.filter(o=>o.priority==="medium").length,low:t.filter(o=>o.priority==="low").length},r=new Map;t.forEach(o=>{const i=o.category||"Ø£Ø®Ø±Ù‰";r.has(i)||r.set(i,{count:0,value:0});const u=r.get(i);u.count++,u.value+=o.total});const s=Array.from(r.entries()).map(([o,i])=>({category:o,count:i.count,value:i.value})).sort((o,i)=>i.value-o.value),l=new Map;t.forEach(o=>{const i=o.supplier;l.has(i)||l.set(i,{count:0,value:0});const u=l.get(i);u.count++,u.value+=o.total});const c=Array.from(l.entries()).map(([o,i])=>({supplier:o,count:i.count,value:i.value})).sort((o,i)=>i.value-o.value),d=new Map;t.forEach(o=>{const i=new Date(o.date),u=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`;d.has(u)||d.set(u,{orders:0,value:0});const p=d.get(u);p.orders++,p.value+=o.total});const n=Array.from(d.entries()).map(([o,i])=>L({month:o},i)).sort((o,i)=>o.month.localeCompare(i.month));return{totalOrders:t.length,totalValue:t.reduce((o,i)=>o+i.total,0),byPriority:a,byCategory:s,bySupplier:c,timeline:n}}function Ie(t,a){return M(this,null,function*(){console.log("ðŸ“‹ ØªÙˆÙ„ÙŠØ¯ Ø®Ø·Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©...");const r=[];t.forEach((c,d)=>{c.items.forEach((n,o)=>{const i={id:`proc-${d}-${o}`,material:n.description,category:c.category||"Ø£Ø®Ø±Ù‰",quantity:n.quantity,unit:n.unit,estimatedCost:n.total,supplier:c.supplier,orderDate:c.date,deliveryDate:c.requiredDate||"",leadTime:c.leadTime||5,priority:c.priority||"medium",status:"planned",notes:c.notes};r.push(i)})});const s=qe(r),l=Fe(r);return console.log("âœ… ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø®Ø·Ø© Ù…Ø´ØªØ±ÙŠØ§Øª Ù…ØªÙƒØ§Ù…Ù„Ø©"),console.log(`   - Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ù†ÙˆØ¯: ${r.length}`),console.log(`   - Ø§Ù„Ù…Ø¹Ø§Ù„Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: ${s.length}`),{plan:r,milestones:s,summary:l}})}function qe(t){const a=new Map;return t.forEach(r=>{const s=r.orderDate;a.has(s)||a.set(s,{items:[],value:0});const l=a.get(s);l.items.push(r.id),l.value+=r.estimatedCost}),Array.from(a.entries()).map(([r,s])=>({date:r,description:`Ø·Ù„Ø¨ ${s.items.length} Ù…Ø§Ø¯Ø©`,items:s.items,totalValue:s.value})).sort((r,s)=>r.date.localeCompare(s.date))}function Fe(t){const a=new Map;return t.forEach(r=>{const s=r.orderDate.substring(0,7);a.has(s)||a.set(s,{value:0,items:0});const l=a.get(s);l.value+=r.estimatedCost,l.items++}),{totalItems:t.length,totalValue:t.reduce((r,s)=>r+s.estimatedCost,0),criticalItems:t.filter(r=>r.priority==="high").length,monthlyBreakdown:Array.from(a.entries()).map(([r,s])=>L({month:r},s)).sort((r,s)=>r.month.localeCompare(s.month))}}function Ve(t,a,r,s="Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯"){return M(this,null,function*(){console.log("ðŸ“„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„...");const l={projectName:s,generatedDate:new Date().toISOString().split("T")[0],summary:{totalBOQItems:t.length,totalBOQValue:t.reduce((c,d)=>c+(d.total||0),0),totalActivities:a.length,projectDuration:Re(a),totalPurchaseOrders:r.length,totalProcurementValue:r.reduce((c,d)=>c+d.total,0)},sections:{boqAnalysis:Be(t),scheduleAnalysis:Le(a),procurementAnalysis:ze(r),riskAssessment:Qe(),recommendations:He()}};return console.log("âœ… ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„"),l})}function Re(t){if(t.length===0)return 0;const a=new Date(Math.min(...t.map(s=>new Date(s.startDate).getTime()))),r=new Date(Math.max(...t.map(s=>new Date(s.endDate).getTime())));return Math.ceil((r.getTime()-a.getTime())/(1e3*60*60*24))}function Be(t){const a=t.reduce((r,s)=>r+(s.total||0),0);return`ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø©: ${t.length} Ø¨Ù†Ø¯ Ø¨Ù‚ÙŠÙ…Ø© Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© ${a.toFixed(2)} Ø±ÙŠØ§Ù„`}function Le(t){const a=t.filter(r=>r.isCritical).length;return`ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„: ${t.length} Ù†Ø´Ø§Ø·ØŒ Ù…Ù†Ù‡Ø§ ${a} Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø­Ø±Ø¬`}function ze(t){const a=t.filter(r=>r.priority==="high").length;return`ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª: ${t.length} Ø£Ù…Ø± Ø´Ø±Ø§Ø¡ØŒ Ù…Ù†Ù‡Ø§ ${a} Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©`}function Qe(t,a){return"ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø±: Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø®Ø§Ø·Ø± Ù…ØªÙˆØ³Ø·Ø© ØªØªØ·Ù„Ø¨ Ù…ØªØ§Ø¨Ø¹Ø© Ø¯Ù‚ÙŠÙ‚Ø©"}function He(t,a,r){return["Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø­Ø±Ø¬Ø©","Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ø°ÙˆÙŠ Ù…Ø¯Ø© Ø§Ù„ØªÙˆØ±ÙŠØ¯ Ø§Ù„Ø·ÙˆÙŠÙ„Ø©","Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ†","Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ buffer Ù…Ø§Ù„ÙŠ 10% Ù„Ù„Ø·ÙˆØ§Ø±Ø¦"]}const Ke=({projectId:t,projectName:a,onComplete:r})=>{const[s,l]=z.useState(null),[c,d]=z.useState([]),[n,o]=z.useState(!1),[i,u]=z.useState([{id:"upload",title:"Ø±ÙØ¹ Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø©",description:"Ø±ÙØ¹ Ù…Ù„Ù Excel/CSV",status:"pending"},{id:"schedule",title:"ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ",description:"CPM Scheduling ØªÙ„Ù‚Ø§Ø¦ÙŠ",status:"pending"},{id:"purchase",title:"ØªÙˆÙ„ÙŠØ¯ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡",description:"Ø£ÙˆØ§Ù…Ø± Ø´Ø±Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„ØªØµÙ†ÙŠÙ",status:"pending"},{id:"procurement",title:"Ø®Ø·Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª",description:"Ø¬Ø¯ÙˆÙ„ Ø²Ù…Ù†ÙŠ Ù„Ù„Ù…Ø´ØªØ±ÙŠØ§Øª",status:"pending"},{id:"report",title:"Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„",description:"ØªÙ‚Ø±ÙŠØ± Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹",status:"pending"}]),p=(g,m,y,x)=>{u(T=>T.map(j=>j.id===g?K(L({},j),{status:m,result:y,error:x}):j))},f=z.useCallback(g=>{var y;const m=(y=g.target.files)==null?void 0:y[0];m&&(l(m),p("upload","completed",{fileName:m.name}))},[]),k=g=>M(null,null,function*(){return new Promise((m,y)=>{const x=new FileReader;x.onload=T=>{var j;try{const v=(j=T.target)==null?void 0:j.result,E=ge(v,{type:"binary"}),P=E.Sheets[E.SheetNames[0]],A=ue.sheet_to_json(P,{header:1});let _=-1;for(let w=0;w<Math.min(10,A.length);w++){const C=A[w].join("|").toLowerCase();if(C.includes("ÙˆØµÙ")||C.includes("Ø¨ÙŠØ§Ù†")||C.includes("description")||C.includes("Ø§Ù„ÙƒÙ…ÙŠØ©")||C.includes("quantity")){_=w;break}}_===-1&&(console.warn("âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØµÙ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„"),_=0);const V=A[_],R=A.slice(_+1),N=w=>{for(let h=0;h<V.length;h++){const C=String(V[h]||"").toLowerCase();for(const H of w)if(C.includes(H))return h}return-1},O=N(["Ø±Ù‚Ù…","no","number","#","item no","Ø±Ù‚Ù… Ø§Ù„Ø¨Ù†Ø¯","Ù…","ØªØ³Ù„Ø³Ù„ÙŠ","Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ"]),$=N(["ÙˆØµÙ","Ø¨ÙŠØ§Ù†","description","item","Ø§Ù„Ø¨Ù†Ø¯","ÙˆØµÙ Ø§Ù„Ø¨Ù†Ø¯","Ø§Ù„ØªÙØ§ØµÙŠÙ„","Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª"]),I=N(["ÙƒÙ…ÙŠØ©","quantity","qty","Ø§Ù„ÙƒÙ…ÙŠØ©"]),q=N(["ÙˆØ­Ø¯Ø©","unit","Ø§Ù„ÙˆØ­Ø¯Ø©","ÙˆØ­Ø¯Ø© Ø§Ù„Ù‚ÙŠØ§Ø³","Ø§Ù„Ù‚ÙŠØ§Ø³"]),F=N(["Ø³Ø¹Ø±","price","unit price","Ø§Ù„Ø³Ø¹Ø±","Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©","Ø§Ù„ÙØ¦Ø©"]),b=N(["Ø¥Ø¬Ù…Ø§Ù„ÙŠ","total","amount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ","Ø§Ù„Ù…Ø¨Ù„Øº","Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ"]),S=N(["ÙØ¦Ø©","category","type","Ø§Ù„ØªØµÙ†ÙŠÙ","Ø§Ù„Ù†ÙˆØ¹","Ø§Ù„ÙØ¦Ø©"]);console.log("ðŸ“Š Column mapping:",{itemNoCol:O,descCol:$,qtyCol:I,unitCol:q,priceCol:F,totalCol:b,categoryCol:S});const D=[];for(let w=0;w<R.length;w++){const h=R[w];if(!h||h.length===0)continue;const H=(O>=0?String(h[O]||"").trim():"")||`${w+1}`,U=$>=0?String(h[$]||"").trim():"";if(!U||U.length<3)continue;const B=I>=0?parseFloat(String(h[I]||"0").replace(/,/g,"")):0,ne=q>=0?String(h[q]||"ÙˆØ­Ø¯Ø©").trim():"ÙˆØ­Ø¯Ø©",W=F>=0?parseFloat(String(h[F]||"0").replace(/,/g,"")):0,Y=b>=0?parseFloat(String(h[b]||"0").replace(/,/g,"")):B*W,ie=S>=0?String(h[S]||"Ø¹Ø§Ù…").trim():"Ø¹Ø§Ù…";B<=0||D.push({id:H,description:U,quantity:B,unit:ne,unitPrice:W||Y/B,total:Y||B*W,category:ie})}console.log(`âœ… ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ${D.length} Ø¨Ù†Ø¯ Ù…Ù† Ø§Ù„Ù…Ù„Ù`),m(D)}catch(v){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù:",v),y(v)}},x.onerror=()=>y(new Error("ÙØ´Ù„ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù")),x.readAsBinaryString(g)})}),Q=()=>M(null,null,function*(){if(!s){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø© Ø£ÙˆÙ„Ø§Ù‹");return}o(!0);try{p("upload","processing");const g=yield k(s);if(g.length===0)throw new Error("Ø§Ù„Ù…Ù„Ù Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø©");d(g),p("upload","completed",{itemsCount:g.length,totalValue:g.reduce((E,P)=>E+P.total,0)}),p("schedule","processing");const m=yield De(g,{projectStartDate:new Date,workingDaysPerWeek:6,workingHoursPerDay:8}),y=Te(m);p("schedule","completed",{tasks:m.length,summary:y}),p("purchase","processing");const x=yield Oe(g,new Date,{groupSimilar:!0}),T=$e(x);p("purchase","completed",{orders:x.length,summary:T}),p("procurement","processing");const j=yield Ie(x,m);p("procurement","completed",j),p("report","processing");const v=yield Ve(g,m,x,a);p("report","completed",v),r&&r({boq:g,schedule:m,purchaseOrders:x}),console.log("âœ… Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ø§ÙƒØªÙ…Ù„ Ø¨Ù†Ø¬Ø§Ø­!")}catch(g){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„:",g),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø©")}finally{o(!1)}}),ae=g=>{switch(g){case"completed":return e.jsx(ee,{className:"text-green-500",size:20});case"processing":return e.jsx(te,{className:"text-blue-500 animate-spin",size:20});case"error":return e.jsx(fe,{className:"text-red-500",size:20});default:return e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})}},se=(g,m)=>{var y,x,T,j,v,E,P,A,_,V,R,N,O,$,I,q,F;if(!m)return null;switch(g){case"upload":return e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ù†ÙˆØ¯"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:m.itemsCount})]}),e.jsx(X,{className:"text-indigo-600 dark:text-indigo-400",size:40})]})}),m.totalValue&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[m.totalValue.toLocaleString("ar-SA")," Ø±ÙŠØ§Ù„"]})]}),e.jsx("svg",{className:"w-10 h-10 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})})]});case"schedule":return e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‡Ø§Ù…"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:m.tasks})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[(y=m.summary)==null?void 0:y.totalDuration," ÙŠÙˆÙ…"]})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø­Ø±Ø¬Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:(x=m.summary)==null?void 0:x.numberOfCriticalActivities})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg col-span-full",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…ØªÙˆÙ‚Ø¹"}),e.jsx("p",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:(T=m.summary)==null?void 0:T.estimatedCompletionDate})]})]});case"purchase":return e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙˆØ§Ù…Ø±"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:m.orders})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[(v=(j=m.summary)==null?void 0:j.totalValue)==null?void 0:v.toLocaleString("ar-SA")," Ø±ÙŠØ§Ù„"]})]}),e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:((P=(E=m.summary)==null?void 0:E.byPriority)==null?void 0:P.high)||0})]})]}),((A=m.summary)==null?void 0:A.byCategory)&&e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©"}),e.jsx("div",{className:"space-y-2",children:m.summary.byCategory.slice(0,5).map((b,S)=>{var D;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:b.category}),e.jsxs("span",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400",children:[(D=b.value)==null?void 0:D.toLocaleString("ar-SA")," Ø±ÙŠØ§Ù„"]})]},S)})})]})]});case"procurement":return e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:(_=m.summary)==null?void 0:_.totalItems})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[(R=(V=m.summary)==null?void 0:V.totalValue)==null?void 0:R.toLocaleString("ar-SA")," Ø±ÙŠØ§Ù„"]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø­Ø±Ø¬Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:(N=m.summary)==null?void 0:N.criticalItems})]})]}),m.milestones&&e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Ø§Ù„Ù…Ø¹Ø§Ù„Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"}),e.jsx("div",{className:"space-y-3",children:m.milestones.map((b,S)=>{var D;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:b.description}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:b.date})]}),e.jsxs("span",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400",children:[(D=b.totalValue)==null?void 0:D.toLocaleString("ar-SA")," Ø±ÙŠØ§Ù„"]})]},S)})})]})]});case"report":return e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:(O=m.summary)==null?void 0:O.totalBOQItems})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ù…Ø¯Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[($=m.summary)==null?void 0:$.projectDuration," ÙŠÙˆÙ…"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[(q=(I=m.summary)==null?void 0:I.totalProcurementValue)==null?void 0:q.toLocaleString("ar-SA")," Ø±ÙŠØ§Ù„"]})]})]}),((F=m.sections)==null?void 0:F.recommendations)&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-6 rounded-lg border-r-4 border-amber-500",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600",children:"ðŸ’¡"}),"Ø§Ù„ØªÙˆØµÙŠØ§Øª"]}),e.jsx("ul",{className:"space-y-2",children:m.sections.recommendations.map((b,S)=>e.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600 mt-1",children:"â€¢"}),e.jsx("span",{children:b})]},S))})]})]});default:return e.jsx("div",{className:"mt-4 p-4 bg-white dark:bg-gray-700 rounded-lg",children:e.jsx("pre",{className:"text-xs text-gray-700 dark:text-gray-300 overflow-auto max-h-48",children:JSON.stringify(m,null,2)})})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(X,{className:"text-white",size:32})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Ù…Ø±ÙƒØ² Ø±ÙØ¹ Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø§Øª"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Ø³ÙŠØ± Ø¹Ù…Ù„ Ù…ØªÙƒØ§Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ"})]})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg",children:"Ø§Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø© ÙˆØ³ÙŠØªÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹: ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠØŒ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ØŒ Ø®Ø·Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§ØªØŒ ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„Ø©."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3",children:[e.jsx(Z,{size:28}),"Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù…Ù‚Ø§ÙŠØ³Ø©"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-12 text-center hover:border-indigo-500 transition-colors",children:[e.jsx(Z,{className:"mx-auto mb-4 text-gray-400",size:64}),e.jsx("p",{className:"text-xl font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ù…Ù„Ù Excel Ø£Ùˆ CSV Ù‡Ù†Ø§"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ"}),e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:f,className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"inline-block px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg cursor-pointer transition-colors",children:"Ø§Ø®ØªØ± Ù…Ù„Ù"}),s&&e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-3 text-green-600",children:[e.jsx(ee,{size:20}),e.jsx("span",{className:"font-medium",children:s.name})]})]}),e.jsx("button",{onClick:Q,disabled:!s||n,className:"mt-8 w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold text-lg rounded-xl transition-all transform hover:scale-[1.02] disabled:scale-100 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:n?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"animate-spin",size:24}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{size:24}),"Ø¨Ø¯Ø¡ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Ø®Ø·ÙˆØ§Øª Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„"}),e.jsx("div",{className:"space-y-4",children:i.map((g,m)=>e.jsxs("div",{className:`p-6 rounded-xl border-2 transition-all ${g.status==="completed"?"border-green-500 bg-green-50 dark:bg-green-900/20":g.status==="processing"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 animate-pulse":g.status==="error"?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:m+1}),ae(g.status),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.description})]})]}),g.status==="completed"&&g.result&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"px-4 py-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-lg hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors flex items-center gap-2",children:[e.jsx(he,{size:16}),"Ø¹Ø±Ø¶"]}),e.jsxs("button",{className:"px-4 py-2 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-800 transition-colors flex items-center gap-2",children:[e.jsx(xe,{size:16}),"ØªØ­Ù…ÙŠÙ„"]})]})]}),g.status==="completed"&&g.result&&se(g.id,g.result)]},g.id))})]})]})})};export{Ke as BOQUploadHub,Ke as default};
