import{r as i,j as e}from"./react-vendor-D4cZjflF.js";import{X as h,a1 as m,a2 as b}from"./icons-lib-mPL1tuN6.js";const p=({isOpen:c,onClose:a,onConfirm:n,financialItems:t,fileName:r,isLoading:l})=>{const[d,o]=i.useState(!0);if(!c)return null;const x=()=>{n(t,r,d)};return e.jsx("div",{className:"modal",style:{display:"block"},onClick:a,children:e.jsxs("div",{className:"modal-content p-8 max-w-4xl dark:bg-gray-800",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"تأكيد بنود المقايسة"}),e.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:e.jsx(h,{size:24})})]}),e.jsxs("p",{className:"mb-4 text-slate-600 dark:text-slate-400",children:["تم استخراج البنود التالية من الملف ",e.jsx("span",{className:"font-semibold",children:r}),". يرجى مراجعتها قبل إضافتها إلى السجل المالي للمشروع."]}),l?e.jsxs("div",{className:"text-center p-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),e.jsx("p",{children:"جاري تحليل الملف..."})]}):t.length>0?e.jsx("div",{className:"max-h-96 overflow-y-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"البند"}),e.jsx("th",{className:"p-3",children:"الكمية"}),e.jsx("th",{className:"p-3",children:"الوحدة"}),e.jsx("th",{className:"p-3",children:"سعر الوحدة"}),e.jsx("th",{className:"p-3",children:"الإجمالي"})]})}),e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700 last:border-b-0",children:[e.jsx("td",{className:"p-3 font-medium max-w-sm",children:s.item}),e.jsx("td",{className:"p-3",children:s.quantity}),e.jsx("td",{className:"p-3",children:s.unit}),e.jsx("td",{className:"p-3 font-mono",children:s.unitPrice.toLocaleString("ar-SA")}),e.jsx("td",{className:"p-3 font-mono font-semibold",children:s.total.toLocaleString("ar-SA")})]},s.id))})]})}):e.jsxs("div",{className:"text-center p-12 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsx(m,{size:48,className:"mx-auto text-yellow-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200",children:"لم يتم العثور على بنود"}),e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:"لم يتمكن النظام من استخراج أي بنود من الملف. قد يكون الملف فارغًا أو بتنسيق غير مدعوم."})]}),e.jsx("div",{className:"mt-6 bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:s=>o(s.target.checked),className:"h-5 w-5 mt-1 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:t.length===0||l}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"إنشاء / استبدال الجدول الزمني للمشروع بناءً على هذه المقايسة"}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"تحذير: سيؤدي هذا إلى استبدال الجدول الزمني الحالي بالكامل بجدول جديد تم إنشاؤه بواسطة الذكاء الاصطناعي."})]})]})}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg text-slate-700 dark:text-slate-200 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500",children:"إلغاء"}),e.jsxs("button",{type:"button",onClick:x,disabled:t.length===0||l,className:"px-4 py-2 rounded-lg text-white bg-green-600 hover:bg-green-700 flex items-center gap-2 disabled:bg-gray-400",children:[e.jsx(b,{size:18}),"تأكيد وإضافة"]})]})]})})};export{p as B};
