import{r as p,j as t}from"./react-vendor-D4cZjflF.js";import{s as Se,g as de,y as ce,b as Ee}from"./yqarch-library-data-DjdbyW2F.js";import{bG as Ie,bH as Ae,an as Me,bj as Te,bI as De,c as Fe,ae as ye,U as ze,j as Re,ag as pe,e as We,F as $e,aU as xe,$ as Le,bi as ge,bJ as he,P as ne,bK as Be,bL as Oe,b2 as Xe,bM as Ue,aY as Ye,ay as Ge,b1 as Ze,a$ as qe}from"./icons-lib-mPL1tuN6.js";import"./vendor-DhnXlGBj.js";const He={"furn-001":{id:"furn-001",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:220,y:90}]},{type:"rectangle",points:[{x:0,y:-15},{x:220,y:0}]},{type:"rectangle",points:[{x:-10,y:20},{x:0,y:70}]},{type:"rectangle",points:[{x:220,y:20},{x:230,y:70}]}]},"furn-002":{id:"furn-002",type:"rectangle",width:180,height:90},"furn-003":{id:"furn-003",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:200,y:180}]},{type:"rectangle",points:[{x:-5,y:-20},{x:205,y:0}]}]},"furn-004":{id:"furn-004",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:140,y:70}]},{type:"rectangle",points:[{x:0,y:10},{x:30,y:60}]},{type:"rectangle",points:[{x:110,y:10},{x:140,y:60}]}]},"furn-005":{id:"furn-005",type:"composite",paths:[{type:"circle",points:[{x:30,y:30}],radius:25},{type:"rectangle",points:[{x:15,y:30},{x:45,y:75}]}]},"furn-006":{id:"furn-006",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:200,y:60}]},{type:"line",points:[{x:67,y:0},{x:67,y:60}]},{type:"line",points:[{x:133,y:0},{x:133,y:60}]}]},"furn-007":{id:"furn-007",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:35}]},{type:"line",points:[{x:0,y:36},{x:120,y:36}]},{type:"line",points:[{x:0,y:72},{x:120,y:72}]},{type:"line",points:[{x:0,y:108},{x:120,y:108}]},{type:"line",points:[{x:0,y:144},{x:120,y:144}]}]},"furn-008":{id:"furn-008",type:"rectangle",width:120,height:60},"furn-009":{id:"furn-009",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:80,y:90}]},{type:"rectangle",points:[{x:-10,y:30},{x:0,y:80}]}]},"furn-010":{id:"furn-010",type:"rectangle",width:50,height:50},"furn-011":{id:"furn-011",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:250,y:90}]},{type:"rectangle",points:[{x:250,y:0},{x:340,y:140}]}]},"furn-012":{id:"furn-012",type:"rectangle",width:120,height:40},"door-001":{id:"door-001",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:90,y:10}]},{type:"arc",points:[{x:0,y:0},{x:0,y:90}],radius:90}]},"door-002":{id:"door-002",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:160,y:10}]},{type:"arc",points:[{x:0,y:0},{x:0,y:80}],radius:80},{type:"arc",points:[{x:160,y:0},{x:160,y:80}],radius:80}]},"door-003":{id:"door-003",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:100,y:15}]},{type:"arc",points:[{x:0,y:0},{x:0,y:100}],radius:100}]},"door-004":{id:"door-004",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:10}]},{type:"rectangle",points:[{x:0,y:0},{x:60,y:10}]},{type:"line",points:[{x:60,y:5},{x:120,y:5}]}]},"door-005":{id:"door-005",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:90,y:8}]},{type:"arc",points:[{x:0,y:0},{x:0,y:90}],radius:90},{type:"line",points:[{x:0,y:0},{x:90,y:0}]}]},"door-006":{id:"door-006",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:70,y:8}]},{type:"arc",points:[{x:0,y:0},{x:0,y:70}],radius:70}]},"door-007":{id:"door-007",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:200,y:10}]},{type:"rectangle",points:[{x:0,y:0},{x:100,y:10}]},{type:"rectangle",points:[{x:100,y:0},{x:200,y:10}]}]},"door-008":{id:"door-008",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:15}]},{type:"arc",points:[{x:0,y:0},{x:0,y:120}],radius:120}]},"door-009":{id:"door-009",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:150,y:8}]},{type:"line",points:[{x:30,y:0},{x:30,y:8}]},{type:"line",points:[{x:60,y:0},{x:60,y:8}]},{type:"line",points:[{x:90,y:0},{x:90,y:8}]},{type:"line",points:[{x:120,y:0},{x:120,y:8}]}]},"door-010":{id:"door-010",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:80,y:10}]},{type:"line",points:[{x:40,y:0},{x:40,y:10}]},{type:"arc",points:[{x:0,y:0},{x:0,y:40}],radius:40}]},"window-001":{id:"window-001",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:100,y:15}]},{type:"line",points:[{x:50,y:0},{x:50,y:15}]}]},"window-002":{id:"window-002",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:150,y:15}]},{type:"line",points:[{x:50,y:0},{x:50,y:15}]},{type:"line",points:[{x:100,y:0},{x:100,y:15}]}]},"window-003":{id:"window-003",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:12}]},{type:"rectangle",points:[{x:0,y:2},{x:60,y:10}]}]},"window-004":{id:"window-004",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:200,y:15}]},{type:"line",points:[{x:0,y:7.5},{x:200,y:7.5}]},{type:"line",points:[{x:100,y:0},{x:100,y:15}]}]},"window-005":{id:"window-005",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:180,y:30}]},{type:"line",points:[{x:60,y:0},{x:60,y:30}]},{type:"line",points:[{x:120,y:0},{x:120,y:30}]}]},"window-006":{id:"window-006",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:100,y:15}]},{type:"rectangle",points:[{x:100,y:0},{x:115,y:100}]}]},"window-007":{id:"window-007",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:15}]},{type:"arc",points:[{x:0,y:0},{x:120,y:0}],radius:60}]},"window-008":{id:"window-008",type:"rectangle",width:150,height:8},"wall-001":{id:"wall-001",type:"rectangle",width:400,height:20},"wall-002":{id:"wall-002",type:"rectangle",width:400,height:30},"wall-003":{id:"wall-003",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:400,y:25}]},{type:"line",points:[{x:0,y:12.5},{x:400,y:12.5}]}]},"wall-004":{id:"wall-004",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:400,y:15}]},{type:"line",points:[{x:100,y:0},{x:100,y:15}]},{type:"line",points:[{x:200,y:0},{x:200,y:15}]},{type:"line",points:[{x:300,y:0},{x:300,y:15}]}]},"wall-005":{id:"wall-005",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:150,y:20}]},{type:"rectangle",points:[{x:250,y:0},{x:400,y:20}]}]},"wall-006":{id:"wall-006",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:400,y:10}]},{type:"line",points:[{x:0,y:5},{x:400,y:5}]}]},"stair-001":{id:"stair-001",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:300}]},...Array.from({length:15},(g,b)=>({type:"line",points:[{x:0,y:b*20},{x:120,y:b*20}]}))]},"stair-002":{id:"stair-002",type:"composite",paths:[{type:"circle",points:[{x:100,y:100}],radius:100},{type:"circle",points:[{x:100,y:100}],radius:30}]},"stair-003":{id:"stair-003",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:180}]},{type:"rectangle",points:[{x:120,y:180},{x:300,y:300}]}]},"stair-004":{id:"stair-004",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:150,y:250}]},...Array.from({length:12},(g,b)=>({type:"line",points:[{x:0,y:b*20},{x:150,y:b*20}]}))]},"stair-005":{id:"stair-005",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:90,y:280}]},...Array.from({length:14},(g,b)=>({type:"line",points:[{x:0,y:b*20},{x:90,y:b*20}]}))]},"stair-006":{id:"stair-006",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:150}]},{type:"rectangle",points:[{x:0,y:150},{x:120,y:180}]},{type:"rectangle",points:[{x:0,y:180},{x:120,y:330}]}]},"stair-007":{id:"stair-007",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:100,y:260}]},...Array.from({length:13},(g,b)=>({type:"line",points:[{x:0,y:b*20},{x:100,y:b*20}]}))]},"bath-001":{id:"bath-001",type:"rectangle",width:170,height:70},"bath-002":{id:"bath-002",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:90,y:90}]},{type:"circle",points:[{x:45,y:45}],radius:10}]},"bath-003":{id:"bath-003",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:40,y:70}]},{type:"circle",points:[{x:20,y:50}],radius:15}]},"bath-004":{id:"bath-004",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:60,y:50}]},{type:"circle",points:[{x:30,y:25}],radius:20}]},"bath-005":{id:"bath-005",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:50}]},{type:"circle",points:[{x:30,y:25}],radius:18},{type:"circle",points:[{x:90,y:25}],radius:18}]},"bath-006":{id:"bath-006",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:35,y:55}]},{type:"circle",points:[{x:17.5,y:35}],radius:12}]},"bath-007":{id:"bath-007",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:38,y:55}]},{type:"circle",points:[{x:19,y:40}],radius:14}]},"bath-008":{id:"bath-008",type:"rectangle",width:35,height:60},"bath-009":{id:"bath-009",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:50,y:50}]},{type:"circle",points:[{x:25,y:25}],radius:15}]},"kitchen-001":{id:"kitchen-001",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:80,y:50}]},{type:"rectangle",points:[{x:15,y:10},{x:65,y:40}]}]},"kitchen-002":{id:"kitchen-002",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:120,y:50}]},{type:"rectangle",points:[{x:10,y:10},{x:55,y:40}]},{type:"rectangle",points:[{x:65,y:10},{x:110,y:40}]}]},"kitchen-003":{id:"kitchen-003",type:"rectangle",width:60,height:60},"kitchen-004":{id:"kitchen-004",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:70,y:70}]},{type:"line",points:[{x:0,y:35},{x:70,y:35}]}]},"kitchen-005":{id:"kitchen-005",type:"rectangle",width:60,height:60},"kitchen-006":{id:"kitchen-006",type:"rectangle",width:90,height:50},"kitchen-007":{id:"kitchen-007",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:180,y:90}]},{type:"circle",points:[{x:90,y:45}],radius:20}]},"kitchen-008":{id:"kitchen-008",type:"rectangle",width:90,height:35},"landscape-001":{id:"landscape-001",type:"composite",paths:[{type:"circle",points:[{x:0,y:0}],radius:50},{type:"rectangle",points:[{x:-5,y:-60},{x:5,y:0}]}]},"landscape-002":{id:"landscape-002",type:"composite",paths:[{type:"circle",points:[{x:0,y:0}],radius:40},{type:"rectangle",points:[{x:-3,y:-70},{x:3,y:0}]}]},"landscape-003":{id:"landscape-003",type:"circle",radius:30},"landscape-004":{id:"landscape-004",type:"composite",paths:[{type:"rectangle",points:[{x:0,y:0},{x:150,y:50}]},{type:"rectangle",points:[{x:0,y:-15},{x:150,y:0}]}]},"landscape-005":{id:"landscape-005",type:"composite",paths:[{type:"circle",points:[{x:0,y:0}],radius:80},{type:"circle",points:[{x:0,y:0}],radius:20}]},"landscape-006":{id:"landscape-006",type:"composite",paths:[{type:"circle",points:[{x:0,y:0}],radius:60},{type:"rectangle",points:[{x:-3,y:-80},{x:3,y:0}]}]}};function me(g){return He[g]}const _e=({selectedTool:g,selectedLayer:b,layers:v,onEntityAdded:M,selectedBlock:N,blockRotation:z=0,blockScale:u=1,blockFlipH:G=!1,blockFlipV:h=!1})=>{const I=p.useRef(null),R=p.useRef(null),[A,W]=p.useState([]),[m,E]=p.useState([]),[re,Z]=p.useState(!1),[d,L]=p.useState(1),[w,C]=p.useState({x:0,y:0}),[B,T]=p.useState(!0),[k,ee]=p.useState(20),[D,te]=p.useState(!0),[O,U]=p.useState(!1),[q,H]=p.useState({x:0,y:0}),[s,P]=p.useState({x:0,y:0}),[S,$]=p.useState(null),[f,se]=p.useState(!1),_=()=>{const e=I.current;return e?e.getContext("2d"):null},Y=p.useCallback((e,i)=>{const r=I.current;if(!r)return{x:0,y:0};const l=r.getBoundingClientRect();let n=(e-l.left-w.x)/d,o=(i-l.top-w.y)/d;return D&&g!=="select"&&(n=Math.round(n/k)*k,o=Math.round(o/k)*k),{x:n,y:o}},[d,w,D,k,g]),c=p.useCallback((e,i)=>({x:e*d+w.x,y:i*d+w.y}),[d,w]),V=p.useCallback(e=>{if(!B)return;const i=I.current;if(!i)return;e.save(),e.strokeStyle="rgba(200, 200, 200, 0.3)",e.lineWidth=.5;const r=Math.floor(-w.x/d/k)*k,l=Math.floor(-w.y/d/k)*k,n=r+i.width/d+k*2,o=l+i.height/d+k*2;for(let a=r;a<n;a+=k){const x=c(a,0);e.beginPath(),e.moveTo(x.x,0),e.lineTo(x.x,i.height),e.stroke()}for(let a=l;a<o;a+=k){const x=c(0,a);e.beginPath(),e.moveTo(0,x.y),e.lineTo(i.width,x.y),e.stroke()}e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=2;const y=c(0,0);e.beginPath(),e.moveTo(0,y.y),e.lineTo(i.width,y.y),e.stroke(),e.strokeStyle="rgba(0, 255, 0, 0.5)",e.beginPath(),e.moveTo(y.x,0),e.lineTo(y.x,i.height),e.stroke(),e.restore()},[B,k,c,d,w]),ae=p.useCallback((e,i)=>{var l,n;const r=v.find(o=>o.id===i.layerId);if(!(!r||r.visibility==="hidden")){switch(e.save(),e.strokeStyle=i.color||r.color,e.lineWidth=i.lineWidth*d,e.lineCap="round",e.lineJoin="round",r.visibility==="locked"&&(e.globalAlpha=.5),i.type){case"line":if(i.points.length>=2){e.beginPath();const o=c(i.points[0].x,i.points[0].y);e.moveTo(o.x,o.y);const y=c(i.points[1].x,i.points[1].y);e.lineTo(y.x,y.y),e.stroke()}break;case"polyline":if(i.points.length>=2){e.beginPath();const o=c(i.points[0].x,i.points[0].y);e.moveTo(o.x,o.y);for(let y=1;y<i.points.length;y++){const a=c(i.points[y].x,i.points[y].y);e.lineTo(a.x,a.y)}e.stroke()}break;case"circle":if(i.points.length>=1&&((l=i.properties)!=null&&l.radius)){const o=c(i.points[0].x,i.points[0].y),y=i.properties.radius*d;e.beginPath(),e.arc(o.x,o.y,y,0,Math.PI*2),e.stroke()}break;case"arc":if(i.points.length>=1&&((n=i.properties)!=null&&n.radius)){const o=c(i.points[0].x,i.points[0].y),y=i.properties.radius*d,a=i.properties.startAngle||0,x=i.properties.endAngle||Math.PI;e.beginPath(),e.arc(o.x,o.y,y,a,x),e.stroke()}break;case"rectangle":if(i.points.length>=2){const o=c(i.points[0].x,i.points[0].y),y=c(i.points[1].x,i.points[1].y),a=y.x-o.x,x=y.y-o.y;e.beginPath(),e.rect(o.x,o.y,a,x),e.stroke()}break}i.points.forEach(o=>{const y=c(o.x,o.y);e.fillStyle=i.color||r.color,e.beginPath(),e.arc(y.x,y.y,3,0,Math.PI*2),e.fill()}),e.restore()}},[v,d,c]);p.useCallback((e,i,r,l=1)=>{const n=me(i);if(!n)return;const o=v.find(a=>a.id===b);if(!o)return;e.save(),e.strokeStyle=o.color,e.lineWidth=2*d,e.fillStyle="rgba(100, 100, 255, 0.1)";const y=c(r.x,r.y);if(n.type==="rectangle"&&n.width&&n.height){const a=n.width*l*d,x=n.height*l*d;e.beginPath(),e.rect(y.x,y.y,a,x),e.stroke(),e.fill()}else if(n.type==="circle"&&n.radius){const a=n.radius*l*d;e.beginPath(),e.arc(y.x,y.y,a,0,Math.PI*2),e.stroke(),e.fill()}else n.type==="composite"&&n.paths&&n.paths.forEach(a=>{if(a.type==="line"&&a.points.length>=2){e.beginPath();const x=c(r.x+a.points[0].x*l,r.y+a.points[0].y*l);e.moveTo(x.x,x.y);for(let j=1;j<a.points.length;j++){const F=c(r.x+a.points[j].x*l,r.y+a.points[j].y*l);e.lineTo(F.x,F.y)}e.stroke()}else if(a.type==="rectangle"&&a.points.length>=2){const x=c(r.x+a.points[0].x*l,r.y+a.points[0].y*l),j=c(r.x+a.points[1].x*l,r.y+a.points[1].y*l);e.beginPath(),e.rect(x.x,x.y,j.x-x.x,j.y-x.y),e.stroke(),e.fill()}else if(a.type==="circle"&&a.points.length>=1&&a.radius){const x=c(r.x+a.points[0].x*l,r.y+a.points[0].y*l),j=a.radius*l*d;e.beginPath(),e.arc(x.x,x.y,j,0,Math.PI*2),e.stroke(),e.fill()}else if(a.type==="arc"&&a.points.length>=2&&a.radius){const x=c(r.x+a.points[0].x*l,r.y+a.points[0].y*l),j=c(r.x+a.points[1].x*l,r.y+a.points[1].y*l),F=a.radius*l*d,ie=Math.atan2(0,F),Pe=Math.atan2(j.y-x.y,j.x-x.x);e.beginPath(),e.arc(x.x,x.y,F,ie,Pe),e.stroke()}});e.restore()},[v,b,d,c]);const oe=p.useCallback(e=>{if(m.length===0||g==="select")return;const i=v.find(r=>r.id===b);if(i){switch(e.save(),e.strokeStyle=i.color,e.lineWidth=2,e.setLineDash([5,5]),g){case"line":if(m.length===1){const r=c(m[0].x,m[0].y),l=c(s.x,s.y);e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(l.x,l.y),e.stroke()}break;case"polyline":if(m.length>=1){e.beginPath();const r=c(m[0].x,m[0].y);e.moveTo(r.x,r.y);for(let n=1;n<m.length;n++){const o=c(m[n].x,m[n].y);e.lineTo(o.x,o.y)}const l=c(s.x,s.y);e.lineTo(l.x,l.y),e.stroke()}break;case"circle":if(m.length===1){const r=c(m[0].x,m[0].y),l=c(s.x,s.y),n=l.x-r.x,o=l.y-r.y,y=Math.sqrt(n*n+o*o);e.beginPath(),e.arc(r.x,r.y,y,0,Math.PI*2),e.stroke()}break;case"rectangle":if(m.length===1){const r=c(m[0].x,m[0].y),l=c(s.x,s.y),n=l.x-r.x,o=l.y-r.y;e.beginPath(),e.rect(r.x,r.y,n,o),e.stroke()}break}m.forEach(r=>{const l=c(r.x,r.y);e.fillStyle=i.color,e.beginPath(),e.arc(l.x,l.y,4,0,Math.PI*2),e.fill()}),e.restore()}},[m,s,g,b,v,d,c]),le=p.useCallback(e=>{if(g!=="insert-block"||!N||!S)return;const i=me(N.id);if(!i)return;const r=v.find(n=>n.id===b);if(!r)return;e.save(),e.globalAlpha=.6,e.strokeStyle=r.color,e.lineWidth=2*d,e.fillStyle="rgba(100, 150, 255, 0.2)";const l=c(S.x,S.y);if(e.translate(l.x,l.y),e.rotate(z*Math.PI/180),e.scale(G?-1:1,h?-1:1),i.type==="rectangle"&&i.width&&i.height){const n=i.width*u*d,o=i.height*u*d;e.beginPath(),e.rect(0,0,n,o),e.stroke(),e.fill()}else if(i.type==="circle"&&i.radius){const n=i.radius*u*d;e.beginPath(),e.arc(0,0,n,0,Math.PI*2),e.stroke(),e.fill()}else i.type==="composite"&&i.paths&&i.paths.forEach(n=>{if(n.type==="line"&&n.points.length>=2){e.beginPath();const o={x:n.points[0].x*u*d,y:n.points[0].y*u*d};e.moveTo(o.x,o.y);for(let y=1;y<n.points.length;y++){const a={x:n.points[y].x*u*d,y:n.points[y].y*u*d};e.lineTo(a.x,a.y)}e.stroke()}else if(n.type==="rectangle"&&n.points.length>=2){const o=n.points[0].x*u*d,y=n.points[0].y*u*d,a=(n.points[1].x-n.points[0].x)*u*d,x=(n.points[1].y-n.points[0].y)*u*d;e.beginPath(),e.rect(o,y,a,x),e.stroke(),e.fill()}else if(n.type==="circle"&&n.points.length>=1&&n.radius){const o=n.points[0].x*u*d,y=n.points[0].y*u*d,a=n.radius*u*d;e.beginPath(),e.arc(o,y,a,0,Math.PI*2),e.stroke(),e.fill()}else if(n.type==="arc"&&n.points.length>=2&&n.radius){const o=n.points[0].x*u*d,y=n.points[0].y*u*d,a=n.radius*u*d,x=n.points[1].x*u*d,j=n.points[1].y*u*d,F=0,ie=Math.atan2(j-y,x-o);e.beginPath(),e.arc(o,y,a,F,ie),e.stroke()}});e.restore()},[g,N,S,v,b,d,z,u,G,h,c]),Q=p.useCallback(()=>{const e=_(),i=I.current;if(!(!e||!i)){if(e.fillStyle="#ffffff",e.fillRect(0,0,i.width,i.height),V(e),A.forEach(r=>ae(e,r)),oe(e),le(e),g!=="select"){const r=c(s.x,s.y);e.save(),e.strokeStyle="rgba(0, 150, 255, 0.8)",e.lineWidth=1,e.setLineDash([3,3]),e.beginPath(),e.moveTo(r.x-20,r.y),e.lineTo(r.x+20,r.y),e.stroke(),e.beginPath(),e.moveTo(r.x,r.y-20),e.lineTo(r.x,r.y+20),e.stroke(),e.restore()}e.save(),e.fillStyle="rgba(0, 0, 0, 0.7)",e.font="12px monospace",e.fillText(`X: ${s.x.toFixed(2)}  Y: ${s.y.toFixed(2)}  Zoom: ${(d*100).toFixed(0)}%`,10,i.height-10),e.restore()}},[A,V,ae,oe,le,s,g,d,c]),J=p.useCallback(()=>{const e=I.current,i=R.current;!e||!i||(e.width=i.clientWidth,e.height=i.clientHeight,Q())},[Q]);p.useEffect(()=>(J(),window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)),[J]),p.useEffect(()=>{Q()},[Q]);const ue=e=>{if(e.button===1||e.button===0&&e.altKey){U(!0),H({x:e.clientX-w.x,y:e.clientY-w.y});return}if(g==="select")return;const i=Y(e.clientX,e.clientY);switch(g){case"line":m.length===0?E([i]):K([m[0],i]);break;case"polyline":E([...m,i]);break;case"circle":case"arc":m.length===0?E([i]):K([m[0]]);break;case"rectangle":m.length===0?E([i]):K([m[0],i]);break;case"insert-block":N&&S&&ve(S);break}},be=e=>{if(O){C({x:e.clientX-q.x,y:e.clientY-q.y});return}const i=Y(e.clientX,e.clientY);P(i),g==="insert-block"&&N&&$(i)},fe=e=>{U(!1)},ke=e=>{g==="polyline"&&m.length>=2&&K(m)},je=e=>{e.preventDefault(),E([])},K=e=>{const i=v.find(n=>n.id===b);if(!i)return;let r={};if(g==="circle"&&e.length===1){const n=s.x-e[0].x,o=s.y-e[0].y;r.radius=Math.sqrt(n*n+o*o)}else if(g==="arc"&&e.length===1){const n=s.x-e[0].x,o=s.y-e[0].y;r.radius=Math.sqrt(n*n+o*o),r.startAngle=0,r.endAngle=Math.PI}const l={id:`entity-${Date.now()}`,type:g,points:e,color:i.color,lineWidth:2,layerId:b,properties:r};W([...A,l]),E([]),M&&M(l)},ve=e=>{if(!N)return;const i=v.find(l=>l.id===b);if(!i)return;const r={id:`block-${Date.now()}`,type:"rectangle",points:[e],color:i.color,lineWidth:2,layerId:b,properties:{radius:0},blockId:N.id,blockRotation:z,blockScale:u};W([...A,r]),$(null),M&&M(r),console.log(`‚úÖ Block inserted: ${N.nameAr} at (${e.x.toFixed(2)}, ${e.y.toFixed(2)})`)},Ne=()=>L(Math.min(d*1.2,10)),we=()=>L(Math.max(d/1.2,.1)),Ce=()=>{L(1),C({x:0,y:0})};return t.jsxs("div",{ref:R,className:"relative w-full h-full bg-gray-50 dark:bg-gray-900",children:[t.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 flex items-center gap-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg px-3 py-2 border border-gray-200 dark:border-gray-700 z-10",children:[t.jsx("button",{onClick:Ne,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"ÿ™ŸÉÿ®Ÿäÿ± (Zoom In)",children:t.jsx(Ie,{size:18})}),t.jsx("button",{onClick:we,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"ÿ™ÿµÿ∫Ÿäÿ± (Zoom Out)",children:t.jsx(Ae,{size:18})}),t.jsx("button",{onClick:Ce,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"ŸÖŸÑÿ° ÿßŸÑÿ¥ÿßÿ¥ÿ© (Fit)",children:t.jsx(Me,{size:18})}),t.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),t.jsx("button",{onClick:()=>T(!B),className:`p-2 rounded-lg transition-colors ${B?"bg-indigo-100 dark:bg-indigo-900 text-indigo-600":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"ÿ•ÿ∏Ÿáÿßÿ±/ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ¥ÿ®ŸÉÿ©",children:t.jsx(Te,{size:18})}),t.jsx("button",{onClick:()=>te(!D),className:`p-2 rounded-lg transition-colors ${D?"bg-indigo-100 dark:bg-indigo-900 text-indigo-600":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"ÿßŸÑÿßŸÑÿ™ÿµÿßŸÇ ÿ®ÿßŸÑÿ¥ÿ®ŸÉÿ©",children:t.jsx(De,{size:18})})]}),t.jsx("canvas",{ref:I,onMouseDown:ue,onMouseMove:be,onMouseUp:fe,onDoubleClick:ke,onContextMenu:je,className:"w-full h-full cursor-crosshair",style:{cursor:O?"grabbing":g==="select"?"default":"crosshair"}}),A.length===0&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:t.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 max-w-md",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"üé® ÿßÿ®ÿØÿ£ ÿßŸÑÿ±ÿ≥ŸÖ"}),t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 text-right",children:[t.jsx("p",{children:"‚Ä¢ ÿßÿÆÿ™ÿ± ÿ£ÿØÿßÿ© ŸÖŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸäŸÖŸÜŸâ"}),t.jsx("p",{children:"‚Ä¢ ÿßŸÜŸÇÿ± ÿπŸÑŸâ Canvas ŸÑÿ®ÿØÿ° ÿßŸÑÿ±ÿ≥ŸÖ"}),t.jsx("p",{children:"‚Ä¢ ÿßÿ≥ÿ™ÿÆÿØŸÖ Alt + ÿßŸÑŸÜŸÇÿ± ŸÑŸÑÿ™ÿ≠ÿ±ŸäŸÉ"}),t.jsx("p",{children:"‚Ä¢ ÿØÿ®ŸÑ ŸÉŸÑŸäŸÉ ŸÑÿ•ŸÜŸáÿßÿ° Polyline"}),t.jsx("p",{children:"‚Ä¢ ŸÉŸÑŸäŸÉ ŸäŸÖŸäŸÜ ŸÑŸÑÿ•ŸÑÿ∫ÿßÿ°"})]})]})}),t.jsx("div",{className:"absolute bottom-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg px-4 py-2 border border-gray-200 dark:border-gray-700 text-sm",children:t.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:["ÿπÿØÿØ ÿßŸÑÿπŸÜÿßÿµÿ±: ",t.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:A.length})]})})]})},et=()=>{var H;const[g,b]=p.useState("blocks"),[v,M]=p.useState("select"),[N,z]=p.useState(null),[u,G]=p.useState(""),[h,I]=p.useState(null),[R,A]=p.useState(0),[W,m]=p.useState(1),[E,re]=p.useState(!1),[Z,d]=p.useState(!1),[L,w]=p.useState(!1),[C,B]=p.useState([{id:"layer-1",name:"WALLS",color:"#FF0000",lineType:"Continuous",lineWeight:.3,visibility:"visible"},{id:"layer-2",name:"DOORS",color:"#00FF00",lineType:"Continuous",lineWeight:.2,visibility:"visible"},{id:"layer-3",name:"WINDOWS",color:"#0000FF",lineType:"Continuous",lineWeight:.2,visibility:"visible"},{id:"layer-4",name:"FURNITURE",color:"#FFA500",lineType:"Dashed",lineWeight:.1,visibility:"visible"}]),[T,k]=p.useState([]),[ee,D]=p.useState(0),te=s=>{console.log("Entity added:",s),k([...T,s])},O=u?Se(u):N?de(N):ce,U=()=>{let s="";s+=`0
SECTION
2
HEADER
`,s+=`9
$ACADVER
1
AC1015
`,s+=`9
$INSUNITS
70
4
`,s+=`0
ENDSEC
`,s+=`0
SECTION
2
TABLES
`,s+=`0
TABLE
2
LAYER
70
`+C.length+`
`,C.forEach(f=>{s+=`0
LAYER
`,s+=`2
`+f.name+`
`,s+=`70
0
`,s+=`62
1
`,s+=`6
CONTINUOUS
`}),s+=`0
ENDTAB
`,s+=`0
ENDSEC
`,s+=`0
SECTION
2
ENTITIES
`,T.forEach(f=>{var se,_,Y;f.type==="line"&&f.points.length>=2?(s+=`0
LINE
`,s+=`8
`+(((se=C.find(c=>c.id===f.layerId))==null?void 0:se.name)||"WALLS")+`
`,s+=`10
`+f.points[0].x+`
`,s+=`20
`+f.points[0].y+`
`,s+=`11
`+f.points[1].x+`
`,s+=`21
`+f.points[1].y+`
`):f.type==="circle"&&f.points.length>=1?(s+=`0
CIRCLE
`,s+=`8
`+(((_=C.find(c=>c.id===f.layerId))==null?void 0:_.name)||"WALLS")+`
`,s+=`10
`+f.points[0].x+`
`,s+=`20
`+f.points[0].y+`
`,s+=`40
`+(f.properties.radius||10)+`
`):f.type==="polyline"&&f.points.length>=2&&(s+=`0
LWPOLYLINE
`,s+=`8
`+(((Y=C.find(c=>c.id===f.layerId))==null?void 0:Y.name)||"WALLS")+`
`,s+=`90
`+f.points.length+`
`,s+=`70
1
`,f.points.forEach((c,V)=>{s+=`10
`+c.x+`
`,s+=`20
`+c.y+`
`,f.properties.bulge&&V<f.points.length-1&&(s+=`42
`+f.properties.bulge+`
`)}))}),s+=`0
ENDSEC
`,s+=`0
EOF
`;const P=new Blob([s],{type:"application/dxf"}),S=URL.createObjectURL(P),$=document.createElement("a");$.href=S,$.download="noufal_drawing_"+new Date().getTime()+".dxf",$.click(),URL.revokeObjectURL(S)},q=s=>{const P=s*Math.PI/180;return Math.tan(P/4)};return t.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Fe,{className:"w-8 h-8 text-indigo-600"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ŸÖŸÜÿµÿ© CAD ÿßŸÑŸÖŸàÿ≠ÿØÿ©"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÿ£ÿØŸàÿßÿ™ AutoCAD ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑÿ© | ŸÖŸÉÿ™ÿ®ÿ© yQArch | DXF Generator"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx(ye,{size:18}),"ÿ™ÿµÿØŸäÿ± DXF"]}),t.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[t.jsx(ze,{size:18}),"ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ"]})]})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6",children:t.jsx("div",{className:"flex gap-1",children:[{id:"blocks",label:"ŸÖŸÉÿ™ÿ®ÿ© ÿßŸÑÿ®ŸÑŸàŸÉÿßÿ™",icon:Re},{id:"draw",label:"ÿ£ÿØŸàÿßÿ™ ÿßŸÑÿ±ÿ≥ŸÖ",icon:pe},{id:"layers",label:"ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™",icon:We},{id:"dxf",label:"DXF Tools",icon:$e},{id:"quantity",label:"ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÉŸÖŸäÿßÿ™",icon:xe}].map(s=>t.jsxs("button",{onClick:()=>b(s.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${g===s.id?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[t.jsx(s.icon,{size:18}),t.jsx("span",{className:"font-medium",children:s.label})]},s.id))})}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 overflow-y-auto",children:[g==="blocks"&&t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑŸÖŸÉÿ™ÿ®ÿ©...",value:u,onChange:s=>G(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>z(null),className:`w-full text-right px-3 py-2 rounded-lg transition-colors ${N?"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-indigo-50 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸÑŸàŸÉÿßÿ™"}),t.jsx("span",{className:"text-sm text-gray-500",children:ce.length})]})}),Ee.map(s=>t.jsx("button",{onClick:()=>z(s.id),className:`w-full text-right px-3 py-2 rounded-lg transition-colors ${N===s.id?"bg-indigo-50 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"font-medium",children:[s.icon," ",s.nameAr]}),t.jsx("span",{className:"text-sm text-gray-500",children:de(s.id).length})]})},s.id))]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:[O.length," ÿ®ŸÑŸàŸÉ ŸÖÿ™ÿßÿ≠"]}),O.map(s=>t.jsx("div",{onClick:()=>I(s),className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${(h==null?void 0:h.id)===s.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 dark:border-gray-700 hover:border-indigo-300"}`,children:t.jsx("div",{className:"flex items-start gap-2",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:s.nameAr}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:s.nameEn}),s.dimensions&&t.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-1",children:["üìè ",s.dimensions]})]})})},s.id))]}),h&&t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ•ÿØÿ±ÿßÿ¨"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["ÿßŸÑÿ™ÿØŸàŸäÿ±: ",R,"¬∞"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:R,onChange:s=>A(Number(s.target.value)),className:"flex-1"}),t.jsx("button",{onClick:()=>A(0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ",children:t.jsx(ge,{size:16})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["ÿßŸÑÿ™ÿ≠ÿ¨ŸäŸÖ: ",W.toFixed(2),"x"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:W,onChange:s=>m(Number(s.target.value)),className:"flex-1"}),t.jsx("button",{onClick:()=>m(1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ",children:t.jsx(ge,{size:16})})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>re(!E),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ${E?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":"border-gray-200 dark:border-gray-700 hover:border-indigo-300"}`,title:"ŸÇŸÑÿ® ÿ£ŸÅŸÇŸä",children:[t.jsx(he,{size:16}),t.jsx("span",{className:"text-sm",children:"ÿ£ŸÅŸÇŸä"})]}),t.jsxs("button",{onClick:()=>d(!Z),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ${Z?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":"border-gray-200 dark:border-gray-700 hover:border-indigo-300"}`,title:"ŸÇŸÑÿ® ÿ±ÿ£ÿ≥Ÿä",children:[t.jsx(he,{size:16,className:"transform rotate-90"}),t.jsx("span",{className:"text-sm",children:"ÿ±ÿ£ÿ≥Ÿä"})]})]}),t.jsxs("button",{onClick:()=>{M("insert-block"),w(!0)},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:[t.jsx(ne,{size:20}),t.jsx("span",{children:"ÿ•ÿØÿ±ÿßÿ¨ ÿßŸÑÿ®ŸÑŸàŸÉ"})]}),L&&t.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"‚úì Ÿàÿ∂ÿπ ÿßŸÑÿ•ÿØÿ±ÿßÿ¨ ŸÜÿ¥ÿ∑ - ÿßŸÜŸÇÿ± ÿπŸÑŸâ Canvas ŸÑÿ•ÿØÿ±ÿßÿ¨ ÿßŸÑÿ®ŸÑŸàŸÉ"})})]})]}),g==="draw"&&t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ÿ£ÿØŸàÿßÿ™ ÿßŸÑÿ±ÿ≥ŸÖ"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{tool:"select",label:"ÿ™ÿ≠ÿØŸäÿØ",icon:Be},{tool:"line",label:"ÿÆÿ∑",icon:Oe},{tool:"polyline",label:"ÿÆÿ∑ ŸÖÿ™ÿπÿØÿØ",icon:pe},{tool:"circle",label:"ÿØÿßÿ¶ÿ±ÿ©",icon:Xe},{tool:"arc",label:"ŸÇŸàÿ≥",icon:Ue},{tool:"rectangle",label:"ŸÖÿ≥ÿ™ÿ∑ŸäŸÑ",icon:Ye}].map(({tool:s,label:P,icon:S})=>t.jsxs("button",{onClick:()=>M(s),className:`flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all ${v===s?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 dark:border-gray-700 hover:border-indigo-300"}`,children:[t.jsx(S,{size:24}),t.jsx("span",{className:"text-sm font-medium",children:P})]},s))}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"ŸÖÿ≠ÿ±ÿ± Bulge ŸÑŸÑÿ£ŸÇŸàÿßÿ≥"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"ÿ≤ÿßŸàŸäÿ© ÿßŸÑŸÇŸàÿ≥ (ÿØÿ±ÿ¨ÿ©)"}),t.jsx("input",{type:"number",min:"0",max:"360",value:Math.atan(ee)*720/Math.PI,onChange:s=>D(q(parseFloat(s.target.value)||0)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"ŸÇŸäŸÖÿ© Bulge"}),t.jsx("input",{type:"number",step:"0.01",value:ee,onChange:s=>D(parseFloat(s.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-2 rounded",children:"üí° Bulge = tan(angle/4)"})]})]})]}),g==="layers"&&t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™"}),t.jsx("button",{className:"p-2 text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg",children:t.jsx(ne,{size:18})})]}),t.jsx("div",{className:"space-y-2",children:C.map(s=>t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[t.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:s.color}}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.lineType," | ",s.lineWeight,"mm"]})]}),t.jsx("button",{className:"p-2 text-gray-500 hover:text-indigo-600",children:s.visibility==="visible"?t.jsx(Ge,{size:18}):t.jsx(Ze,{size:18})})]},s.id))})]}),g==="dxf"&&t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ÿ£ÿØŸàÿßÿ™ DXF"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(qe,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-1 shrink-0"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"ŸÖÿπŸÑŸàŸÖÿßÿ™ DXF Generator"}),t.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"Ÿäÿ™ŸÖ ÿ™ŸàŸÑŸäÿØ ŸÖŸÑŸÅÿßÿ™ DXF ŸÖÿ™ŸàÿßŸÅŸÇÿ© ŸÖÿπ AutoCAD 2000+ ŸÖÿπ ÿØÿπŸÖ ŸÉÿßŸÖŸÑ ŸÑŸÑÿ∑ÿ®ŸÇÿßÿ™ ŸàÿßŸÑŸÉŸäÿßŸÜÿßÿ™ ÿßŸÑŸáŸÜÿØÿ≥Ÿäÿ©"})]})]})}),t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 space-y-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™:"}),t.jsx("span",{className:"font-semibold",children:C.length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ÿßŸÑŸÉŸäÿßŸÜÿßÿ™:"}),t.jsx("span",{className:"font-semibold",children:T.length})]})]})]}),t.jsxs("button",{onClick:U,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx(ye,{size:18}),"ÿ™ŸàŸÑŸäÿØ Ÿàÿ™ÿµÿØŸäÿ± DXF"]})]})]}),g==="quantity"&&t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÉŸÖŸäÿßÿ™"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg border border-green-200 dark:border-green-800",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(xe,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-1 shrink-0"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("h4",{className:"font-semibold text-green-900 dark:text-green-100 mb-1",children:"ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ™ŸÑŸÇÿßÿ¶Ÿä"}),t.jsx("p",{className:"text-green-700 dark:text-green-300",children:"Ÿäÿ™ŸÖ ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ÿ∑ŸàÿßŸÑ ŸàÿßŸÑŸÖÿ≥ÿßÿ≠ÿßÿ™ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÖŸÜ ÿßŸÑŸÖÿÆÿ∑ÿ∑ÿßÿ™ ŸÖÿπ ÿØÿπŸÖ ŸÖÿπÿßŸÖŸÑ Bulge ŸÑŸÑÿ£ŸÇŸàÿßÿ≥"})]})]})}),t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"ÿßŸÑŸÉŸÖŸäÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿ±ÿ¨ÿ©"}),T.length===0?t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ±ÿ≥ŸàŸÖÿßÿ™ ŸÑÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÉŸÖŸäÿßÿ™ ŸÖŸÜŸáÿß"}):t.jsx("div",{className:"space-y-2 text-sm",children:T.map((s,P)=>t.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[t.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[s.type==="line"&&"üìè ÿÆÿ∑",s.type==="circle"&&"‚≠ï ÿØÿßÿ¶ÿ±ÿ©",s.type==="polyline"&&"üìê ÿÆÿ∑ ŸÖÿ™ÿπÿØÿØ"," #"+(P+1)]}),t.jsx("span",{className:"font-semibold",children:s.type==="circle"&&s.properties.radius?`œÄ √ó ${(s.properties.radius*2).toFixed(2)}¬≤ = ${(Math.PI*s.properties.radius*s.properties.radius).toFixed(2)} ŸÖ¬≤`:"ŸÖÿ≠ÿ≥Ÿàÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã"})]},s.id))})]})]})]})]}),t.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 relative",children:t.jsx(_e,{selectedTool:v,selectedLayer:((H=C.find(s=>s.visibility==="visible"))==null?void 0:H.id)||C[0].id,layers:C,onEntityAdded:te,selectedBlock:h,blockRotation:R,blockScale:W,blockFlipH:E,blockFlipV:Z})}),h&&t.jsx("div",{className:"w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 p-4 overflow-y-auto",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ÿßŸÑÿÆÿµÿßÿ¶ÿµ"}),t.jsx("button",{onClick:()=>I(null),className:"p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:t.jsx(X,{size:18})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:h.nameAr}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.nameEn})]}),h.dimensions&&t.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg",children:[t.jsx("div",{className:"text-sm font-medium text-indigo-900 dark:text-indigo-100",children:"üìè ÿßŸÑÿ£ÿ®ÿπÿßÿØ"}),t.jsx("div",{className:"text-sm text-indigo-700 dark:text-indigo-300 mt-1",children:h.dimensions})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ÿßŸÑŸàÿµŸÅ"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:h.description})]}),h.specifications&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÿßŸÑŸÖŸàÿßÿµŸÅÿßÿ™"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[h.specifications.material&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ÿßŸÑŸÖÿßÿØÿ©:"}),t.jsx("span",{className:"font-medium",children:h.specifications.material})]}),h.specifications.dimensions&&t.jsxs(t.Fragment,{children:[h.specifications.dimensions.width&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ÿßŸÑÿπÿ±ÿ∂:"}),t.jsxs("span",{className:"font-medium",children:[h.specifications.dimensions.width," ",h.specifications.unit]})]}),h.specifications.dimensions.depth&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ÿßŸÑÿπŸÖŸÇ:"}),t.jsxs("span",{className:"font-medium",children:[h.specifications.dimensions.depth," ",h.specifications.unit]})]}),h.specifications.dimensions.height&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ÿßŸÑÿßÿ±ÿ™ŸÅÿßÿπ:"}),t.jsxs("span",{className:"font-medium",children:[h.specifications.dimensions.height," ",h.specifications.unit]})]})]})]})]}),h.tags&&h.tags.length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÿßŸÑŸàÿ≥ŸàŸÖ"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:h.tags.map((s,P)=>t.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full",children:s},P))})]}),t.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx(ne,{size:18}),"ÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ÿßŸÑÿ±ÿ≥ŸÖ"]})]})]})})]})]})};export{et as CADUnifiedPlatform,et as default};
