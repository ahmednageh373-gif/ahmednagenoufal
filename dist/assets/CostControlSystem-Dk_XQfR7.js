import{r,j as e}from"./react-vendor-ITqvX6Xp.js";import{D as S,a6 as I,P as D,t as A,bk as $,j,aJ as K,bl as M,F as W,c as O}from"./icons-lib-Bt_-gcnY.js";import{R as x,B as R,C as b,X as u,Y as N,T as g,L as k,d as v,i as Q,j as q,k as U,b as P,c as l}from"./charts-lib-DgEsQKhD.js";import"./vendor-8CkhJSGZ.js";const Z=({projectId:X,totalBudget:i})=>{const[o,F]=r.useState("overview"),[m,V]=r.useState("all"),[h,L]=r.useState("all"),[d]=r.useState([{id:"C001",description:"أجور عمالة - أعمال الخرسانة",costType:"Direct Labor",costCode:"LAB-001",linkedBOQItemId:"F-001",linkedTaskId:1,plannedCost:5e4,committedCost:48e3,actualCost:52e3,variance:-2e3,variancePercentage:-4,date:"2024-11-01",status:"Actual",notes:"تجاوز التكلفة المخططة بسبب العمل الإضافي"},{id:"C002",description:"إيجار معدات - كرين 50 طن",costType:"Equipment",costCode:"EQP-001",linkedTaskId:1,plannedCost:25e3,committedCost:25e3,actualCost:25e3,variance:0,variancePercentage:0,date:"2024-11-05",status:"Actual",notes:"ضمن الميزانية المخططة"},{id:"C003",description:"خرسانة جاهزة 350",costType:"Materials",costCode:"MAT-001",linkedBOQItemId:"F-001",plannedCost:15e4,committedCost:145e3,actualCost:0,variance:5e3,variancePercentage:3.3,date:"2024-11-10",status:"Committed",notes:"تم الحصول على خصم من المورد"},{id:"C004",description:"مقاول باطن - أعمال الكهرباء",costType:"Subcontractor",costCode:"SUB-001",plannedCost:2e5,committedCost:195e3,actualCost:0,variance:5e3,variancePercentage:2.5,date:"2024-12-01",status:"Committed",notes:"عقد مقاول باطن بسعر تنافسي"}]),[y]=r.useState([{id:"BA001",category:"العمالة المباشرة",allocatedBudget:5e5,committedAmount:38e4,actualSpent:25e4,remaining:25e4,utilizationPercentage:50,forecastedTotal:52e4,varianceAtCompletion:-2e4},{id:"BA002",category:"المواد",allocatedBudget:8e5,committedAmount:65e4,actualSpent:4e5,remaining:4e5,utilizationPercentage:50,forecastedTotal:78e4,varianceAtCompletion:2e4},{id:"BA003",category:"المعدات",allocatedBudget:3e5,committedAmount:2e5,actualSpent:15e4,remaining:15e4,utilizationPercentage:50,forecastedTotal:295e3,varianceAtCompletion:5e3},{id:"BA004",category:"المقاولون من الباطن",allocatedBudget:6e5,committedAmount:4e5,actualSpent:2e5,remaining:4e5,utilizationPercentage:33.3,forecastedTotal:59e4,varianceAtCompletion:1e4},{id:"BA005",category:"التكاليف العامة",allocatedBudget:2e5,committedAmount:1e5,actualSpent:8e4,remaining:12e4,utilizationPercentage:40,forecastedTotal:195e3,varianceAtCompletion:5e3}]),[f]=r.useState([{id:"CF001",date:"2024-10-01",description:"دفعة مقدمة من العميل",category:"تحصيلات",inflow:5e5,outflow:0,balance:5e5,type:"Income",paymentMethod:"تحويل بنكي"},{id:"CF002",date:"2024-10-05",description:"دفعة لمورد الخرسانة",category:"مواد",inflow:0,outflow:15e4,balance:35e4,type:"Expense",relatedDocumentId:"PO-001",paymentMethod:"شيك"},{id:"CF003",date:"2024-10-15",description:"صرف رواتب العمالة",category:"رواتب",inflow:0,outflow:8e4,balance:27e4,type:"Expense",paymentMethod:"تحويل بنكي"},{id:"CF004",date:"2024-11-01",description:"المستخلص الأول",category:"تحصيلات",inflow:3e5,outflow:0,balance:57e4,type:"Income",relatedDocumentId:"PC-001",paymentMethod:"تحويل بنكي"}]),s={scheduleVariance:-1e5,scheduleVariancePercentage:-8.3,costVariance:-5e4,costVariancePercentage:-4.5,schedulePerformanceIndex:.917,costPerformanceIndex:.957,estimateAtCompletion:2508e3,estimateToComplete:1358e3,varianceAtCompletion:-108e3},p=r.useMemo(()=>d.reduce((t,a)=>t+a.plannedCost,0),[d]);r.useMemo(()=>d.reduce((t,a)=>t+a.committedCost,0),[d]);const c=r.useMemo(()=>d.reduce((t,a)=>t+a.actualCost,0),[d]),n=p-c,E=p>0?(n/p*100).toFixed(1):"0",T=y.map(t=>({name:t.category,مخطط:t.allocatedBudget,ملتزم:t.committedAmount,فعلي:t.actualSpent})),w=y.map(t=>({name:t.category,value:t.actualSpent})),C=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6"],B=[{month:"يناير",PV:2e5,EV:18e4,AC:19e4},{month:"فبراير",PV:4e5,EV:38e4,AC:4e5},{month:"مارس",PV:6e5,EV:55e4,AC:58e4},{month:"أبريل",PV:8e5,EV:72e4,AC:76e4},{month:"مايو",PV:1e6,EV:9e5,AC:95e4},{month:"يونيو (حتى الآن)",PV:12e5,EV:11e5,AC:115e4}],z=f.map(t=>({date:t.date,تحصيلات:t.inflow,مصروفات:t.outflow,رصيد:t.balance}));return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(S,{className:"text-green-600",size:32}),"نظام إدارة التكاليف والإدارة المالية"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"تحكم شامل في التكاليف والميزانية والتدفقات النقدية"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(I,{size:20}),"تصدير التقرير"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[e.jsx(D,{size:20}),"إضافة تكلفة"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"الميزانية الإجمالية"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.toLocaleString()," ريال"]})]}),e.jsx(A,{size:36,className:"opacity-50"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"التكلفة الفعلية"}),e.jsxs("p",{className:"text-2xl font-bold",children:[c.toLocaleString()," ريال"]}),e.jsxs("p",{className:"text-xs mt-1 opacity-75",children:[(c/i*100).toFixed(1),"% من الميزانية"]})]}),e.jsx($,{size:36,className:"opacity-50"})]})}),e.jsx("div",{className:`bg-gradient-to-br ${n>=0?"from-emerald-500 to-emerald-600":"from-red-500 to-red-600"} text-white p-4 rounded-lg`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"الانحراف"}),e.jsxs("p",{className:"text-2xl font-bold",children:[n.toLocaleString()," ريال"]}),e.jsxs("p",{className:"text-xs mt-1 opacity-75",children:[E,"% ",n>=0?"توفير":"تجاوز"]})]}),n>=0?e.jsx(j,{size:36,className:"opacity-50"}):e.jsx(K,{size:36,className:"opacity-50"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"المتبقي"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(i-c).toLocaleString()," ريال"]}),e.jsxs("p",{className:"text-xs mt-1 opacity-75",children:[((i-c)/i*100).toFixed(1),"% متبقي"]})]}),e.jsx(M,{size:36,className:"opacity-50"})]})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:[{key:"overview",label:"نظرة عامة",icon:j},{key:"costs",label:"التكاليف",icon:S},{key:"budget",label:"الميزانية",icon:A},{key:"payments",label:"المستخلصات",icon:W},{key:"cashflow",label:"التدفق النقدي",icon:j},{key:"evm",label:"إدارة القيمة المكتسبة",icon:O}].map(t=>e.jsxs("button",{onClick:()=>F(t.key),className:`px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${o===t.key?"border-indigo-600 text-indigo-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(t.icon,{className:"inline mr-2",size:18}),t.label]},t.key))})}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[o==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"نظرة عامة على الميزانية حسب الفئة"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(R,{data:T,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(N,{}),e.jsx(g,{}),e.jsx(k,{}),e.jsx(v,{dataKey:"مخطط",fill:"#4F46E5"}),e.jsx(v,{dataKey:"ملتزم",fill:"#10B981"}),e.jsx(v,{dataKey:"فعلي",fill:"#F59E0B"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"توزيع التكاليف الفعلية"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(Q,{children:[e.jsx(q,{data:w,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,percent:a})=>`${t}: ${(a*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:w.map((t,a)=>e.jsx(U,{fill:C[a%C.length]},`cell-${a}`))}),e.jsx(g,{})]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:t.category}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"المخصص:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.allocatedBudget.toLocaleString()," ريال"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"المنصرف:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.actualSpent.toLocaleString()," ريال"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"المتبقي:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:[t.remaining.toLocaleString()," ريال"]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"نسبة الاستخدام"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.utilizationPercentage.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${t.utilizationPercentage>80?"bg-red-500":t.utilizationPercentage>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(t.utilizationPercentage,100)}%`}})})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"التوقع النهائي:"}),e.jsxs("span",{className:`font-medium ${t.varianceAtCompletion>=0?"text-green-600":"text-red-600"}`,children:[t.forecastedTotal.toLocaleString()," ريال"]})]})]},t.id))})]}),o==="costs"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("select",{value:m,onChange:t=>V(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"جميع الأنواع"}),e.jsx("option",{value:"Direct Labor",children:"العمالة المباشرة"}),e.jsx("option",{value:"Equipment",children:"المعدات"}),e.jsx("option",{value:"Materials",children:"المواد"}),e.jsx("option",{value:"Subcontractor",children:"المقاولون من الباطن"}),e.jsx("option",{value:"Overhead",children:"التكاليف العامة"})]}),e.jsxs("select",{value:h,onChange:t=>L(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"Planned",children:"مخطط"}),e.jsx("option",{value:"Committed",children:"ملتزم"}),e.jsx("option",{value:"Actual",children:"فعلي"}),e.jsx("option",{value:"Forecasted",children:"متوقع"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"الرمز"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"الوصف"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"النوع"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"مخطط"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"ملتزم"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"فعلي"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"الانحراف"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"الحالة"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.filter(t=>(m==="all"||t.costType===m)&&(h==="all"||t.status===h)).map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white font-medium",children:t.costCode}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.description}),t.notes&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.notes})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:t.costType}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:t.plannedCost.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:t.committedCost.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:t.actualCost.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("span",{className:t.variance>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:[t.variance.toLocaleString()," (",t.variancePercentage.toFixed(1),"%)"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${t.status==="Actual"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t.status==="Committed"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:t.status})})]},t.id))})]})})]})}),o==="evm"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"مؤشر أداء الجدول (SPI)"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.schedulePerformanceIndex.toFixed(2)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"متأخر عن الجدول"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"مؤشر أداء التكلفة (CPI)"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.costPerformanceIndex.toFixed(2)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"أعلى من الميزانية"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"انحراف الجدول (SV)"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.scheduleVariance.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[s.scheduleVariancePercentage.toFixed(1),"% من PV"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"انحراف التكلفة (CV)"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.costVariance.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[s.costVariancePercentage.toFixed(1),"% من EV"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"تحليل القيمة المكتسبة (EVM)"}),e.jsx(x,{width:"100%",height:400,children:e.jsxs(P,{data:B,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"month"}),e.jsx(N,{}),e.jsx(g,{}),e.jsx(k,{}),e.jsx(l,{type:"monotone",dataKey:"PV",stroke:"#4F46E5",strokeWidth:2,name:"القيمة المخططة (PV)"}),e.jsx(l,{type:"monotone",dataKey:"EV",stroke:"#10B981",strokeWidth:2,name:"القيمة المكتسبة (EV)"}),e.jsx(l,{type:"monotone",dataKey:"AC",stroke:"#EF4444",strokeWidth:2,name:"التكلفة الفعلية (AC)"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"التقدير عند الإنجاز (EAC)"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[s.estimateAtCompletion.toLocaleString()," ريال"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"التكلفة المتوقعة النهائية"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"التقدير للإنجاز (ETC)"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[s.estimateToComplete.toLocaleString()," ريال"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"التكلفة المتبقية المتوقعة"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"الانحراف عند الإنجاز (VAC)"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[s.varianceAtCompletion.toLocaleString()," ريال"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"تجاوز متوقع"})]})]})]}),o==="cashflow"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"التدفق النقدي"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(P,{data:z,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(N,{}),e.jsx(g,{}),e.jsx(k,{}),e.jsx(l,{type:"monotone",dataKey:"تحصيلات",stroke:"#10B981",strokeWidth:2}),e.jsx(l,{type:"monotone",dataKey:"مصروفات",stroke:"#EF4444",strokeWidth:2}),e.jsx(l,{type:"monotone",dataKey:"رصيد",stroke:"#4F46E5",strokeWidth:3})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"التاريخ"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"الوصف"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"الفئة"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"التحصيلات"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"المصروفات"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"الرصيد"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:"طريقة الدفع"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:t.date}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:t.description}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:t.category}),e.jsx("td",{className:"px-4 py-3 text-sm text-green-600 dark:text-green-400 font-medium",children:t.inflow>0&&`+${t.inflow.toLocaleString()}`}),e.jsx("td",{className:"px-4 py-3 text-sm text-red-600 dark:text-red-400 font-medium",children:t.outflow>0&&`-${t.outflow.toLocaleString()}`}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white font-bold",children:t.balance.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:t.paymentMethod})]},t.id))})]})})})]})]})]})};export{Z as CostControlSystem,Z as default};
