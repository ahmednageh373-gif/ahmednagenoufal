var fe=Object.defineProperty,pe=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var B=(t,l,a)=>l in t?fe(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,z=(t,l)=>{for(var a in l||(l={}))je.call(l,a)&&B(t,a,l[a]);if(q)for(var a of q(l))ye.call(l,a)&&B(t,a,l[a]);return t},I=(t,l)=>pe(t,be(l));var P=(t,l,a)=>new Promise((r,u)=>{var j=h=>{try{m(a.next(h))}catch(f){u(f)}},b=h=>{try{m(a.throw(h))}catch(f){u(f)}},m=h=>h.done?r(h.value):Promise.resolve(h.value).then(j,b);m((a=a.apply(t,l)).next())});import{r as o,j as e,f as G}from"./react-vendor-ITqvX6Xp.js";import{X,U as H,N as O,a6 as ve,V as J,F as Q,O as Ne,P as we,J as ke,ag as De,ah as Ce,ai as A,af as Y,a9 as K}from"./icons-lib-BklrIGsN.js";import"./vendor-8CkhJSGZ.js";const Fe=({isOpen:t,onClose:l,onSave:a,drawing:r,scheduleTasks:u})=>{const[j,b]=o.useState(r.title),[m,h]=o.useState([]),[f,D]=o.useState(""),[w,k]=o.useState(null),[g,x]=o.useState(null),c=o.useRef(null);o.useEffect(()=>{if(t)if(b(r.title),h(r.scheduleTaskIds||[]),r.versions.length>0){const i=[...r.versions].sort((C,T)=>T.version-C.version)[0];x(i)}else x(null)},[r,t]);const y=()=>{a(I(z({},r),{title:j,scheduleTaskIds:m})),l()},U=i=>{i.target.files&&i.target.files[0]&&k(i.target.files[0])},E=()=>P(null,null,function*(){if(!w||!f){alert("يرجى تقديم وصف وملف للإصدار الجديد.");return}const i=yield new Promise((F,L)=>{const S=new FileReader;S.onload=()=>F(S.result),S.onerror=L,S.readAsDataURL(w)}),C={version:r.versions.length>0?Math.max(...r.versions.map(F=>F.version))+1:1,date:new Date().toISOString().split("T")[0],description:f,url:i,fileName:w.name},T=I(z({},r),{title:j,scheduleTaskIds:m,versions:[...r.versions,C]});a(T),D(""),k(null),x(C),c.current&&(c.current.value="")}),R=()=>{if(!g)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-gray-100 dark:bg-gray-900 rounded-lg",children:[e.jsx(O,{size:64,className:"text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"لا يوجد إصدار لعرضه."})]});const i=g.url.startsWith("data:")?g.url.split(";")[0].split(":")[1]:"";return i.startsWith("image/")?e.jsx("img",{src:g.url,alt:`Preview of ${g.fileName}`,className:"w-full h-full object-contain"}):i==="application/pdf"?e.jsx("iframe",{src:g.url,title:g.fileName,className:"w-full h-full border-0"}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-gray-100 dark:bg-gray-900 rounded-lg p-4 text-center",children:[e.jsx(O,{size:64,className:"text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-semibold",children:"المعاينة غير متاحة"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["نوع الملف '",g.fileName.split(".").pop(),"' غير مدعوم للعرض المباشر."]}),e.jsxs("a",{href:g.url,download:g.fileName,className:"mt-4 flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(ve,{size:16}),"تحميل الملف"]})]})};return t?e.jsx("div",{className:"modal",style:{display:"block"},onClick:l,children:e.jsxs("div",{className:"modal-content p-8 max-w-6xl dark:bg-gray-800 flex flex-col h-[90vh]",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"تفاصيل المخطط"}),e.jsx("button",{onClick:l,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:e.jsx(X,{size:24})})]}),e.jsxs("div",{className:"flex-grow grid grid-cols-1 lg:grid-cols-3 gap-8 overflow-hidden",children:[e.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-6 overflow-y-auto pr-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"drawingTitle",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"عنوان المخطط"}),e.jsx("input",{id:"drawingTitle",type:"text",value:j,onChange:i=>b(i.target.value),className:"w-full bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"linkedTasks",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"المهام المرتبطة بالجدول الزمني"}),e.jsx("select",{id:"linkedTasks",multiple:!0,value:m.map(String),onChange:i=>h(Array.from(i.target.selectedOptions,C=>Number(C.value))),className:"w-full h-40 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"يمكنك تحديد مهام متعددة بالضغط على Ctrl/Cmd."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"الإصدارات"}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("table",{className:"w-full text-right",children:e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"الإصدار"}),e.jsx("th",{className:"p-2",children:"التاريخ"}),e.jsx("th",{className:"p-2",children:"الوصف"})]})})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.jsx("table",{className:"w-full text-right",children:e.jsx("tbody",{children:r.versions.sort((i,C)=>C.version-i.version).map(i=>e.jsxs("tr",{onClick:()=>x(i),className:`border-b border-gray-200 dark:border-gray-700 last:border-b-0 text-sm cursor-pointer transition-colors ${(g==null?void 0:g.version)===i.version?"bg-indigo-50 dark:bg-indigo-900/50":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[e.jsxs("td",{className:"p-2 font-mono w-16",children:["v",i.version]}),e.jsx("td",{className:"p-2 w-24",children:i.date}),e.jsx("td",{className:"p-2",children:i.description})]},i.version))})})}),r.versions.length===0&&e.jsx("p",{className:"text-center p-4 text-slate-500",children:"لا توجد إصدارات."})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إضافة إصدار جديد"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"وصف الإصدار (مثال: تعديل الواجهة الرئيسية)",value:f,onChange:i=>D(i.target.value),className:"w-full bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("input",{type:"file",ref:c,onChange:U,className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"})]}),e.jsxs("button",{onClick:E,disabled:!f||!w,className:"mt-4 flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400",children:[e.jsx(H,{size:18}),e.jsx("span",{children:"رفع وإضافة الإصدار"})]})]})]}),e.jsx("div",{className:"lg:col-span-2 bg-gray-50 dark:bg-gray-900 rounded-lg overflow-hidden",children:R()})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6 shrink-0 border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded-lg text-slate-700 dark:text-slate-200 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500",children:"إغلاق"}),e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 rounded-lg text-white bg-indigo-600 hover:bg-indigo-700",children:"حفظ التغييرات"})]})]})}):null},Se=t=>{var a;if(t.startsWith("data:"))return t.split(";")[0].split(":")[1]||"";switch(((a=t.split(".").pop())==null?void 0:a.toLowerCase())||""){case"pdf":return"application/pdf";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}},Te=({drawing:t})=>{const l=o.useRef(null),[a,r]=o.useState(null),[u,j]=o.useState(!0),b=t.versions.length>0?[...t.versions].sort((m,h)=>h.version-m.version)[0]:null;return o.useEffect(()=>{if(j(!0),r(null),!b){j(!1);return}const m=Se(b.url);m.startsWith("image/")?(r(b.url),j(!1)):m==="application/pdf"?P(null,null,function*(){try{pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const w=yield(yield pdfjsLib.getDocument(b.url).promise).getPage(1),k=l.current;if(k){const g=w.getViewport({scale:.5}),x=k.getContext("2d");if(x){k.height=g.height,k.width=g.width;const c={canvasContext:x,viewport:g};yield w.render(c).promise,r(k.toDataURL("image/png"))}}}catch(f){console.error("Error rendering PDF thumbnail:",f),r(null)}finally{j(!1)}}):j(!1)},[b]),u?e.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-700",children:[e.jsx(J,{size:32,className:"animate-spin text-gray-500"}),e.jsx("canvas",{ref:l,style:{display:"none"}})]}):a?e.jsx("img",{src:a,alt:t.title,className:"w-full h-full object-contain"}):e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center p-4",children:e.jsx(Q,{size:48,className:"text-gray-500"})})},ze=({isOpen:t,onClose:l,onUpload:a,initialFiles:r})=>{const[u,j]=o.useState([]),[b,m]=o.useState([]),[h,f]=o.useState({}),[D,w]=o.useState(!1);G.useEffect(()=>{t&&(j(r),m(r.map(x=>x.name.replace(/\.[^/.]+$/,""))),f({}),w(!1))},[t,r]);const k=(x,c)=>{const y=[...b];y[x]=c,m(y)},g=()=>P(null,null,function*(){w(!0);const x=u.map((c,y)=>({file:c,title:b[y]}));for(let c=0;c<u.length;c++)f(y=>I(z({},y),{[c]:"uploading"})),yield new Promise(y=>setTimeout(y,200)),f(y=>I(z({},y),{[c]:"done"}));yield a(x),setTimeout(()=>{l()},1e3)});return t?e.jsx("div",{className:"modal",style:{display:"block"},onClick:l,children:e.jsxs("div",{className:"modal-content p-8 max-w-2xl dark:bg-gray-800",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"رفع مخططات جديدة"}),e.jsx("button",{onClick:l,children:e.jsx(X,{size:24})})]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:u.map((x,c)=>e.jsxs("div",{className:"flex items-center gap-3 bg-gray-100 dark:bg-gray-700 p-3 rounded-lg",children:[e.jsx(Q,{size:24,className:"text-indigo-500 shrink-0"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("input",{type:"text",value:b[c],onChange:y=>k(c,y.target.value),className:"w-full bg-transparent font-semibold focus:outline-none",disabled:D}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.name," - ",(x.size/1024).toFixed(1)," KB"]})]}),h[c]==="uploading"&&e.jsx(J,{size:20,className:"animate-spin text-indigo-500"}),h[c]==="done"&&e.jsx(Y,{size:20,className:"text-green-500"})]},c))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-6 mt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:l,disabled:D,className:"py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600",children:"إلغاء"}),e.jsx("button",{onClick:g,disabled:D||u.length===0,className:"py-2 px-4 rounded-lg bg-indigo-600 text-white flex items-center gap-2",children:D?"جاري الرفع...":`رفع ${u.length} مخططات`})]})]})}):null},Re=({project:t,onUpdateDrawings:l})=>{const a=t.data.drawings||[],r=t.data.drawingFolders||[],[u,j]=o.useState(null),[b,m]=o.useState(null),[h,f]=o.useState(!1),[D,w]=o.useState(""),[k,g]=o.useState(null),[x,c]=o.useState(null),[y,U]=o.useState(!1),[E,R]=o.useState(!1),[i,C]=o.useState([]),T=o.useRef(null),F=o.useMemo(()=>r.find(s=>s.id===u),[r,u]),{subFolders:L,folderDrawings:S}=o.useMemo(()=>{const s=r.filter(d=>d.parentId===u).sort((d,v)=>d.name.localeCompare(v.name,"ar")),n=a.filter(d=>d.folderId===u).sort((d,v)=>d.title.localeCompare(v.title,"ar"));return{subFolders:s,folderDrawings:n}},[u,a,r]),Z=o.useMemo(()=>{const s=[];let n=F;for(;n;)s.unshift(n),n=r.find(d=>d.id===(n==null?void 0:n.parentId));return s},[F,r]),ee=s=>{const n=a.map(d=>d.id===s.id?s:d);l(t.id,n,r),m(null)},V=()=>{if(!D.trim())return;const s={id:`folder-${Date.now()}`,name:D.trim(),parentId:u};l(t.id,a,[...r,s]),w(""),f(!1)},se=s=>{if(!window.confirm("هل أنت متأكد من حذف هذا المجلد وجميع محتوياته؟ لا يمكن التراجع عن هذا الإجراء."))return;const n=new Set([s]),d=new Set,v=p=>{r.filter(N=>N.parentId===p).forEach(N=>{n.add(N.id),v(N.id)}),a.filter(N=>N.folderId===p).forEach(N=>d.add(N.id))};v(s),l(t.id,a.filter(p=>!d.has(p.id)),r.filter(p=>!n.has(p.id)))},te=s=>{window.confirm("هل أنت متأكد من حذف هذا المخطط؟")&&l(t.id,a.filter(n=>n.id!==s),r)},_=s=>{s.length>0&&(C(s),R(!0))},re=s=>{s.target.files&&_(Array.from(s.target.files))},ae=s=>P(null,null,function*(){const n=[...a];for(const{file:d,title:v}of s){const p=yield new Promise((me,he)=>{const $=new FileReader;$.onload=()=>me($.result),$.onerror=he,$.readAsDataURL(d)}),N={version:1,date:new Date().toISOString().split("T")[0],description:"الإصدار الأولي",url:p,fileName:d.name},M={id:`dwg-${Date.now()}-${Math.random()}`,title:v,folderId:u,versions:[N]};n.push(M)}l(t.id,n,r)}),le=s=>{s.preventDefault(),s.dataTransfer.types.includes("Files")&&U(!0)},ne=s=>{s.preventDefault(),U(!1)},ie=s=>{s.preventDefault(),U(!1),_(Array.from(s.dataTransfer.files))},oe=(s,n)=>{s.dataTransfer.setData("application/an.ai.drawing-id",n),g(n)},W=()=>{g(null),c(null)},de=(s,n)=>{s.preventDefault(),k&&c(n)},ce=()=>c(null),ge=(s,n)=>{var v;s.preventDefault();const d=s.dataTransfer.getData("application/an.ai.drawing-id");if(d&&((v=a.find(p=>p.id===d))==null?void 0:v.folderId)!==n){const p=a.map(N=>N.id===d?I(z({},N),{folderId:n}):N);l(t.id,p,r)}W()},ue=()=>{window.print()},xe=()=>{const s=[...L.map(v=>({النوع:"مجلد",الاسم:v.name,"معلومات إضافية":""})),...S.map(v=>{const p=v.versions.length>0?v.versions.sort((N,M)=>M.version-N.version)[0]:null;return{النوع:"مخطط",الاسم:v.title,"معلومات إضافية":`الإصدار الأحدث: v${(p==null?void 0:p.version)||"N/A"} بتاريخ ${(p==null?void 0:p.date)||"N/A"}`}})],n=XLSX.utils.json_to_sheet(s),d=XLSX.utils.book_new();XLSX.utils.book_append_sheet(d,n,"Drawings"),XLSX.writeFile(d,`drawings_${(F==null?void 0:F.name)||"root"}_${t.name.replace(/\s/g,"_")}.xlsx`)};return e.jsxs("div",{className:"printable-area",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8 flex-wrap gap-4 no-print",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"إدارة المخططات"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["تنظيم وعرض المخططات الهندسية لمشروع: ",e.jsx("span",{className:"font-semibold",children:t.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:xe,className:"flex items-center gap-2 bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700",children:[e.jsx(O,{size:18}),e.jsx("span",{children:"تصدير Excel"})]}),e.jsxs("button",{onClick:ue,className:"flex items-center gap-2 bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600",children:[e.jsx(Ne,{size:18}),e.jsx("span",{children:"طباعة / PDF"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-800",children:[e.jsx(we,{size:18}),e.jsx("span",{children:"مجلد جديد"})]}),e.jsxs("button",{onClick:()=>{var s;return(s=T.current)==null?void 0:s.click()},className:"flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700",children:[e.jsx(H,{size:18}),e.jsx("span",{children:"رفع مخططات"})]}),e.jsx("input",{type:"file",multiple:!0,ref:T,onChange:re,className:"hidden"})]})]}),e.jsxs("div",{className:`relative bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-800 p-6 rounded-xl shadow-sm transition-colors duration-300 ${y?"border-indigo-500 border-dashed bg-indigo-50 dark:bg-indigo-900/20":""}`,onDragOver:le,onDragLeave:ne,onDrop:ie,children:[y&&e.jsxs("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-xl pointer-events-none no-print",children:[e.jsx(ke,{size:64,className:"text-white mb-4"}),e.jsx("p",{className:"text-white font-bold text-lg",children:"أفلت الملفات هنا لرفعها"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm mb-4 pb-4 border-b border-gray-200 dark:border-gray-700 no-print",children:[e.jsxs("button",{onClick:()=>j(null),className:"flex items-center gap-1 text-gray-500 hover:text-indigo-600",children:[e.jsx(De,{size:16})," الرئيسية"]}),Z.map(s=>e.jsxs(G.Fragment,{children:[e.jsx(Ce,{size:16,className:"text-gray-400"}),e.jsx("button",{onClick:()=>j(s.id),className:"text-gray-500 hover:text-indigo-600",children:s.name})]},s.id))]}),h&&e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4 flex items-center gap-2 no-print",children:[e.jsx(A,{size:20,className:"text-indigo-500"}),e.jsx("input",{type:"text",value:D,onChange:s=>w(s.target.value),placeholder:"اسم المجلد الجديد",autoFocus:!0,className:"flex-grow bg-transparent focus:outline-none",onKeyDown:s=>s.key==="Enter"&&V()}),e.jsx("button",{onClick:V,className:"p-1 text-green-500 hover:bg-green-100 rounded-full",children:e.jsx(Y,{size:18})}),e.jsx("button",{onClick:()=>f(!1),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:e.jsx(X,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[L.map(s=>e.jsxs("div",{onDragOver:n=>de(n,s.id),onDragLeave:ce,onDrop:n=>ge(n,s.id),className:`group relative transition-all rounded-lg ${x===s.id?"ring-2 ring-indigo-500 ring-offset-2 bg-indigo-50 dark:bg-indigo-900/30":""}`,children:[e.jsxs("button",{onDoubleClick:()=>j(s.id),className:"w-full flex flex-col items-center justify-center p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/50 text-center aspect-square transition-colors",children:[e.jsx(A,{size:48,className:"text-indigo-500 mb-2"}),e.jsx("span",{className:"text-sm font-medium break-all",children:s.name})]}),e.jsx("button",{onClick:()=>se(s.id),className:"absolute top-2 right-2 p-1 text-gray-400 hover:text-red-500 hover:bg-red-100 rounded-full opacity-0 group-hover:opacity-100 no-print",children:e.jsx(K,{size:16})})]},s.id)),S.map(s=>e.jsxs("div",{draggable:!0,onDragStart:n=>oe(n,s.id),onDragEnd:W,className:`group relative cursor-move ${k===s.id?"opacity-30":""}`,children:[e.jsxs("button",{onClick:()=>m(s),className:"w-full flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-lg text-center aspect-square overflow-hidden border border-gray-200 dark:border-gray-700 hover:border-indigo-500 hover:shadow-md",children:[e.jsx("div",{className:"flex-grow w-full h-full flex items-center justify-center relative",children:e.jsx(Te,{drawing:s})}),e.jsx("div",{className:"w-full p-2 bg-white/70 dark:bg-black/70 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700",children:e.jsx("span",{className:"text-sm font-medium break-all text-gray-800 dark:text-gray-200",children:s.title})})]}),e.jsx("button",{onClick:()=>te(s.id),className:"absolute top-2 right-2 p-1 text-gray-400 bg-white/50 dark:bg-black/50 backdrop-blur-sm hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 no-print",children:e.jsx(K,{size:16})})]},s.id))]}),L.length===0&&S.length===0&&!h&&e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(A,{size:48,className:"mx-auto mb-4"}),e.jsx("p",{children:"هذا المجلد فارغ."})]})]}),b&&e.jsx(Fe,{isOpen:!!b,onClose:()=>m(null),onSave:ee,drawing:b,scheduleTasks:t.data.schedule}),e.jsx(ze,{isOpen:E,onClose:()=>R(!1),onUpload:ae,initialFiles:i})]})};export{Re as DrawingManager};
