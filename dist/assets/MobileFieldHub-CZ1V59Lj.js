var E=Object.defineProperty,I=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var k=(r,t,s)=>t in r?E(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,i=(r,t)=>{for(var s in t||(t={}))F.call(t,s)&&k(r,s,t[s]);if(w)for(var s of w(t))R.call(t,s)&&k(r,s,t[s]);return r},o=(r,t)=>I(r,q(t));var v=(r,t,s)=>new Promise((u,m)=>{var h=l=>{try{n(s.next(l))}catch(c){m(c)}},p=l=>{try{n(s.throw(l))}catch(c){m(c)}},n=l=>l.done?u(l.value):Promise.resolve(l.value).then(h,p);n((s=s.apply(r,t)).next())});import{r as g,j as e}from"./react-vendor-ITqvX6Xp.js";import{bp as P,F as L,q as j,u as f,U as y,aX as O,Y as U,aK as B,a4 as $}from"./icons-lib-Dd_BpYQ6.js";import"./vendor-8CkhJSGZ.js";const X=()=>{const[r,t]=g.useState("daily_report"),[s,u]=g.useState("1"),[m,h]=g.useState(!1),[p,n]=g.useState(!1),[l,c]=g.useState(null),S=[{id:"daily_report",name:"تقرير يومي",icon:L},{id:"photos",name:"الصور",icon:j},{id:"attendance",name:"الحضور",icon:f},{id:"sync",name:"المزامنة",icon:y}],[d,x]=g.useState({weather:"",activities:"",workers_count:"",issues:"",notes:""}),C=()=>v(null,null,function*(){h(!0),c(null),n(!1);try{const a=window.location.origin.replace("3000","5000"),b=yield fetch(`${a}/api/mobile/daily-report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i({project_id:parseInt(s),engineer_id:1,date:new Date().toISOString().split("T")[0]},d))});if(!b.ok)throw new Error("فشل إرسال التقرير");const N=yield b.json();if(N.success)n(!0),x({weather:"",activities:"",workers_count:"",issues:"",notes:""});else throw new Error(N.error||"خطأ في إرسال التقرير")}catch(a){c(a.message)}finally{h(!1)}}),T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(B,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white",children:["التقرير اليومي - ",new Date().toLocaleDateString("ar-SA")]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"سجل أنشطة الموقع اليومية"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"حالة الطقس"}),e.jsxs("select",{value:d.weather,onChange:a=>x(o(i({},d),{weather:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"اختر حالة الطقس"}),e.jsx("option",{value:"sunny",children:"مشمس"}),e.jsx("option",{value:"cloudy",children:"غائم"}),e.jsx("option",{value:"rainy",children:"ممطر"}),e.jsx("option",{value:"hot",children:"حار"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"عدد العمال"}),e.jsx("input",{type:"number",value:d.workers_count,onChange:a=>x(o(i({},d),{workers_count:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"عدد العمال في الموقع"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"الأنشطة المنفذة"}),e.jsx("textarea",{value:d.activities,onChange:a=>x(o(i({},d),{activities:a.target.value})),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"اكتب تفاصيل الأنشطة المنفذة اليوم..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"المشاكل والعوائق"}),e.jsx("textarea",{value:d.issues,onChange:a=>x(o(i({},d),{issues:a.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"سجل أي مشاكل أو عوائق..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ملاحظات إضافية"}),e.jsx("textarea",{value:d.notes,onChange:a=>x(o(i({},d),{notes:a.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"أي ملاحظات أخرى..."})]}),e.jsx("button",{onClick:C,disabled:m,className:"w-full md:w-auto flex items-center justify-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:m?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-5 h-5 animate-spin"}),"جاري الإرسال..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-5 h-5"}),"إرسال التقرير"]})})]}),_=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(j,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"رفع صور الموقع"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"التقط صور للتقدم والمشاكل في الموقع"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-12 text-center",children:[e.jsx(j,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"اضغط لالتقاط صورة أو اختر من المعرض"}),e.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"رفع صورة"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg"}),e.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg"}),e.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg"}),e.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg"})]})]}),A=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(f,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"تسجيل الحضور"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"سجل حضور وانصراف العمال والموظفين"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"الاسم"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"الوقت"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"الحالة"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"محمد أحمد"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:"07:00 ص"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"حاضر"})})]})})]})})]}),D=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(y,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"مزامنة البيانات"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"مزامنة البيانات المحفوظة محلياً مع السيرفر"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"تقارير يومية غير متزامنة"}),e.jsx("span",{className:"font-bold text-blue-600",children:"3"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"صور غير مرفوعة"}),e.jsx("span",{className:"font-bold text-blue-600",children:"12"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"سجلات حضور محلية"}),e.jsx("span",{className:"font-bold text-blue-600",children:"7"})]})]}),e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(y,{className:"w-5 h-5"}),"مزامنة الآن"]})]});return e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-3",children:[e.jsx(P,{className:"w-8 h-8"}),"مركز العمليات الميدانية"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"واجهة التطبيق الميداني لإدارة أنشطة الموقع"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"المشروع الحالي"}),e.jsx("input",{type:"text",value:s,onChange:a=>u(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"معرف المشروع"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md mb-6",children:e.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:S.map(a=>{const b=a.icon;return e.jsxs("button",{onClick:()=>t(a.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 font-medium transition-colors ${r===a.id?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:a.name})]},a.id)})})}),l&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"خطأ"}),e.jsx("p",{children:l})]})]}),p&&e.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("p",{className:"font-bold",children:"تم الإرسال بنجاح!"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[r==="daily_report"&&T(),r==="photos"&&_(),r==="attendance"&&A(),r==="sync"&&D()]})]})};export{X as MobileFieldHub,X as default};
