var O=Object.defineProperty;var k=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var w=(n,a,s)=>a in n?O(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s,v=(n,a)=>{for(var s in a||(a={}))P.call(a,s)&&w(n,s,a[s]);if(k)for(var s of k(a))q.call(a,s)&&w(n,s,a[s]);return n};import{r as i,j as t}from"./react-vendor-D4cZjflF.js";const D={"Pending Approval":{title:"قيد الموافقة",color:"bg-amber-500"},Approved:{title:"معتمد",color:"bg-sky-500"},Ordered:{title:"تم الطلب",color:"bg-indigo-500"},Delivered:{title:"تم التسليم",color:"bg-green-500"},Cancelled:{title:"ملغي",color:"bg-slate-500"}},E=({isOpen:n,onClose:a,onSave:s,order:l})=>{const[h,u]=i.useState(""),[j,d]=i.useState(""),[c,g]=i.useState(1),[o,p]=i.useState(0),[y,m]=i.useState(new Date().toISOString().split("T")[0]),[N,b]=i.useState(new Date().toISOString().split("T")[0]),[f,x]=i.useState("Pending Approval");i.useEffect(()=>{if(n)if(l)u(l.itemName),d(l.supplier),g(l.quantity),p(l.unitPrice),m(l.orderDate),b(l.expectedDelivery),x(l.status);else{u(""),d(""),g(1),p(0);const e=new Date().toISOString().split("T")[0],r=new Date;r.setDate(r.getDate()+14),m(e),b(r.toISOString().split("T")[0]),x("Pending Approval")}},[l,n]);const C=e=>{e.preventDefault();const r=c*o,S={itemName:h,supplier:j,quantity:c,unitPrice:o,total:r,orderDate:y,expectedDelivery:N,status:f};s(l&&l.id?v(v({},l),S):S),a()};return n?t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-center items-center",onClick:a,children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[t.jsx("h3",{className:"text-xl font-bold mb-4",children:l&&l.id?"تعديل أمر الشراء":"أمر شراء جديد"}),t.jsxs("form",{onSubmit:C,className:"space-y-4",children:[t.jsx("input",{type:"text",placeholder:"اسم البند",value:h,onChange:e=>u(e.target.value),required:!0,className:"w-full bg-slate-100 dark:bg-slate-700 p-2 rounded-lg"}),t.jsx("input",{type:"text",placeholder:"المورد",value:j,onChange:e=>d(e.target.value),required:!0,className:"w-full bg-slate-100 dark:bg-slate-700 p-2 rounded-lg"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"number",placeholder:"الكمية",value:c,onChange:e=>g(Number(e.target.value)),min:"0",className:"w-full bg-slate-100 dark:bg-slate-700 p-2 rounded-lg"}),t.jsx("input",{type:"number",placeholder:"سعر الوحدة",value:o,onChange:e=>p(Number(e.target.value)),min:"0",step:"0.01",className:"w-full bg-slate-100 dark:bg-slate-700 p-2 rounded-lg"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm",children:"تاريخ الطلب"}),t.jsx("input",{type:"date",value:y,onChange:e=>m(e.target.value),required:!0,className:"w-full bg-slate-100 dark:bg-slate-700 p-2 rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm",children:"التسليم المتوقع"}),t.jsx("input",{type:"date",value:N,onChange:e=>b(e.target.value),required:!0,className:"w-full bg-slate-100 dark:bg-slate-700 p-2 rounded-lg"})]})]}),t.jsx("select",{value:f,onChange:e=>x(e.target.value),className:"w-full bg-slate-100 dark:bg-slate-700 p-2 rounded-lg",children:Object.keys(D).map(e=>t.jsx("option",{value:e,children:D[e].title},e))}),t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx("button",{type:"button",onClick:a,className:"py-2 px-4 rounded-lg bg-slate-200 dark:bg-slate-600",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"py-2 px-4 rounded-lg bg-sky-600 text-white",children:"حفظ"})]})]})]})}):null};export{E as O};
