<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>AN.AI Ahmed Nageh - نظام إدارة المشاريع المتقدم</title>
    <meta name="title" content="AN.AI - نظام إدارة المشاريع الهندسية المتقدم">
    <meta name="description" content="نظام متكامل لإدارة المشاريع الهندسية والإنشائية مع أدوات متقدمة للجدولة، المقايسات، الإدارة المالية، وتحليل المخاطر. يدعم Primavera P6، معايير SBC، وتحليل الذكاء الاصطناعي.">
    <meta name="keywords" content="إدارة مشاريع, مقايسات, جدول زمني, Primavera, مشاريع إنشائية, BOQ, إدارة مالية, تحليل مخاطر, SBC">
    <meta name="author" content="Ahmed Nageh">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Arabic">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-domain.com/">
    <meta property="og:title" content="AN.AI - نظام إدارة المشاريع الهندسية">
    <meta property="og:description" content="نظام متكامل لإدارة المشاريع الهندسية مع أدوات متقدمة للجدولة والتحليل">
    <meta property="og:image" content="https://your-domain.com/og-image.png">
    <meta property="og:locale" content="ar_SA">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://your-domain.com/">
    <meta property="twitter:title" content="AN.AI - نظام إدارة المشاريع الهندسية">
    <meta property="twitter:description" content="نظام متكامل لإدارة المشاريع الهندسية مع أدوات متقدمة">
    <meta property="twitter:image" content="https://your-domain.com/twitter-image.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://your-domain.com/">
    
    <!-- Resource Hints for Performance -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://apis.google.com">
    
    <!-- Tailwind CSS will be included in the build -->
    <!-- Defer non-critical external libraries - Load them asynchronously after page load -->
    <script>
        // Lazy load external libraries to improve initial page load
        (function() {
            var libraries = [
                { id: 'xlsx', src: 'https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js', priority: 3 },
                { id: 'pdfjs', src: 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js', priority: 3 },
                { id: 'chartjs', src: 'https://cdn.jsdelivr.net/npm/chart.js', priority: 2 },
                { id: 'sortablejs', src: 'https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js', priority: 2 },
                { id: 'gapi', src: 'https://apis.google.com/js/api.js', priority: 4 }
            ];
            
            var loadedLibraries = {};
            
            // Function to load a script dynamically
            function loadScript(lib) {
                return new Promise(function(resolve, reject) {
                    if (loadedLibraries[lib.id]) {
                        resolve();
                        return;
                    }
                    
                    var script = document.createElement('script');
                    script.src = lib.src;
                    script.async = true;
                    script.onload = function() {
                        loadedLibraries[lib.id] = true;
                        resolve();
                    };
                    script.onerror = reject;
                    document.head.appendChild(script);
                });
            }
            
            // Load libraries after page load, prioritizing by usage
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    setTimeout(function() {
                        // Sort by priority (lower number = higher priority)
                        libraries.sort(function(a, b) { return a.priority - b.priority; });
                        
                        // Load high priority libraries first (chartjs, sortablejs)
                        var highPriority = libraries.filter(function(lib) { return lib.priority <= 2; });
                        var lowPriority = libraries.filter(function(lib) { return lib.priority > 2; });
                        
                        Promise.all(highPriority.map(loadScript)).then(function() {
                            // Load low priority libraries after high priority ones
                            lowPriority.forEach(function(lib) {
                                setTimeout(function() { loadScript(lib); }, 1000);
                            });
                        });
                    }, 100);
                });
            } else {
                // Page already loaded
                libraries.sort(function(a, b) { return a.priority - b.priority; });
                libraries.forEach(function(lib, index) {
                    setTimeout(function() { loadScript(lib); }, index * 200);
                });
            }
            
            // Expose a function to check if library is loaded
            window.isLibraryLoaded = function(id) {
                return loadedLibraries[id] || false;
            };
            
            // Expose a function to wait for a library
            window.waitForLibrary = function(id) {
                return new Promise(function(resolve) {
                    if (loadedLibraries[id]) {
                        resolve();
                        return;
                    }
                    var checkInterval = setInterval(function() {
                        if (loadedLibraries[id]) {
                            clearInterval(checkInterval);
                            resolve();
                        }
                    }, 100);
                });
            };
        })();
    </script>
    <script>
        // CRITICAL FIX: Must run BEFORE any React code loads
        // Fix for React Scheduler error in production builds
        (function() {
            // Ensure window.performance exists
            if (typeof window !== 'undefined') {
                // Create performance object if missing
                if (!window.performance) {
                    window.performance = {};
                }
                
                // Add performance.now() method
                if (!window.performance.now) {
                    var startTime = Date.now();
                    window.performance.now = function() { 
                        return Date.now() - startTime; 
                    };
                }
                
                // Add other required performance methods
                if (!window.performance.mark) {
                    window.performance.mark = function() {};
                }
                if (!window.performance.measure) {
                    window.performance.measure = function() {};
                }
                if (!window.performance.clearMarks) {
                    window.performance.clearMarks = function() {};
                }
                if (!window.performance.clearMeasures) {
                    window.performance.clearMeasures = function() {};
                }
            }
        })();
    </script>
    
    <!-- Preload critical font with font-display: swap for better LCP -->
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" media="print" onload="this.media='all'; this.onload=null;">
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap">
    </noscript>
    
    <style>
        :root {
            --font-family-sans: 'Tajawal', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        * {
            font-family: var(--font-family-sans);
        }
        
        /* Custom scrollbar for a modern look */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-950">
    <div id="root">
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Tajawal', sans-serif; direction: rtl;">
            <div style="text-align: center;">
                <div style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                <h2 style="color: #333; font-size: 24px; margin-bottom: 10px;">جاري التحميل...</h2>
                <p style="color: #666; font-size: 14px;">نظام إدارة المشاريع NOUFAL</p>
            </div>
        </div>
        <style>
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        </style>
    </div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>